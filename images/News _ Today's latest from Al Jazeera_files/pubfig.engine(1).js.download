!function(e){"use strict";const t=e=>{const{dependencies:t,name:n}=e||{};if(t){if(!Array.isArray(t))throw new Error(`Module Definition Error: ${n}. Dependencies must be an array.`);t.forEach((e=>{const{token:t}="string"==typeof e?{token:e}:e;if(!t)throw new Error(`Module Definition Error: ${n}. Dependency must contain a token.`);if("string"!=typeof t)throw new Error(`Module Definition Error: ${n}. Token must be a string.`)}))}},n=e=>e.charAt(0).toLowerCase()+e.slice(1),i=function(e){let{name:t,returnValue:n,warn:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e||function(){return i&&console.warn(`${t||"module"} is disabled`),n}},s={SINGLETON:"singleton",FOR_FEATURE:"forFeature"};class r{constructor(){this._modules=new Map}static get instance(){return this._instance||(this._instance=new r),this._instance}set(e,t){if(!e)throw new Error("Token must be provided");if(this._modules.has(e))throw new Error(`Module with token ${e} already exists`);this._modules.set(e,t)}get(e){return this._modules.get(e)}has(e){return this._modules.has(e)}delete(e){this._modules.delete(e)}getAlias(e){const t=this.get(e);return t?.defaultAlias}clear(){this._modules.clear()}static class(e){let{token:i,factory:a,dependencies:o=[],injectionMode:d=s.SINGLETON,defaultAlias:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Class must be provided");if(!i)throw new Error("Token must be provided");t({dependencies:o,name:e.name}),r.instance.set(i,{factory:a||(t=>{let{dependencies:n}=t;return new e(n)}),dependencies:o,injectionMode:d,defaultAlias:l||n(i),type:"classModule"})}static object(){let{token:e,value:i,factory:a,dependencies:o,injectionMode:d=s.SINGLETON,defaultAlias:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)throw new Error("Token must be provided");if(!i&&!a)throw new Error("Value or factory must be provided");t({dependencies:o,name:e}),r.instance.set(e,{value:i,factory:a,dependencies:o,injectionMode:d,defaultAlias:l||n(e),type:"object"})}static function(e){let{token:i,dependencies:s,defaultAlias:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Function must be provided");if(!i)throw new Error("Token must be provided");t({dependencies:s,name:i}),r.instance.set(i,{dependencies:s,defaultAlias:a||n(i),func:e,type:"function"})}}class a{constructor(e){this._moduleRegistry=e,this._moduleInstances=new Map}static get instance(){return this._instance||(this._instance=new a(r.instance)),this._instance}set(e,t){this._moduleInstances.set(e,t)}clear(){this._moduleInstances.clear()}get(e){return this._moduleInstances.get(e)}delete(e){this._moduleInstances.delete(e)}async call(e){const t=this._moduleRegistry.get(e);if(!t)throw new Error(`Module with token "${e}" does not exist`);const{dependencies:n,type:i,func:s}=t;if("function"!==i)throw new Error(`Module with token "${e}" is not a function type`);const r=await this._resolveDependencies({token:e,dependencies:n});for(var a=arguments.length,o=new Array(a>1?a-1:0),d=1;d<a;d++)o[d-1]=arguments[d];return s(r,...o)}async resolve(e,t){return this._resolve({token:e,optional:t})}has(e){return this._moduleInstances.has(e)}async _resolve(e){let{token:t,resolvedDeps:n=new Set,parentToken:i,optional:r}=e;if(!this._moduleRegistry.has(t)){if(r)return null;throw new Error(`${[...n,t].join(" -> ")}. Module with token "${t}" does not exist`)}const a=this._moduleRegistry.get(t),{dependencies:o=[],factory:d,value:l,func:c,injectionMode:u=s.SINGLETON}=a;if(i&&u===s.FOR_FEATURE&&(t=`${i}:${t}`),this.has(t))return this.get(t);if(n.has(t))throw new Error(`Circular dependency detected: ${Array.from(n).join(" -> ")} -> ${t}`);n.add(t);const f=this._resolveDependencies({token:t,dependencies:o,resolvedDeps:n}).then((e=>this._createInstance({token:t,dependencies:e,container:this,factory:d,value:l,func:c})));return this.set(t,f),f.then&&f.then((e=>{this.set(t,e)})),f}async _resolveDependencies(e){let{token:t,dependencies:n,resolvedDeps:i}=e,s=[];return n.length&&(s=await Promise.all(n.map((async e=>{const{token:n,alias:s,optional:r}=this._getDependencyObject(e),a=await this._resolve({token:n,resolvedDeps:new Set(i),parentToken:t,optional:r}),o=this._moduleRegistry.getAlias(n);return[s||o||n,a]})))),Object.fromEntries(s)}_getDependencyObject(e){return"string"==typeof e?{token:e}:e}_createInstance(e){let{dependencies:t,container:n,factory:i,value:s,token:r,func:a}=e;if(void 0!==s)return s;if(void 0!==a)return a.bind(null,t);if(!(i instanceof Function))throw new Error(`Container Error: ${r}. Factory must be a function`);const o=i({dependencies:t,container:n});if(!(o instanceof Object))throw new Error(`Container Error: ${r}. Factory must return an object`);return o}}function o(e,t){return t.reduce(((t,n)=>(void 0!==e[n]&&(t[n]=e[n]),t)),{})}const d=e=>null==e,l={DYNAMIC_AD_OPTIONS:"dynamicAdOptions",DYNAMIC_AD_OPTIONS_V2:"dynamicAdOptionsV2",PUSHDOWN_OPTIONS:"pushdownOptions",SIDE_WALL_OPTIONS:"sideWallOptions",SLIDING_UNIT_OPTIONS:"slidingUnitOptions",STICKY_AD_OPTIONS:"stickyAdOptions",STICKY_FOOTER_OPTIONS:"stickyFooterOptions"},c="StickyFooter,SideWall,Video,SlidingUnit,StickyAd,Pushdown,StickyRail,DynamicAds,Interstitial,Superflex,Carousel,InImage",u=()=>c.includes("ALL_POSSIBLE_MODULES")?[]:c.split(",").map((e=>e.trim())),f=e=>{let{placement:t,type:n}=e,i=t&&t[n]&&null!=t[n].active&&!1!==t[n].active;return!(i||!(n===l.DYNAMIC_AD_OPTIONS_V2&&t[n].dynamicAd2||n===l.PUSHDOWN_OPTIONS&&t[n].isPushdownUnit||n===l.SIDE_WALL_OPTIONS&&0!==t[n].type||n===l.STICKY_AD_OPTIONS&&t[n].stickyAdEnabled||n===l.STICKY_FOOTER_OPTIONS&&Object.keys(t[n]).length>0&&!1!==t[n].active))||i},h=e=>{let{placement:t,type:n}=e;return f({placement:t,type:n})?t[n]:{}};const p=e=>{let{domSelector:t}=e;return document.querySelector(t)};function m(e){let{placement:t}=e;if(function(){const{removeFooter:e,specialAdhesionRemoved:t,customFooter:n}=freestar.fsdata;if(e||t||n){const e=["#fs-select-footer-remove","#fs-special-remove"];for(let t=0;t<e.length;t++)if(p({domSelector:e[t]}))return!0}return!1}())return!0;const{remove:n,adhesionRemove:i,add:s}=h({placement:t,type:l.STICKY_FOOTER_OPTIONS});return!(!n||!p({domSelector:n}))||(!(!i||!p({domSelector:i}))||!(!s||document.getElementById("fs-select-footer")))}const g="freestar.com",b="https://a.pub.network/core",y=[{siteId:285,restrictedCountries:["IN","VN","NP","DZ","IQ","MA","AF","TR","EG","PK","ID","MA","BD","RS","PH","TN","BG"]}],v=["triplelift"],w=["revolvingRail","slidingUnit","superflex","interstitial","stickyRail"],I=[[468,60],[728,90],[970,90],[970,250],[300,50],[300,100],[320,50],[320,100],[120,600],[160,600],[300,250],[300,600],[336,280],[1,1],[0,0]],_="15184186",S="1966186",E={v1:[{precision:2,min:0,max:20,increment:.01},{precision:2,min:20,max:40,increment:.5},{precision:2,min:40,max:100,increment:1},{precision:2,min:100,max:150,increment:2.5},{precision:2,min:150,max:250,increment:5},{precision:2,min:250,max:400,increment:10},{precision:2,min:400,max:800,increment:50}],v2:[{precision:2,min:0,max:2,increment:.01},{precision:2,min:2,max:10,increment:.05},{precision:2,min:10,max:20,increment:.5},{precision:2,min:20,max:100,increment:5}]},A=["AT","BE","BG","HR","CY","CZ","DK","EE","EL","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB","NO","IS","LI","CH"],k=["CA","CT","CO","VA","UT"],x=[285],T={gumgum:'[id^="ad_is"]',thirtyThreeAcross:'[class^="ttx-lb"]',undertone:".ut_container",kargo:'[class^="kargo-ad"]',yieldmo:'[class^="ym-adhesion"]'},C="dianomi_context_script",R=["sortable"],O="FREESTAR",P="NONE",N="00000000-0000-0000-0000-000000000000",D=[371,864,1596,1616,1617,1618,1624,1626,1627,1628,1629,1630,1631,1632,1637,1638,1639,1640,1641,1642,1643,1644,1650,1657,1701,1706,1719,1733,1734,1735,1758,1761,1767,1773,1782,1785,1787,1797,1805,1806,1808,1810,1811,1812,1820,1822,1827,1828,1837,1841,1849,1855,1863,1868,1877,1878,1879,1880,1881,1891,1894,1900,1901,1903,1910,1984,1994,1995,1996,2005,2019,2035,2036,2075,2076,2080,2082,2085,2098,2103,2108,2112,2123,2127,2132,2133,2136,2142,2149,2172,2178,2180,2181,2183,2190,2192,2193,2194,2195,2196,2197,2198,2199,2203,2204,2208,2209,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,2222,2223,2224,2225,2231,2241,2244,2249,2255,2260,2261,2266,2269,2270,2283,2286,2290,2291,2304,2312,2313,2318,2321,2324,2337,2339,2342,2345,2351,2352,2353,2354,2355,2356,2357,2358,2359,2360,2361,2362,2363,2364,2365,2366,2367,2389,2390,2391,2394,2395,2396,2397,2398,2399,2400,2401,2402,2403,2404,2405,2428,2438,2443,2444,2447,2451,2467,2473,2481,2494,2495,2497,2510,2512,2513,2515,2521,2525,2534,2536,2539,2540,2541,2544,2546,2547,2549,2564,2572,2573,2602,2611,2612,2616,2635,2641,3065,3067,3090,3095,3103,3104,3116,3117,3119,3120,3122,3126,3127,3148,3188,3189,3190,3224,3225,3226,3227,3229,3320,3321,3494,3496,3497,3499,3517,3522,3533,3539,3540,3541,3542,3543,3544,3545,3546,3547,3548,3549,3550,3551,3552,3553,3554,3556,3557,3559,3560,3561,3562,3563,3565,3567,3568,3569,3570,3571,3572,3573,3574,3575,3576,3577,3578,3579,3580,3581,3582,3583,3584,3585,3586,3587,3588,3589,3590,3591,3592,3593,3594,3595,3596,3597,3598,3599,3600,3601,3602,3603,3604,3605,3606,3607,3609,3610,3612,3613,3614,3615,3617,3618,3619,3620,3621,3622,3623,3625,3626,3628,3630,3631,3632,3633,3634,3635,3636,3637,3639,3640,3641,3642,3643,3644,3645,3646,3647,3648,3649,3650,3651,3652,3653,3654,3655,3656,3657,3658,3659,3660,3661,3662,3663,3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3674,3675,3676,3677,3678,3679,3680,3681,3682,3683,3684,3685,3686,3687,3688,3689,3690,3691,3692,3693,5273,5274,5275,5276,5283,5284,5286,5288,5289,5290,5291,5297,5302,5305,5343,5351,5360,5363,5364,5370,5372,5374,5375,5382,5387,5388,5389,5390,5394,5419,5432,5443,5460,5520,5623,5634,5658,5823,5846,5847,5851,5875,5884,5893,5917,5918,5919,5920,5921,5922,5946,5949,5954,5955,5957,5963,5983,5988,5991,5994,6013,6017,6021,6022,6031,6034,6045,6046,6052,6067,6068,6082,6083,6086,6091,6093,6097,6101,6108,2484,5499,1655,2167,2257,2433,2434,2435,2483,2548,2550,2566,2610,2614,2615,3121,3125,3230,3611,5287,5330,5362,5365,5368,5369,5376,5385,5386,5442,5472,5475,5504].concat([2,120,128,159,5292]),L=["BD","DZ","MM","NI","CM","MR","GN","CG","CN","ET","SS","PK","TN","PS","AO","BJ","VE","HT","TG","MG","SO","GM","KH","YE","IR","RU","SD","VG","TJ","SM","GL","BQ","TL","AX","MF","MH","MP","TD","VU","WS","BI","SY","DJ","NE","AS","AI","GQ","CU","PM","SB","PW","FM","YT","TO","CK","ER","MS","UM","GW","BL","NR","KM","KI","FK","CC","CF","TM","WF","ST","IO","TV","NF","SH","VA","EH","KP","NU","AQ","TK","CX","SJ","PN"],M="amazon";const B=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return new URLSearchParams(t.location?.search).get(e)??""};function F(e){let{value:t}=e;return t&&Array.isArray(t)&&t.length>0}function U(e){return e===!!e}function $(e){return"number"==typeof e}function z(e){return"string"==typeof e}function q(e,t){const n="function"==typeof t?t:e=>e[t];return[...e.reduce(((e,t)=>{const i=null==t?t:n(t);return e.has(i)||e.set(i,t),e}),new Map).values()]}const j=function(e,t,n){if(!t)return;const i=(Array.isArray(t)?t:t.match(/([^[.\]])+/g)).reduce(((e,t)=>e&&e[t]),e);return void 0===i?n:i};function V(e,t){const n=Math.max(...e.map(t));return e.find((e=>t(e)===n))}function H(e,t){const n=[],i=e.filter(((e,i)=>t(e)&&n.push(i)));return n.reverse().forEach((t=>e.splice(t,1))),i}function G(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function W(e,t){let n=G(e);return n===G(t)&&("array"===n?function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!W(e[n],t[n]))return!1;return!0}(e,t):"object"===n?function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!W(e[n],t[n]))return!1;return!0}(e,t):"function"===n?function(e,t){return e.toString()===t.toString()}(e,t):function(e,t){return e===t}(e,t))}function Y(e){return e instanceof Object}function Q(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e}(e))return NaN;if(Y(e)){const t="function"==typeof e.valueOf?e.valueOf():e;e=Y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(/^\s+|\s+$/g,"");const t=/^0b[01]+$/i.test(e);return t||/^0o[0-7]+$/i.test(e)?parseInt(e.slice(2),t?2:8):/^[-+]0x[0-9a-f]+$/i.test(e)?NaN:+e}function K(e){return[...new Set(e.map((e=>JSON.stringify(e))))].map((e=>JSON.parse(e)))}function J(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.freestar.locData;return!!e&&("US"===e.iso&&k.includes(e.state))}function X(e,t){let n=t&&t[e]||"";try{return JSON.parse(n)}catch(e){return n||""}}function Z(e,t){let n=null;return function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];const a=this;clearTimeout(n),n=setTimeout((()=>e.apply(a,s)),t)}}function ee(){let e={},t=!1,n=0,i=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],n++);let s=function(n){for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t&&"[object Object]"===Object.prototype.toString.call(n[i])?e[i]=ee(!0,e[i],n[i]):e[i]=n[i])};for(;n<i;n++)s(arguments[n]);return e}function te(e){const{name:t,detail:n}=e,i=new CustomEvent(t,{detail:n});window.dispatchEvent(i)}var ne=Function.prototype.toString,ie=Object.create,se=Object.prototype.toString,re=function(){function e(){this._keys=[],this._values=[]}return e.prototype.has=function(e){return!!~this._keys.indexOf(e)},e.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},e.prototype.set=function(e,t){this._keys.push(e),this._values.push(t)},e}();var ae="undefined"!=typeof WeakMap?function(){return new WeakMap}:function(){return new re};function oe(e){if(!e)return ie(null);var t=e.constructor;if(t===Object)return e===Object.prototype?{}:ie(e);if(~ne.call(t).indexOf("[native code]"))try{return new t}catch(e){}return ie(e)}var de="g"===/test/g.flags?function(e){return e.flags}:function(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function le(e){var t=se.call(e);return t.substring(8,t.length-1)}var ce="undefined"!=typeof Symbol?function(e){return e[Symbol.toStringTag]||le(e)}:le,ue=Object.defineProperty,fe=Object.getOwnPropertyDescriptor,he=Object.getOwnPropertyNames,pe=Object.getOwnPropertySymbols,me=Object.prototype,ge=me.hasOwnProperty,be=me.propertyIsEnumerable,ye="function"==typeof pe;var ve=ye?function(e){return he(e).concat(pe(e))}:he;function we(e,t,n){for(var i=ve(e),s=0,r=i.length,a=void 0,o=void 0;s<r;++s)if("callee"!==(a=i[s])&&"caller"!==a)if(o=fe(e,a)){o.get||o.set||(o.value=n.copier(o.value,n));try{ue(t,a,o)}catch(e){t[a]=o.value}}else t[a]=n.copier(e[a],n);return t}function Ie(e,t){return e.slice(0)}function _e(e,t){var n=new t.Constructor;return t.cache.set(e,n),e.forEach((function(e,i){n.set(i,t.copier(e,t))})),n}var Se=ye?function(e,t){var n=oe(t.prototype);for(var i in t.cache.set(e,n),e)ge.call(e,i)&&(n[i]=t.copier(e[i],t));for(var s=pe(e),r=0,a=s.length,o=void 0;r<a;++r)o=s[r],be.call(e,o)&&(n[o]=t.copier(e[o],t));return n}:function(e,t){var n=oe(t.prototype);for(var i in t.cache.set(e,n),e)ge.call(e,i)&&(n[i]=t.copier(e[i],t));return n};function Ee(e,t){return new t.Constructor(e.valueOf())}function Ae(e,t){return e}function ke(e,t){var n=new t.Constructor;return t.cache.set(e,n),e.forEach((function(e){n.add(t.copier(e,t))})),n}var xe=Array.isArray,Te=Object.assign,Ce=Object.getPrototypeOf||function(e){return e.__proto__},Re={array:function(e,t){var n=new t.Constructor;t.cache.set(e,n);for(var i=0,s=e.length;i<s;++i)n[i]=t.copier(e[i],t);return n},arrayBuffer:Ie,blob:function(e,t){return e.slice(0,e.size,e.type)},dataView:function(e,t){return new t.Constructor(Ie(e.buffer))},date:function(e,t){return new t.Constructor(e.getTime())},error:Ae,map:_e,object:Se,regExp:function(e,t){var n=new t.Constructor(e.source,de(e));return n.lastIndex=e.lastIndex,n},set:ke},Oe=Te({},Re,{array:function(e,t){var n=new t.Constructor;return t.cache.set(e,n),we(e,n,t)},map:function(e,t){return we(e,_e(e,t),t)},object:function(e,t){var n=oe(t.prototype);return t.cache.set(e,n),we(e,n,t)},set:function(e,t){return we(e,ke(e,t),t)}});function Pe(e){var t=function(e){return{Arguments:e.object,Array:e.array,ArrayBuffer:e.arrayBuffer,Blob:e.blob,Boolean:Ee,DataView:e.dataView,Date:e.date,Error:e.error,Float32Array:e.arrayBuffer,Float64Array:e.arrayBuffer,Int8Array:e.arrayBuffer,Int16Array:e.arrayBuffer,Int32Array:e.arrayBuffer,Map:e.map,Number:Ee,Object:e.object,Promise:Ae,RegExp:e.regExp,Set:e.set,String:Ee,WeakMap:Ae,WeakSet:Ae,Uint8Array:e.arrayBuffer,Uint8ClampedArray:e.arrayBuffer,Uint16Array:e.arrayBuffer,Uint32Array:e.arrayBuffer,Uint64Array:e.arrayBuffer}}(Te({},Re,e)),n=t.Array,i=t.Object;function s(e,s){if(s.prototype=s.Constructor=void 0,!e||"object"!=typeof e)return e;if(s.cache.has(e))return s.cache.get(e);if(s.prototype=Ce(e),s.Constructor=s.prototype&&s.prototype.constructor,!s.Constructor||s.Constructor===Object)return i(e,s);if(xe(e))return n(e,s);var r=t[ce(e)];return r?r(e,s):"function"==typeof e.then?e:i(e,s)}return function(e){return s(e,{Constructor:void 0,cache:ae(),copier:s,prototype:void 0})}}Pe(Te({},Oe,{}));var Ne=Pe({});const De=["click","scroll"],Le={},Me=()=>void 0!==window.freestar.config.pageSpeedOptimized?window.freestar.config.pageSpeedOptimized:window.freestar.fsdata.pageSpeedOptimized,Be=()=>{De.forEach((e=>document.removeEventListener(e,Be)))},Fe=e=>{let{name:t,callback:n}=e;Le[t].waiting&&!Le[t].called&&(Le[t].called=!0,Be(),n())},Ue=e=>{let{name:t,callback:n}=e;Object.prototype.hasOwnProperty.call(Le,t)||(Le[t]={waiting:!0},De.forEach((e=>document.addEventListener(e,Fe.bind(null,{name:t,callback:n}),{once:!0}))))},$e={string:{type:"string",default:""},array:{type:"array",default:[]},object:{type:"object",default:{}},number:{type:"number",default:void 0}};function ze(e){let{key:t,type:n=$e.string.type}=e;const i=sessionStorage.getItem(t);if(n===$e.object.type){if(i){const e=JSON.parse(i);if(Y(e))return e}return $e.object.default}if(n===$e.array.type){if(i){const e=JSON.parse(i);if(Array.isArray(e))return e}return $e.array.default}if(n===$e.number.type){const e=Number(i);return Number.isInteger(e)?e:$e.number.default}return i}function qe(e){let{key:t,type:n=$e.string,value:i}=e;i&&(n!==$e.object&&n!==$e.array||(i=JSON.stringify(i)),sessionStorage.setItem(t,i))}function je(e){let{key:t}=e;sessionStorage.removeItem(t)}const Ve="desktop",He="mobile",Ge="tablet",We="fs.exclude.bidders",Ye={key:We,type:$e.array.type};function Qe(){if(freestar.fsdata.adQualityOptions.vendor)return freestar.deviceInfo.device.type===Ve&&freestar.fsdata.adQualityOptions.desktopEnabled||freestar.fsdata.adQualityOptions.mobileEnabled?freestar.fsdata.adQualityOptions.vendor:null;switch(freestar.deviceInfo.device.type){case Ve:return freestar.fsdata.adQualityDesktopVendor;case He:return freestar.fsdata.adQualityMobileVendor;default:return null}}function Ke(){return ze(Ye)}function Je(e){let{network:t,adQualityBlockList:n}=e;return!F({value:n})||!n.includes(t.slug)}const Xe="FsClientAux",Ze={},et={};function tt(e){const t=nt(e);if(!Ze[t]){const e=`${t}${Xe}`;Ze[t]=e,et[e]=t,fsprebid.que.push((()=>{fsprebid.aliasBidder(t,e)}))}return Ze[t]}function nt(e){return et[e]||e}function it(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}var st=function e(t,n){function i(e,i,s){if("undefined"!=typeof document){"number"==typeof(s=it({},n,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var a in s)s[a]&&(r+="; "+a,!0!==s[a]&&(r+="="+s[a].split(";")[0]));return document.cookie=e+"="+t.write(i,e)+r}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],i={},s=0;s<n.length;s++){var r=n[s].split("="),a=r.slice(1).join("=");try{var o=decodeURIComponent(r[0]);if(i[o]=t.read(a,o),e===o)break}catch(e){}}return e?i[e]:i}},remove:function(e,t){i(e,"",it({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,it({},this.attributes,t))},withConverter:function(t){return e(it({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function rt(e){let{name:t,value:n,expires:i,path:s,domain:r}=e;if(!t||!n)return!1;const a={secure:!0};return i&&(a.expires=i),s&&(a.path=s),r&&(a.domain=r),st.set(t,n,a),at({name:t})}function at(e){let{name:t}=e;return st.get(t)}const ot=e=>{let t=Number(sessionStorage.getItem(e)||0);return sessionStorage.setItem(e,++t),t};function dt(){return freestar.msg.pageviewCount=ot("pageviews")}const lt="fsaltconfig",ct="fsdebug";let ut=B(ct);ut&&"true"!==ut&&!Number.isInteger(+ut)&&ut.split(",").map((e=>e.toUpperCase()));const ft=()=>{const e=fsprebid.getBidResponses(),t=fsprebid.getAllWinningBids(),n=[];Object.keys(e).forEach((function(i){e[i].bids.forEach((function(e){n.push({bid:e,adunit:i,adId:e.adId,bidder:e.bidder,time:e.timeToRespond,dims:`${e.width}x${e.height}`,cpm:e.cpm,msg:e.status,rendered:!!t.find((function(t){return t.adId==e.adId}))})}))}))},ht={title:"Pubfig"};class pt{constructor(){this.logs=[]}add(e){this.logs.push(e)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht;if(!freestar.log)return;if(0===this.logs.length)return;let t=this.logs;this.logs=[],freestar.log(e,`\n${t.join("\n")}`)}}function mt(e){let{key:t}=e;const n=ze({key:t,type:$e.object.type});if(n){const{value:e,expiry:i}=n;if(i&&!(i<Date.now()))return e;je({key:t})}return null}function gt(e){let{key:t,value:n,expiry:i}=e;qe({key:t,type:$e.object,value:{value:n,expiry:i}})}const bt="fs.session";const yt=new class{constructor(){this.cdep=!!freestar.cdep;const e=JSON.parse(ze({key:bt}));this.known=Number(e?.known??0)}_update(e){this.known=e;const t=JSON.parse(ze({key:bt}));if(t?.known!==this.known){const e=Object.assign({},t,{known:this.known});qe({key:bt,type:$e.object,value:e})}}get isKnownByPrebidUser(){return!(!window.fsprebid?.getUserIds||!Object.keys(window.fsprebid.getUserIds()).length)}get isCDEPUser(){return this.cdep}get _isKnown(){return Number(!this.isCDEPUser&&this.isKnownByPrebidUser)}get isKnown(){return this._update(this._isKnown),this.known}};class vt{static createInstance(e){let{ClassConstructor:t,instanceName:n,params:i=[]}=e;if(window.freestar=window.freestar||{},window.freestar.instances=window.freestar.instances||{},window.freestar.instances[n])return window.freestar.instances[n];const s=new t(...i);return window.freestar.instances[n]=s,s}static getInstanceFn(e){let{ClassConstructor:t,instanceName:n,params:i=[]}=e;return()=>this.createInstance({ClassConstructor:t,instanceName:n,params:i})}}const wt=vt.getInstanceFn({ClassConstructor:class{constructor(){this.results={},this.ongoingRequests=new Map}clearClassCachedData(e){let{requestId:t}=e;Object.prototype.hasOwnProperty.call(this.results,t)&&delete this.results[t]}async fetch(e){let{fetchFn:t,requestId:n,onError:i,onSuccess:s}=e;if(this.results[n])return this.results[n];if(!this.ongoingRequests.has(n)){const e=t().then((e=>{const t={data:e,error:null};return this.results[n]=t,s&&s(e),t}),(e=>{const t={data:null,error:e};return this.results[n]=t,i&&i(e),t}));this.ongoingRequests.set(n,e)}return this.ongoingRequests.get(n).finally((()=>{this.ongoingRequests.delete(n)}))}get(e){let{requestId:t}=e;return this.results[t]}},instanceName:"requestHandler"}),It="4e799501-b8b6-4ef1-bad5-225b3dd1aa8d",_t="fs.idealadstack.config",St="session storage",Et="network request",At=Object.freeze({CLIENT:"client",SERVER:"server",BOTH:"both"});function kt(){return window.freestar.fsdata.domain||location.host}function xt(e){return e.interstitialOptions&&e.interstitialOptions.active&&"GOOGLE_INTERSTITIAL"===e.interstitialOptions.type}function Tt(e){let{event:t}=e;return window.freestar.googleInterstitialPlacement&&t.slot.getSlotElementId().includes(window.freestar.googleInterstitialPlacement.placement.dfpId)}const Ct=new Set([1542,6010,5958,5891]),Rt=new Set([533]);function Ot(e){let{siteId:t,placement:n}=e;return Pt({siteId:t})||Rt.has(t)&&xt(n)}function Pt(e){let{siteId:t}=e;return Ct.has(t)}const Nt=async()=>{const e=window.freestar?.fsdata?.isTriple13Enabled,t=e?"0":"1",n=freestar.locData?freestar.locData.iso:"";let i=await fetch(`https://optimise.net/?k=${yt.isKnown}&d=${kt()}&t=${(()=>{if(window.freestar)return"Apple"===window.freestar.deviceInfo.device.vendor?"smartphone-ios":window.freestar.deviceInfo.device.type})()}&c=${n}${B("fsiasdebug")?"&g=experiment":""}&r=1`,{method:"GET",credentials:"include",...!Pt({siteId:freestar.fsdata.siteId})&&{headers:{"x-api-key":It,"x-lm":t}}});const s=i.headers;i=await i.text(),i=JSON.parse(i);const{testGroup:r,knownUser:a}=i;return{data:{testGroup:r,knownUser:a,roundTripTime:s.get("fs-client-rtt"),...i.config},source:Et}},Dt=async()=>{let e;const t=mt({key:_t});return e=t?{data:t,source:St}:await Nt(),e},Lt=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.document).querySelectorAll('script[src*="pubfig.min.js"]'),t=Array.from(e).find((e=>!e.src.includes("/core/")));return t?t.src.split("https://a.pub.network/")[1]?.split("/")[0]:"freestar-com"},Mt="https://c.pub.network";Lt();const Bt="fs.abtest.group",Ft="slotRenderEnded",Ut="slotRequested",$t="auctionInit",zt="auctionEnd",qt="bidResponse",jt="bidWon",Vt="nativeRenderStickyFooter",Ht={ANALYTICS:"Analytics",PERFORMANCE_LOGGER:"PerformanceLogger",DISPENSARY_DATA:"DispensaryData",LOGGER:"Logger",EVENT_BUS:"EventBus",CONFIG_MANAGER:"ConfigManager",FREESTAR:"freestar",WINDOW:"window",PAGE:"Page",SESSION_STORAGE_MANAGER:"SessionStorageManager",PREBID_MANAGER:"PrebidManager",GAM_MANAGER:"GamManager",DEVICE_INFO:"deviceInfo",FS_DATA:"fsdata",BID_RESPONSE_ANALYTICS_EVENT_FACTORY:"BidResponseAnalyticsEventFactory",BID_WON_ANALYTICS_EVENT_FACTORY:"BidWonAnalyticsEventFactory",ANALYTICS_EVENT_FACTORY:"AnalyticsEventFactory",MAIN_QUEUE:"MainQueue",ERROR_QUEUE:"ErrorQueue",IMMEDIATE_QUEUE:"ImmediateQueue",BEACON_QUEUE:"BeaconQueue",ANALYTICS_MESSAGE_FACTORY:"AnalyticsMessageFactory",DATA_COLLECTOR_API:"DataCollectorAPI",VIDEO:"Video",FOP_VIDEO_MANAGER:"FopVideoManager",AUCTION_MANAGER:"AuctionManager",NATIVE_RENDER_MANAGER:"nativeRenderManager",CONFIANT:"Confiant"};r.object({token:Ht.WINDOW,value:window}),r.object({token:Ht.FREESTAR,dependencies:[Ht.WINDOW],factory:e=>{let{dependencies:{window:t}}=e;return t.freestar??{}}}),r.object({token:Ht.FS_DATA,dependencies:[Ht.FREESTAR],factory:e=>{let{dependencies:t}=e;return t.freestar?.fsdata??{}}}),r.object({token:Ht.DEVICE_INFO,dependencies:[Ht.FREESTAR],factory:e=>{let{dependencies:t}=e;return t.freestar?.deviceInfo??{}}}),r.object({token:Ht.PAGE,defaultAlias:"page",dependencies:[Ht.FREESTAR],factory:e=>{let{dependencies:t}=e;const{freestar:n}=t;return{get pageId(){return n.msg?.pageId},get url(){return n.url},get pageViewCount(){return n.msg?.pageviewCount}}}}),r.object({token:Ht.PERFORMANCE_LOGGER,dependencies:[Ht.FREESTAR],factory:e=>{let{dependencies:t}=e;const{freestar:n}=t;return n.performanceLogger}}),r.object({token:Ht.PREBID_MANAGER,dependencies:[{token:Ht.WINDOW,alias:"win"}],factory:e=>{let t,{dependencies:n}=e;const i=new Promise((e=>{t=e}));return n.win.fsprebid=n.win.fsprebid??{},n.win.fsprebid.que=n.win.fsprebid.que??[],n.win.fsprebid.que.push((()=>{t()})),{get instance(){return n.win.fsprebid},get ready(){return i}}}}),r.object({token:Ht.GAM_MANAGER,dependencies:[{token:Ht.WINDOW,alias:"win"}],factory:e=>{let t,{dependencies:n}=e;const i=new Promise((e=>{t=e}));return n.win.googletag.cmd.push((()=>{t()})),{get instance(){return n.win.googletag},get ready(){return i}}}});class Gt{_events=[];constructor(e){let{context:t,events:n=[]}=e;this._context=t,n.forEach((e=>this.addEvent(e)))}addEvent(e){this._events.push(e)}getJSON(){const e=this._events.reduce(((e,t)=>(e[t.type]??=[],e[t.type].push(t.payload),e)),{});return{...this._context,...e}}get size(){return this._events.length}}const Wt="fs.session";r.class(class{constructor(){this.session=null,this._init()}_init(){this.session=ze({key:Wt,type:$e.object.type}),this.session&&Object.keys(this.session).length||(this.session={id:Yr()});const e=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].flatMap((e=>{const t=B(e);return t?{key:e,value:t}:[]})).reduce(((e,t)=>{let{key:n,value:i}=t;return e[n]=i,e}),{});this.session.utm=e,qe({key:Wt,type:$e.object,value:this.session})}getSessionId(){return this.session.id}getUTMValue(e){return this.session.utm?.[e]}},{token:Ht.SESSION_STORAGE_MANAGER,defaultAlias:"sessionStorageManager"});r.class(class{constructor(e){let{page:t,sessionStorageManager:n,dispensaryData:i}=e;this._page=t,this._sessionStorageManager=n,this._dispensaryData=i}create(e){let{events:t=[]}=e;const n=this._collectContextInfo();return new Gt({context:n,events:t})}_collectContextInfo(){const{pageId:e,pageViewCount:t,url:n}=this._page||{};return{messageId:Yr(),referalURL:document.referrer||void 0,pageId:e,url:n,userAgent:navigator.userAgent,pageviewCount:t,...this._getDispensaryData(),...this._getTestData(),...this._getSessionData()}}_getSessionData(){return{...Object.fromEntries([["utmSource","utm_source"],["utmMedium","utm_medium"],["utmCampaign","utm_campaign"],["utmTerm","utm_term"],["utmContent","utm_content"]].map((e=>{let[t,n]=e;return[t,this._sessionStorageManager.getUTMValue(n)]}))),sessionId:this._sessionStorageManager.getSessionId()}}_getTestData(){const e=ze({key:Bt,type:$e.number.type})||0;return{testName:ze({key:"fs.abtest.id"})||null,testGroup:e,testVariantId:ze({key:"fs.abtest.variant_type"})||null}}_getDispensaryData(){return Object.fromEntries(["accountId","siteId","deploymentId","templateVersionId"].map((e=>[e,this._dispensaryData.getValue(e)])))}},{token:Ht.ANALYTICS_MESSAGE_FACTORY,defaultAlias:"analyticsMessageFactory",dependencies:[Ht.PAGE,Ht.SESSION_STORAGE_MANAGER,Ht.DISPENSARY_DATA]});const Yt=500,Qt=30,Kt="immediate",Jt="main",Xt="beacon",Zt="error";class en extends Error{constructor(e){let{message:t,details:n,context:i}=e;super(t),this.details=n,this.context=i}}r.class(class{constructor(){let{logger:e,apiHost:t=Mt,version:n="v2"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.apiHost=t,this.version=n,this.url=`${this.apiHost}/${this.version}/c`,this._logger=e,this._logger.setContext(Ht.DATA_COLLECTOR_API),this._logger.setLevel(80)}async send(e){if(e){this._logger.log(["Sending data to collector",e]);try{const t=await fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(t?.ok)return;throw t}catch(t){const n={status:t?.status?.toString(),statusText:t?.statusText};let i="Data Collector API Error: ";throw i+=t?.status?`Status: ${t?.status} ${t?.statusText}`:`Status: ${t.message}`,new en({message:i,details:n,context:e})}}}sendBeacon(e){const t=new Blob([JSON.stringify(e)],{type:"application/json"});if(!navigator.sendBeacon(this.url,t)){const t={status:"0",statusText:"Failed to send via sendBeacon"},n="Data Collector API Error: sendBeacon failed to send the data.";throw this._logger.warning([n,t]),new en({message:n,details:t,context:e})}}},{token:Ht.DATA_COLLECTOR_API,dependencies:[Ht.LOGGER],defaultAlias:"dataCollectorAPI"});class tn{type="default";constructor(e,t){this._payload=this._buildPayload(e),this._topic=t}get payload(){return this._payload}get topic(){return this._topic||Jt}setTopic(e){this._topic=e}setType(e){this.type=e}_buildPayload(e){return e||{}}}class nn extends tn{type="customEvent";_buildPayload(e){const{eventType:t,data:n,eventName:i}=e;return{eventType:t,eventName:i,jsonValue:JSON.stringify(n)}}}class sn extends tn{type="contentRecommendationPartnerImpression";get payload(){const{partnerName:e,placementName:t,contextId:n}=this._payload;return{eventType:"contentRecommendationPartnerImpression",partnerName:e,placementName:t,contextId:n}}}class rn extends tn{type="auctionStart";static payloadProperties=["placementId","DfpId","fsAuctionId","auctionId","auctionType","location","userIds","kvps"];_buildPayload(e){return o(e,rn.payloadProperties)}}class an extends tn{type="auctionEnd";static payloadProperties=[...rn.payloadProperties,"fsAuctionId","winningBid","advertiserId","campaignId","isEmpty","lineItemId","serviceName","size","sourceAgnosticCreativeId","sourceAgnosticLineItemId","isNativeRender","isGamBypass","isS2SDisabled","unfilled"];_buildPayload(e){return o(e,an.payloadProperties)}}class on extends tn{type="browserInformation";static payloadProperties=["canonical","fpc","hitTime","loadTime","winHeight","winWidth","maxHeight","isServerToServer","googleVersion"];_buildPayload(e){return o(e,on.payloadProperties)}}class dn{create(){return new tn}}class ln extends dn{constructor(e){let{win:t,freestar:n,dispensaryData:i}=e;super(),this._win=t,this._freestar=n,this._dispensaryData=i,this._rebidManager=n.rebidManager,this._googletag=this._win.googletag}_getCpm(e){const{cpm:t=0}=e;return{cpm:Math.trunc(1e4*t),bidCpm:t,originalCpm:t}}_getAuctionTimeout(){const{fsdata:e}=this._dispensaryData;return"desktop"==this._freestar.deviceInfo.device.type?e.timeout:e.mobileTimeout}}function cn(e){let{placementName:t,slotId:n}=e;t&&n&&(freestar.dynamicSlotLibrary||(freestar.dynamicSlotLibrary={}),freestar.dynamicSlotLibrary[n]=t)}function un(e){let{slotId:t}=e;function n(){const e=sa({name:t});return e&&e.name?e.name:"unknown"}return t?freestar.dynamicSlotLibrary&&freestar.dynamicSlotLibrary[t]?freestar.dynamicSlotLibrary[t]:(freestar.dynamicSlotLibrary&&freestar.dynamicSlotLibrary[t],n()):"unknown"}function fn(e){let{path:t}=e;return t?window.freestar.dynamicPathLibrary.find((e=>e.path===t)):"unknown"}function hn(e){let{placementName:t,slotId:n,path:i}=e;n&&cn({placementName:t,slotId:n}),i&&function(e){let{placementName:t,path:n}=e;t&&n&&(window.freestar.dynamicPathLibrary||(freestar.dynamicPathLibrary=[]),window.freestar.dynamicPathLibrary.push({placementName:t,path:n}))}({placementName:t,path:i})}function pn(e){let{slotId:t=null,path:n=null}=e;return t?un({slotId:t}):!!n&&fn({path:n})}function mn(e){let{adUnitCode:t,placementId:n,refreshLibrary:i}=e,s=t||n,r=i?.[s];return r||(s=pn({slotId:s}),r=i?.[s]),r?.timesRefreshed||0}function gn(e){let{bid:t,placementId:n,rebidManager:i,fsAuctionId:s,auctionManager:r}=e;const a={isRebid:!1,rebidType:"NONE",rebidAttempt:0};try{const{adUnitCode:e,slotId:o}=t||{},d=n||e||o;if(i){const e=i.getStatus({adUnitCode:d});if(e)return a.isRebid=e.count>0,a.rebidType=e.type||"NONE",a.rebidAttempt=e.count,a}if(s){const e=r.getAuctionByFsAuctionId(s);if(e){const t=Array.from(e.adUnits).find((e=>e.placement.name===d||e.prebid?.code===d||e.slot?.getSlotElementId()===d));if(t){const e=t.getStateByFsAuctionId({fsAuctionId:s});e&&e.rebid&&(a.isRebid=e.rebid.count>0,a.rebidType=e.rebid.type||"NONE",a.rebidAttempt=e.rebid.count)}}}}catch(e){console.error("Error in getRebid function:",e),console.error("Context:",{bid:t,placementId:n,fsAuctionId:s})}return a}function bn(e){let{adUnitCode:t,dynamicSlotLibrary:n}=e;const i=n?.[t];return i||t}function yn(e){let{slotId:t,slot:n,googletag:i}=e;if(!t&&!n)return;const s=i.pubads().getSlots().find((e=>[t,n].includes(e.getSlotElementId())));if(!s)return;return s.getTargeting("fs_uuid").toString()}class vn extends tn{type="bidResponse";static payloadProperties=["bidderCode","width","height","statusMessage","adId","cpm","bidCpm","creativeId","pubapiId","currencyCode","requestId","responseTimestamp","requestTimestamp","bidder","adUnitCode","timeToRespond","adjustment","ttl","format","placementId","source","auctionTimeout","fsRefreshCount","fsRebidCount","auctionId","fsuuid","bidderResponseCode","fsAuctionId","bidCpm"];_buildPayload(e){return o(e,vn.payloadProperties)}}r.class(class extends ln{constructor(e){let{win:t,freestar:n,dispensaryData:i,auctionManager:s}=e;super({win:t,freestar:n,dispensaryData:i}),this._auctionManager=s,this._dispensaryData=i}create(e){const{mediaType:t,currency:n,auctionId:i}=e,s=this._auctionManager.getAuctionByPrebidAuctionId(i),r=s?s.fsAuctionId:null,a=bn({adUnitCode:e.adUnitCode,dynamicSlotLibrary:this._freestar.dynamicSlotLibrary}),{rebidAttempt:o}=gn({bid:e,placementId:a,rebidManager:this._freestar.rebidManager,auctionManager:this._auctionManager});return new vn({...e,...this._getCpm(e),fsRebidCount:o,currencyCode:n,fsuuid:yn({slotId:e.slotId,slot:e.slot,googletag:this._win.googletag}),placementId:a,fsRefreshCount:mn({placementId:a,adUnitCode:e.adUnitCode,refreshLibrary:this._freestar.refreshLibrary}),fsAuctionId:r,auctionTimeout:this._getAuctionTimeout(),format:t.length?t:"unknown"})}},{token:"BidResponseAnalyticsEventFactory",defaultAlias:"bidResponseAnalyticsEventFactory",dependencies:[Ht.FREESTAR,{token:Ht.WINDOW,alias:"win"},Ht.DISPENSARY_DATA,Ht.AUCTION_MANAGER]});class wn{constructor(){this.slug="fsxs2s"}addToPlacementAsBidder(){return{bidder:this.slug,params:{}}}getSlug(){return this.slug}hasTopLevelStoredRequest(){const{topLevelStoredRequestId:e}=window.freestar.fsdata;return e&&e.length}hasImpLevelStoredRequests(){const{placements:e}=window.freestar.fsdata;return e.filter((e=>e.storedRequestId&&e.storedRequestId.length)).length}hasValidStoredRequests(){return this.hasImpLevelStoredRequests()||this.hasTopLevelStoredRequest()}}function In(e){let t={},n=Ne({code:e.name,sizes:e.sizes,mediaTypes:null,bids:e.bidders}),i=es(e);const{battr:s=null}=window.freestar.fsdata.ortb||{};n.ortb2Imp={ext:{data:{fs_ad_product:i}},tagid:e.name,battr:s},e.storedRequestId&&(n.ortb2Imp.ext.prebid={storedrequest:{id:e.storedRequestId}});let r=!1;if(e.sizeMappings.forEach((n=>{!r&&Rr()>=n.viewport.size[0]&&(n.mediaTypes.forEach((i=>{var s;void 0===t[i]&&(t[i]={}),void 0===t[i].sizes&&(t[i].sizes=[]),n.size.forEach((e=>{if(e[0]<35843){if(("banner"===i||"native"===i)&&"302x170, 443x250, 554x312, 640x360".includes(`${e[0]}x${e[1]}`))return;t[i].sizes.push(e)}})),t[i].sizes=(s=t[i].sizes,[...new Set(s)]);const r=I.map((e=>e.join("x")));let o=[];const d=Ke();e.networks&&e.networks.forEach((e=>{Je({network:e,adQualityBlockList:d})&&e.sizes&&e.sizes.forEach((e=>{e.size.forEach((e=>{o.push(e)}))}))}));const l=o.filter((e=>Array.isArray(e))).map((e=>e.join("x"))),c=e.sizes.filter((e=>Array.isArray(e))).map((e=>e.join("x")));if(t[i].sizes=t[i].sizes.filter((e=>{if(-1!==r.indexOf(e.join("x"))||-1!==c.indexOf(e.join("x"))&&-1!==l.indexOf(e.join("x")))return e})),t[i].sizes=t[i].sizes.sort(((e,t)=>e[0]+e[1]<t[0]+t[1]?1:t[0]+t[1]<e[0]+e[1]?-1:0)),"native"===i&&(t[i]=Object.assign(t[i],{type:"image",sendTargetingKeys:!1})),"video"===i){let e=[1,1];t[i].sizes.forEach((t=>{e[0]<t[0]&&(e=t)}));const n=e[0]>=500?[[552,334],[640,360]]:[[300,169],[400,225]];t[i]=Object.assign({},t[i],{api:[2],context:"instream",delivery:2,linearity:2,maxduration:window.freestar.fsdata.adRefreshRate,mimes:["video/mp4","application/javascript","video/webm"],minduration:1,placement:5,playbackmethod:[6],playerSize:n[0],plcmt:4,protocols:[2,3,5,6],size:n,skip:0,useCacheKey:!0,renderer:{render:e=>{a.instance.resolve(Ht.FOP_VIDEO_MANAGER).then((t=>{t.add({params:{bid:e},type:"DISPLAY"})}))},url:"https://a.pub.network/superflex/loader.js"}})}})),r=!0)})),n.mediaTypes=t,!n.bids)return;for(let e=n.bids.length-1;e>=0;e--){if(n.bids[e].dynamicId&&(n.bids[e].params.id=++freestar.dynamicIdNum),n.bids[e].bidder){const t={minViewPort:[0,0],relevantMediaTypes:["banner","native"]},s={minViewPort:[0,0],relevantMediaTypes:["banner","native","video"]};switch(nt(n.bids[e].bidder)){case"zid":n.bids[e].params.adUnitID=Number(n.bids[e].params.adUnitID),n.bids[e].sizeConfig=[t];break;case"appnexus":n.bids[e].params.keywords={fs_ad_product:[i||""]},n.bids[e].sizeConfig=[s];break;case"amazon":n.bids.splice(e,1),n.bids[e].sizeConfig=[t];break;case"onemobile":n.bids[e].params.ext=Object.assign(n.bids[e].params.ext||{},{req:location.href}),n.bids[e].sizeConfig=[t];break;case"ttd":n.bids[e].params.publisherId=freestar.fsdata.companyId,n.bids[e].sizeConfig=[t];break;case"gourmetads":n.bids[e].params.use_pmt_rule&&"true"===n.bids[e].params.use_pmt_rule&&(n.bids[e].params.use_pmt_rule=!0),n.bids[e].params.usePaymentRule&&"true"===n.bids[e].params.usePaymentRule&&(n.bids[e].params.usePaymentRule=!0),n.bids[e].sizeConfig=[t];break;case"resetdigital":Sn()||n.bids.splice(e,1);break;case"fsxs2s":case"pubmatic":case"rubicon":case"ix":case"unruly":case"yieldmo":case"openx":case"yahoo":case"mediagrid":n.bids[e].sizeConfig=[s];break;default:n.bids[e].sizeConfig=[t]}}n.bids[e].size?_n(n.bids[e].size[0],n.mediaTypes.banner.sizes)||n.bids.splice(e,1):n.bids[e].params.size&&(_n(n.bids[e].params.size,n.mediaTypes.banner.sizes)||n.bids.splice(e,1))}const o=new wn;return o.hasValidStoredRequests()&&!e.ignoreSiteBidders&&n.bids.push(o.addToPlacementAsBidder()),n}function _n(e,t){for(let n=0;n<t.length;n++)if(JSON.stringify(e)===JSON.stringify(t[n]))return!0;return!1}function Sn(){const e=window.freestar.locData&&window.freestar.locData.iso||null,t=window.freestar.locData&&window.freestar.locData.state||null;return"US"===e&&!["CA","CO","CT","VA","UT"].includes(t)}function En(e){let{freestar:t}=e;if(t?.prebidAdserverTargetingKeys)return t.prebidAdserverTargetingKeys;const n={},i=t.fsdata.useFsAdserverTargetingKeys||B("use-fs-adserver-targeting-keys")?"fs_":"hb_";return["bidder","adid","pb","size","format","auction_id","source"].forEach((e=>{n[e]=`${i}${e}`})),t.prebidAdserverTargetingKeys=n,n}function An(){if("object"!=typeof window.freestar.fsdata)throw new Error("The fsdata object is not properly defined, exiting...");if(window.freestar.fsdata.onlyAllowedDomains&&window.freestar.fsdata.allowedDomains&&window.freestar.fsdata.allowedDomains.length&&!function(e){let{domains:t}=e,n=0===t.length;return t.forEach((e=>{0===e.indexOf("*.")&&(e=e.slice(2)),n||(n=-1!==top.location.host.indexOf(e))})),!(!n&&fsdata.onlyAllowedDomains)}({domains:window.freestar.fsdata.allowedDomains}))throw new Error("The current domain is not in the allowed domains list, exiting...");if(window.freestar.fsdata.urlBlocklist&&window.freestar.fsdata.urlBlocklist.length&&function(e){const t=/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/,n=e=>{try{return new URL(e),!0}catch(e){return!1}},i=e=>{const n=e.split("/");return t.test(n[0])},{href:s,pathname:r,host:a,search:o}=top.location,d=(e,t)=>e.includes("/*")?s.includes(e.replace("/*","")):t,l=e=>"/"===e[e.length-1]?e.substring(0,e.length-1):e;return e.find((e=>n(e)?d(e,l(s)===l(e)):i(e)?d(e,l(a+r+o)===l(e)):r.includes(e)))}(window.freestar.fsdata.urlBlocklist))throw new Error("The current domain is in the blocked url list, exiting...")}function kn(e){let{type:t="div",classList:n=[],id:i=!1,src:s=!1,name:r=!1,attributes:a=[],children:o=[]}=e;const d=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).createElement(t);return n.length&&(d.className=n.join(" ")),s&&(d.src=s),i&&(d.id=i),r&&d.setAttribute("name",r),a.length&&a.forEach((e=>{Object.entries(e).forEach((e=>{let[t,n]=e;d.setAttribute(t,n)}))})),o.length&&o.forEach((e=>{d.appendChild(e)})),d}const xn=(e,t)=>{e&&Object.entries(t).forEach((t=>{let[n,i]=t;e.style[n]=i}))};function Tn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=arguments.length>5?arguments[5]:void 0;try{const a=kn({type:"script",attributes:[{"data-owner":"freestar"}]});e&&(a.src=e),i&&(a.textContent=i),n&&(a.id=n),s&&(a.async=s),a.type="text/javascript",t&&a.addEventListener("load",t,{once:!0}),r&&a.addEventListener("error",r),document.getElementsByTagName("head")[0].appendChild(a)}catch(e){}}const Cn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return new Promise(((i,s)=>{Tn(e,i,t,n,!0,s)}))};class Rn{constructor(e){this.adSlotId=e.getSlotElementId(),this.size=e.getSizes().map((e=>"fluid"===e?[1,1]:[e.getWidth(),e.getHeight()])),this.adUnitPath=e.getAdUnitPath()}}function On(e){let{slotArray:t}=e;window.__iasPET.queue=window.__iasPET.queue||[],window.__iasPET.queue.push({adSlots:t,dataHandler:function(){window.__iasPET.setTargetingForGPT()}})}function Pn(e){let{slot:t=null}=e;void 0!==window.__iasPET&&(freestar.log(1,"Publisher SlotOperations IAS: iasPETTargeting found"),t?On({slotArray:[new Rn(t)]}):function(){const e=[];$n().forEach((t=>e.push(new Rn(t)))),e.length&&On({slotArray:e})}())}function Nn(e){e=e||0,e++,window.moatPrebidApi&&"function"==typeof window.moatPrebidApi.enableLogging?(freestar.log(1,"Publisher SlotOperations Testing Moat: Logging Enabled"),window.moatPrebidApi.enableLogging()):e<10&&(freestar.log(1,"Publisher SlotOperations Testing Moat: Not set in global try again."),setTimeout((function(){Nn(e)}),200))}function Dn(e){let{slot:t=null}=e;Pn({slot:t}),function(e){let{slot:t=null}=e;window.moatPrebidApi&&("function"==typeof window.moatPrebidApi.slotDataAvailable&&window.moatPrebidApi.slotDataAvailable()||"function"==typeof window.moatPrebidApi.pageDataAvailable&&window.moatPrebidApi.pageDataAvailable())&&(freestar.log(1,"Publisher SlotOperations Moat: moatSlotTargetingReady"),t?window.top.moatPrebidApi.setMoatTargetingForSlot(t):window.moatPrebidApi.setMoatTargetingForAllSlots())}({slot:t})}function Ln(){switch(B("publisher-slot-op")){case"ias":freestar.log(1,"Publisher SlotOperations Testing IAS"),function(){freestar.log(1,"Publisher SlotOperations Testing IAS: loading script"),Tn("//cdn.adsafeprotected.com/iasPET.1.js"),window.__iasPET=window.__iasPET||{};const e=window.__iasPET;e.queue=e.queue||[],e.pubId="10249"}();break;case"moat":freestar.log(1,"Publisher SlotOperations Testing MOAT"),Nn();break;default:freestar.log(1,"No Publisher SlotOperations Testing Params")}}class Mn{constructor(e){let{placement:t=null,prebid:n=null,slot:i=null}=e;this.placement=t,this.prebid=n,this.slot=i,this.trackedAdIds=new Set,this.states=[],this.renderMap=new Map}update(e){let{prebid:t=null,slot:n=null}=e;t&&(this.prebid=t),n&&(this.slot=n)}formatKVP(e,t){return`[${e}=${t}]`}getKVPs(){if(!this.slot)return null;const e=["keywords","tags","category","sections","pagetype","articleID","authors"],t=this.slot.getTargetingMap();return[...Object.entries(t).flatMap((t=>{let[n,i]=t;return e.includes(n)?[]:[this.formatKVP(n,i)]})),...googletag.pubads().getTargetingKeys().flatMap((t=>{if(e.includes(t))return[];return googletag.pubads().getTargeting(t).map((e=>this.formatKVP(t,e)))}))]}getWinningBid(){return null}setAUUID(e){let{fsAuctionId:t}=e;this.slot?.setTargeting?.("fs-auuid",t)}getStateByFsAuctionId(e){let{fsAuctionId:t}=e;return this.states.find((e=>e.fsAuctionId===t))||!1}saveState(e){let{fsAuctionId:t,auctionType:n,prebidAuctionId:i=null}=e,s={};const r=this.placement.name||this.prebid?.code||this.slot?.getSlotElementId();freestar.rebidManager&&r&&(s=freestar.rebidManager.getStatus({adUnitCode:r})),this.setAUUID({fsAuctionId:t}),this.states.push({fsAuctionId:t,prebidAuctionId:i,auctionType:n,rebid:s})}isDisplayAd(){return!["stickyFooter","sideWall","pushdown","revolvingRail","stickyRail"].some((e=>f({placement:this.placement,type:`${e}Options`})))}getSlotId(){return this.prebid?.code||this.slot?.getSlotElementId()||this.placement?.name}}const Bn=new class{constructor(){this.adUnits=new Map}add(e){let{placement:t=null,prebid:n=null,slot:i=null}=e;const s=i?.getSlotElementId()||n?.code;if(s)if(this.adUnits.has(s)){this.adUnits.get(s).update({prebid:n,slot:i})}else if(t||(t=n?sa({name:un({slotId:n.code})}):i?sa({name:fn({path:i.getAdUnitPath()}).placementName}):null),t){const e=new Mn({placement:t,prebid:n,slot:i});this.adUnits.set(s,e)}}getAdUnitByPlacementName(e){return[...this.adUnits.values()].find((t=>t.placement?.name===e))||!1}getAdUnitByPrebidCode(e){return this.adUnits.get(e)||!1}getAdUnitBySlotElementId(e){return Array.from(this.adUnits.values()).find((t=>t.slot&&t.slot.getSlotElementId()===e))||!1}getAdUnitBySlotAdUnitPath(e){return[...this.adUnits.values()].find((t=>t.slot?.getAdUnitPath()===e))||!1}};function Fn(e){let{key:t,value:n}=e;window.googletag.pubads&&window.googletag.pubads().setTargeting(t,n)}function Un(e){let{slot:t,key:n,value:i}=e;t&&t.setTargeting&&n&&i&&t.setTargeting(n,i)}function $n(){return window.googletag.pubads&&window.googletag.pubads().getSlots()}function zn(e){let{elementId:t}=e;if(t)return $n().filter((e=>e.getSlotElementId()===t))[0]}function qn(e){let{elementId:t}=e,n=zn({elementId:t});n&&(window.googletag.destroySlots([n]),t in freestar.refreshLibrary&&delete freestar.refreshLibrary[t])}function jn(e){let{specialDfpId:t,dfpId:n}=e;return t||!n.includes("{{channel}}")}function Vn(e){let{dfpId:t,elementId:n}=e;return window.googletag.defineOutOfPageSlot(t,n).addService(googletag.pubads())}function Hn(e){let{placement:t,sizes:n,id:i=null,specialDfpId:s=null,slotConfig:r}=e;if(!t)return void freestar.log("No placement provided, exiting...");if(!n&&(n=na(t),!n))return void freestar.log("No sizes found at this resolution, exiting...");i||(i=t.name);let{outOfPage:a,dfpId:o,fluidAd:d}=t,l=zn({elementId:i});if(l||(a?jn({specialDfpId:s,dfpId:o})&&(l=Vn({dfpId:s||o,elementId:i})):(d&&!n.includes("fluid")&&n.push("fluid"),jn({specialDfpId:s,dfpId:o})&&(l=googletag.defineSlot(s||o,n,i).addService(googletag.pubads())))),l){if(freestar.fsdata.disableSingleRequest||googletag.pubads().enableSingleRequest(),googletag.enableServices(),function(e){let{id:t,placement:n}=e;freestar.gamMap[t]||(freestar.gamMap[t]=n.dfpId.indexOf("/15184186/")>-1)}({id:i,placement:t}),l.setTargeting){let e={fsrefresh:"0",fsrebid:"0",fs_uuid:Yr()};Ot({siteId:freestar.fsdata.siteId,placement:t})||(e=xr().getInitialFloorKVP({placement:t,keyMap:e})),Object.keys(e).forEach((t=>{l.setTargeting(t,e[t])}))}if(freestar.gptppid&&freestar.gptppid.updateGoogleSlotTargeting(l),t&&(Un({slot:l,key:"fs_placementName",value:t.name}),Un({slot:l,key:"fs_ad_product",value:es(t)})),r&&r.targeting)for(const e in r.targeting)Object.prototype.hasOwnProperty.call(r.targeting,e)&&Un({slot:l,key:e,value:r.targeting[e]});const e=localStorage.getItem("brw.prf");return e&&Un({slot:l,key:"browsiPP",value:e}),Dn({slot:l}),hn({placementName:t.name,slotId:i,path:s||o}),Bn.add({placement:t,slot:l}),l}}function Gn(){return B("fs-dev-gam")?(function(e){if(!freestar||!freestar.fsdata||!Array.isArray(freestar.fsdata.placements))return void console.error("Invalid freestar.fsdata.placements structure.");freestar.fsdata.placements=freestar.fsdata.placements.map((t=>(t.dfpId?.includes(_)&&(t.dfpId=t.dfpId.replace(_,e)),t)))}(S),!1):freestar.fsdata.placements.filter((e=>e.dfpId.indexOf(_)>-1)).length>0}function Wn(){return freestar.fsdata.placements.filter((e=>e.dfpId.indexOf(S)>-1)).length>0}window.freestar&&window.freestar.queue&&window.freestar.queue.push((()=>{window.freestar.adUnitManager=Bn}));const Yn={pubfigEngineLoadInit:"pubfig-engine-load-init",pubfigEngineSetupStart:"pubfig-engine-setup-start",pubfigEngineLoad:"pubfig-engine-load",pubfigSlotRequested:"pubfig-slotRequested",pubfigStickyFooterSlotRequested:"pubfig-sticky-footer-slotRequested",pubfigSlotRenderEnded:"pubfig-slotRenderEnded",pubfigEngineSetupEnd:"pubfig-engine-setup-end",pubfigStickyFooterSlotRenderEnded:"pubfig-sticky-footer-slotRenderEnded",pubfigPrebidFsRequestBids:"pubfig-prebid-fsRequestBids",pubfigPrebidAuctionInit:"pubfig-prebid-auctionInit",pubfigPrebidAuctionEnd:"pubfig-prebid-auctionEnd",pubfigLoaded:"pubfig-loaded",pubfigInitRequestStart:"pubfig-init-request-start",pubfigInitRequestEnd:"pubfig-init-request-end"};function Qn(e){let t=e.realTimeData||{auctionDelay:50};return t.dataProviders=t.dataProviders||[],t}function Kn(e,t,n){const i=n&&n.length;if(t!==P||i)return{ver:"1.0",complete:1,nodes:[{asi:g,sid:`${e}`,hp:1}]}}class Jn{constructor(e,t,n){this.isCoppaInventory=!1,this.global=e,this.prebid=n,this.googletag=t}init(){this.global.config?.isCOPPA&&!0===this.global.config.isCOPPA&&this.set()}set(){this.isCoppaInventory=!0,this.logMethodCall("set"),this.updatePrebidJs(),this.updateGAM()}unset(){this.isCoppaInventory=!1,this.logMethodCall("unset"),this.updatePrebidJs(),this.updateGAM()}info(){return this.global.log("COPPA status is set to "+this.isCoppaInventory),this.isCoppaInventory}logMethodCall(e){this.global.log(`COPPA method ${e} called at ${(new Date).toISOString()}`)}updatePrebidJs(){this.prebid&&this.prebid.setConfig({coppa:this.isCoppaInventory})}updateGAM(){this.googletag&&this.googletag.cmd.push((()=>{this.googletag.pubads().setPrivacySettings({childDirectedTreatment:this.isCoppaInventory})}))}}function Xn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const i=n&&n.length&&n.includes(M);if((t!==P||i)&&(t!==O||!i))return Kn(e,t,n)}function Zn(){if(!wr().getBypassFirstAuction()){const e=freestar.fsdata.networks.filter((e=>"amazon"===e.slug))[0];if(e&&!function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Boolean((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isCoppaInventory||e.isCOPPA)}(window.freestar.coppa,window.freestar.config)){const t=wr().getBidderSummary();if(t.amazon&&"off"!==t.amazon){freestar.amazonNetwork=e;const t=freestar.amazonNetwork.sizes.filter((e=>e.params.publisherId))[0];freestar.amazonPublisherId=t&&t.params&&t.params.publisherId&&z(t.params.publisherId)?t.params.publisherId:"0ab198dd-b265-462a-ae36-74e163ad6159",!function(e,t,n,i,s,r,a){function o(n,i){t[e]._Q.push([n,i])}t[e]||(t[e]={init:function(){o("i",arguments)},fetchBids:function(){o("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(r=n.createElement(i)).async=!0,r.src="//c.amazon-adsystem.com/aax2/apstag.js",(a=n.getElementsByTagName(i)[0]).parentNode.insertBefore(r,a))}("apstag",window,document,"script"),window.apstag.init({pubID:freestar.amazonPublisherId,adServer:"googletag",schain:Xn(window.freestar.fsdata.companyId,window.freestar.fsdata.schain?.type,window.freestar.fsdata.schain?.bidderOverrides)})}}}}function ei(e){return e.bidders&&e.bidders.some((e=>{let{bidder:t}=e;return"amazon"===t}))}function ti(e){let t=Nr();for(let n=0;n<t.length;n++)if(t[n].dfpId===e)return t[n];return null}function ni(e){let t=[];if(e)for(let n=0;n<e.length;n++){let i=null;try{i=freestar.dynamicSlotLibrary[e[n].getSlotElementId()],i&&(i=sa({name:i})),i||(i=freestar.fsdata.placements.filter((t=>{if(e[n].getSlotElementId()===t.slotId)return t})),0===i.length&&(i=null)),i||(i=ti(e[n].getAdUnitPath()))}catch(e){freestar.log(1,`Error: ${e}`)}if(i&&ei(i)){const i=e[n],s=i.getSizes().filter((e=>"string"!=typeof e)).map((e=>[e.width,e.height]));if(!s.length)continue;const r={slotID:i.getSlotElementId(),slotName:i.getAdUnitPath(),sizes:s};t.push(Ne(r))}}else t=Nr().filter((e=>ei(e)&&Dr(e))).map((e=>function(e){const t=e.sizeMappings.find((e=>Rr()>=e.viewport.size[0]));let n=t?t.size:[];return n=n.filter((e=>35843!==e[0])),Ne({slotID:e.name,slotName:e.dfpId,sizes:n})}(e)));return t}function ii(e){let{adUnitCodesWithNoBids:t,isTimeout:n}=e;$n().forEach((e=>{if(n)e.setTargeting("fsbid","timeout");else if(t){const n=e.getAdUnitPath(),i=Fr({adUnitPath:n});i&&t.indexOf(i.name)>-1&&e.setTargeting("fsbid","0")}}))}function si(e){let{auctionData:t}=e;const{bidsReceived:n,noBids:i}=t,s=function(e){let{bidsReceived:t}=e,n=fsprebid.adUnits.map((e=>e.code)).reduce(((e,t)=>(e[t]=!1,e)),{});return t&&t.forEach((e=>{e.cpm>0&&(n[e.adUnitCode]=!0)})),Object.keys(n).filter((e=>0==n[e]))}({bidsReceived:n,noBids:i});ii({adUnitCodesWithNoBids:s,isTimeout:!1})}function ri(e,t,n,i){if(!(e=function(e){let{elementIds:t}=e;return t&&t.length?(Array.isArray(t)||(t=[t]),!(!t||!t.length)&&t):freestar.fsdata.placements.map((e=>{if(e.validAdSizes&&!e.stickyFooter&&!e.pushdownUnit&&0===e.sideWallType&&document.getElementById(e.name))return e.name})).filter((e=>void 0!==e))}({elementIds:e}))||!e.length)return;te({name:"auctionStarted",detail:!0}),freestar.performanceLogger.logMark({markerName:Yn.pubfigPrebidFsRequestBids});const s=n||window.freestar.fsdata.timeout,r={prebid:!1,aps:!1,adserverRequestSent:!1};freestar.requestReference.bidTimer=null,freestar.requestReference.requestNum=++freestar.bidRequestNum;let a=[];const o=wr().isGAMEnabled(),d=freestar.amazonNetwork;if(o){const e=ni(t);Array.isArray(e)&&(a=e)}function l(e){freestar.debug&&freestar.debug>24&&"prebid"===e&&setTimeout((()=>{ft()}),1500),freestar.log(1,`(${freestar.requestReference.requestNum}) Bidder back:`,e),r.prebid&&(!o||r.aps)&&o&&f()}function c(e){let t,n,i=!0;const s=fsprebid.getBidResponses()[e.domId],r=sa({name:pn({slotId:e.placementName})});return s&&r?(n=V(s.bids,(function(e){return Number(e.cpm)})),t=r[`floor${freestar.deviceInfo.device.type.charAt(0).toUpperCase()+freestar.deviceInfo.device.type.slice(1)}`],$(t)&&t>0&&n&&n.cpm&&n.cpm<t&&(i=!1),i):i}function u(e){return freestar.dynamicSlotLibrary[e]?freestar.dynamicSlotLibrary[e]:e}function f(){!0!==r.adserverRequestSent&&(r.adserverRequestSent=!0,freestar.requestReference.bidTimer&&clearTimeout(freestar.requestReference.bidTimer),freestar.log(2," ("+freestar.requestReference.requestNum+") Sending adserver request!"),googletag.cmd.push((function(){const t={activeIds:[],activeSlots:[]};if(Array.isArray(e)&&e.length){const n=[];freestar.log(2," ("+freestar.requestReference.requestNum+") Refresh Only:",e),freestar.amazonNetwork&&apstag.setDisplayBids(e),e.forEach((e=>{let t=document.getElementById(e);if(t){const e=sa({name:pn({slotId:t.getAttribute("name")})});e&&n.push(e.name)}}));const i=function(){const t={activeIds:[],activeSlots:[]};return e.forEach((e=>{const n=zn({elementId:e});n&&t.activeSlots.push(n),c({placementName:u(e),domId:e})&&t.activeIds.push(e)})),t}();t.activeIds=i.activeIds,t.activeSlots=i.activeSlots}else freestar.log(2," ("+freestar.requestReference.requestNum+") Refresh All!"),freestar.amazonNetwork&&apstag.setDisplayBids(),t.activeIds=function(){const e=[];return $n().forEach((t=>{const n=t.getSlotElementId();freestar.bidsWon&&freestar.bidsWon[n]&&!freestar.bidsWon[n]&&(freestar.bidsWon[n].evaluated=!0,c({placementName:u(n),domId:n})&&e.push(n))})),e}();const n=function(){let e=at({name:"_fs-test"});return e&&(e=JSON.parse(e),e.items.some(((t,n)=>{t==e.selection&&(e.selected=n,e.testGroup=t.indexOf("ab_test")>-1?1:0)}))),e}();n&&(freestar.log(1,"Part of an A/B test... ",n),Fn({key:"fs_test_variant_id",value:String(n.testGroup)})),t.activeSlots.length&&(t.activeIds.length&&fsprebid.setTargetingForGPTAsync(t.activeIds),Zr(t.activeSlots),function(e){!0===freestar.googletagCorrelatorUpdate?(googletag.pubads().refresh(e),freestar.googletagCorrelatorUpdate=!1):googletag.pubads().refresh(e,{changeCorrelator:!1})}(t.activeSlots)),i&&i()})))}freestar?.config?.setNonPersonalizedAds?(freestar.log(1," ("+freestar.requestReference.requestNum+") set to skip pre auctions, sending GAM request."),f()):(!function(e,t,n){o&&function(e){let{amazonSlots:t,bidTimeout:n,requestManager:i}=e;if(!o||!d||!t.length)return freestar.log(1,"Amazon bidding is not applicable or no valid amazon Slots"),i.aps=!0,void l("aps");freestar.log(1,"Requesting bids from Amazon:",t),apstag.fetchBids({slots:t,timeout:n||1e3},(function(e){freestar.log(1," ("+freestar.requestReference.requestNum+") aps bids:",e),i.aps=!0,l("aps")}))}({amazonSlots:e,bidTimeout:n,requestManager:r}),function(e){let{elementIds:t,bidTimeout:n,requestManager:i}=e;const s={timeout:n||1e3,bidsBackHandler:function(e){freestar.log(1," ("+freestar.requestReference.requestNum+") prebid bid responses:",e),i.prebid=!0,l("prebid")}};t&&(s.adUnitCodes=t),fsprebid.que.push((function(){fsprebid.requestBids(s)}))}({elementIds:t,bidTimeout:n,requestManager:r})}(a,e,s),freestar.requestReference.bidTimer=window.setTimeout((function(){o&&(freestar.log(1," ("+freestar.requestReference.requestNum+") TIMEOUT!"),ii({isTimeout:!0}),f())}),s))}const ai=new class{constructor(){this.map={}}getStatus(e){let{adUnitCode:t=null}=e;if(t)return this.getStatusByAdUnitCode({adUnitCode:t})}getStatusByAdUnitCode(e){let{adUnitCode:t}=e;return this.map[t]}isAbleToRebid(e){let{elementId:t}=e;return!this.map[t]||this.map[t].count<1}isValidPlacement(e){let{placement:t=!1}=e;return t&&!t.interstitialOptions.active}rebid(e){let{elementId:t,slot:n}=e;window.freestar.log(1,`Rebidding for ${t}`),ri([t],n)}handleNoBidScenario(e,t){const{slot:n}=e,i=sa({name:pn({slotId:t})});if(a.instance.resolve(Ht.ANALYTICS).then((n=>{n.track(new nn({eventName:`EVENT_IS_EMPTY_CAN_REBID=${this.isValidPlacement({placement:i})&&this.isAbleToRebid({elementId:t})}`,eventType:"REBID",data:{event:e}}))})),this.isValidPlacement({placement:i})){if(this.isAbleToRebid({elementId:t}))return this.track({elementId:t}),this.updateKeyValues({slot:n,data:{fsrebid:String(this.map[t].count)}}),void xr().getFloorsData({placement:i,slotId:t,callback:e=>{let{result:s}=e;window.freestar.log(1,`Floors called for rebid for blocked ad on ${i.name}`),s&&n.updateTargetingFromMap(s),this.rebid({elementId:t,slot:n})},isRebid:!0});window.freestar.log(1,`Rebid attempts exceeded ${t}`),this.reset({elementId:t})}}resetRebidStatus(e){this.map[e]&&(window.freestar.log(1,`Rebid successful ${e}`),this.reset({elementId:e}))}reset(e){let{elementId:t}=e;const n=zn({elementId:t});n&&n.setTargeting("fsrebid","0"),delete this.map[t]}track(e){let{elementId:t,type:n="EMPTYRESPONSE"}=e;this.map[t]||(this.map[t]={count:0,type:n}),this.map[t].count+=1}updateKeyValues(e){let{slot:t,data:n}=e;t.updateTargetingFromMap(n)}};function oi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(null!=e?e:Object.keys(window.freestar.rebidControl)).forEach((e=>function(e){const t=window.freestar.rebidControl[e];t&&(t.setTargeting(0),delete window.freestar.rebidControl[e])}(e)))}class di{constructor(){this.lastRefreshTime=0}allowed(){return Date.now()-this.lastRefreshTime>6e3}updateLastRefreshTime(){this.lastRefreshTime=Date.now()}}class li{constructor(){this.requiresRefresh=!0}reset(){this.requiresRefresh=!0}getRefreshThreshold(e){return.8*e}check(e,t){let{refreshCounter:n,refreshTime:i}=e;if(t.allowed()&&this.requiresRefresh){n>=this.getRefreshThreshold(i)&&n<i&&(t.updateLastRefreshTime(),this.requiresRefresh=!1,window.fsprebid.refreshUserIds())}}}const ci=(e,t)=>{if(document.getElementById(e.name)){Ki([e.name]);const n=Hn({placement:e,id:e.name});Qi(n,e.name,null,{fs_ad_product:es(e)}),t.push(n)}},ui=async function(){const e=[],t=freestar.config.removeRefresh||[],n=freestar.config.alwaysRefresh||[];Br(),freestar.fsdata.placements.forEach((i=>{(freestar.config.enabled_slots&&freestar.config.enabled_slots.indexOf(i.name)>-1&&!i.stickyFooter&&-1===t.indexOf(i.name)||n.indexOf(i.name)>-1)&&ci(i,e)})),function(e){const{isRefreshAllowed:t}=wr().determineAdRefreshBehavior();if(!t)return void freestar.log({title:mi},"Ad refresh is disabled for this geo.");freestar.AdRefresher=new Oi(e)}(e)},fi=e=>{let{width:t,height:n}=e;return t>n?"landscape":"portrait"},hi=()=>{window.addEventListener("resize",(()=>{setTimeout((()=>{const e=window.innerWidth||document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight;fi({width:e,height:t})!==freestar.deviceOrientation&&(freestar.deviceOrientation=fi({width:e,height:t}),ui())}),100)}))};class pi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;this.win=e}init(){this.dummyEl=this.createDummyElement(),this.maxViewportHeight=this.dummyEl.offsetHeight,this.keyboardIsOpen=!1,this.resizeDelay=1e3,this.dummyEl.remove(),this.initialOrientation=fi({width:this.win?.visualViewport?.clientWidth,height:this.win?.visualViewport?.clientHeight}),this.onResizeDelayed=this.onResizeDelayed.bind(this),this.win.visualViewport.addEventListener("resize",this.onResizeDelayed)}createDummyElement(){const e=document.createElement("div");return e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="1px",e.style.height="100svh",e.style.visibility="hidden",document.body.appendChild(e),e}onResizeDelayed(){this.keyboardIsOpen?(clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout((()=>{this.onResize()}),window.freestar.keyboardRefreshControlDelay||this.resizeDelay)):(clearTimeout(this.resizeTimeout),this.onResize())}onResize(){const e=this.win.visualViewport.height,t=fi({width:document?.documentElement?.clientWidth,height:document?.documentElement?.clientHeight});t!==this.initialOrientation?(this.initialOrientation=t,this.dummyEl=this.createDummyElement(),this.maxViewportHeight=this.dummyEl.offsetHeight,this.dummyEl.remove()):e>this.maxViewportHeight&&(this.maxViewportHeight=e),e<.9*this.maxViewportHeight?this.keyboardIsOpen||(this.keyboardIsOpen=!0,this.onKeyboardOpen()):this.keyboardIsOpen&&(this.keyboardIsOpen=!1,this.onKeyboardClose())}onKeyboardOpen(){window.freestar?.log(1,"Keyboard opened, pausing ad refresh."),this.win.freestar?.refreshLibrary&&Object.values(this.win.freestar.refreshLibrary).forEach((e=>{e.pauseRefresh=!0}))}onKeyboardClose(){window.freestar?.log(1,"Keyboard closed, resuming ad refresh."),this.win.freestar?.refreshLibrary&&Object.values(this.win.freestar.refreshLibrary).forEach((e=>{e.pauseRefresh=!1}))}destroy(){this.win.visualViewport.removeEventListener("resize",this.onResize)}}const mi="REFRESH",gi="DYNAMICADS",bi="VIDEO",yi="STICKYFOOTER";function vi(e){let{placement:t,product:n,callback:i}=e;this.placement=t,this.product=n,this.productKey=n+"Options",this.incrementIteration=()=>{this.iteration++,sessionStorage.setItem(this.key,this.iteration.toString())},this.subtractIteration=()=>{freestar.log(1,"Frequency Cap : iteration will remove this attempt as an iteration. Setting new sessionStorage item value."),this.iteration--,sessionStorage.setItem(this.key,this.iteration.toString())},this.fetchCap=()=>this.placement[this.productKey]&&t[this.productKey].cap>0?t[this.productKey].cap:-1,this.fetchIteration=()=>{const e=sessionStorage.getItem(this.key);return Number(e)?Number(e):0},this.allowProduct=()=>this.cap>0&&(this.iteration>=this.cap?(freestar.log(1,`Frequency Cap: iteration of ${this.iteration} is higher than cap of ${this.cap}. ${this.product} will not run again until this session ends.`),!1):(freestar.log(1,`Frequency Cap: iteration of ${this.iteration+1} is lower than or equal to the cap of ${this.cap}. Continue with  ${this.product}.`),!0)),this.cap=this.fetchCap(),this.key=`fs.${this.product}.${this.placement.name}.frequencycap`,this.iteration=this.fetchIteration(),this.callback=i}function wi(e){const t=pn({slotId:e.slot.getSlotElementId()});t&&freestar.frequencyLibrary[t]&&freestar.frequencyLibrary[t].cap&&(e.isEmpty?e.isEmpty&&freestar.frequencyLibrary[t].callback&&freestar.frequencyLibrary[t].callback(!0):freestar.frequencyLibrary[t].incrementIteration())}const Ii="rbm",_i="RENDER BID MIDWAY V1.0.0",Si={title:_i,styles:"background: black; color: white; border-radius: 3px; padding: 3px"},Ei={level:1,title:_i,styles:"background: red; color: white; border-radius: 3px; padding: 3px"},Ai={blockedSiteIDs:[1575,1910,1748,1841,6326,2410,1783,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1985,2095,2132,2170,2232,2244,2511,5491,1756,2372,1556,2086,2087,2192,2193,2194,2195,2196,2197,2198,2199,2200,2201,2202,2203,2204,2205,2206,2207,2208,2209,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2351,2352,2353,2354,2355,2356,2357,2358,2359,2360,2361,2362,2363,2364,2365,2366,2367,2394,2395,2396,2397,2398,2399,2400,2401,2402,2403,2404,2405,2426,3516,5344,3107,3108,3109,3110,3111,3234,6152,6603,1556,1495],default:{percentage:.2},siteSpecific:[{activeSiteIds:[6615,6125,5926,5927,5928,5929,5930,5931,5932,5933,5934,5935,5936,5937,5938,5939,5940,5941,5942,5943,5944,5960,533],percentage:.5}]},ki=["ttd","ttdfsx","ttds2s"];class xi{constructor(e){let{placement:t,prebid:n=null}=e;this.placement=t,this.prebid=n,this.init()}init(){this.placement.rbmOptions={cap:1},this.frequencyCapManager=new vi({placement:this.placement,product:"rbm"}),a.instance.resolve(Ht.NATIVE_RENDER_MANAGER).then((e=>{this.nativeRender=e}))}renderAd(){if(!this.prebid)return;if(!(()=>{const e=JSON.parse(ze({key:`fs.${Ii}`}))||{};if(!Ai.blockedSiteIDs.includes(freestar.fsdata.siteId)&&void 0===e.inTest){const t=Ai.siteSpecific.filter((e=>{if(e.activeSiteIds.includes(freestar.fsdata.siteId))return e})).shift(),n=t?.percentage||Ai.default.percentage,i=Math.random();e.inTest=i<n,qe({key:`fs.${Ii}`,value:e,type:$e.object})}return e.inTest&&1===e.side&&freestar.log(Si,"Session is participating in test..."),B(`fs-use-${Ii}`)||e.inTest})())return;if(freestar.log(Si,this.prebid.code,`Can render an ad? ${this.frequencyCapManager.allowProduct()}`),!this.frequencyCapManager.allowProduct())return;const e=this.nativeRender.getHighestBid(nt(this.prebid.code));e&&!ki.includes(e.bidderCode)&&(freestar.log(Si,this.prebid.code,`Found an ad?? ${null!==e}`),this.nativeRender.renderAd(e,this.prebid.code).then((()=>{this.frequencyCapManager.incrementIteration(),a.instance.resolve(Ht.ANALYTICS).then((t=>{const{adId:n}=e;t.track(new nn({eventName:"RENDER_BID_MIDWAY",eventType:"SUCCESS",data:{adId:n}}))}))})).catch((e=>{freestar.log(Si,this.prebid.code,`Error native rendering prebid ad: ${e}`)})))}}const Ti=new class{constructor(){this.trackers={}}renderAd(e){let{elementId:t}=e;try{const e=this.getAdUnit(t);if(!e)return void freestar.log(Ei,`No adUnit found for elementId: ${t}`);const{placement:n,prebid:i}=e;if(!n||!n.name)return void freestar.log(Ei,`Invalid placement for elementId: ${t}`);this.ensureTracker(n,i),this.trackers[n.name].renderAd()}catch(e){freestar.log(Ei,`Error in renderAd: ${e.message}`)}}getAdUnit(e){return this.adUnitManager||(this.adUnitManager=Bn),this.adUnitManager.getAdUnitBySlotElementId(e)||this.adUnitManager.getAdUnitByPrebidCode(e)}ensureTracker(e,t){this.trackers[e.name]||(this.trackers[e.name]=new xi({placement:e,prebid:t}))}},Ci={root:null,threshold:.5};let Ri=new class{observe(){return null}unobserve(){return null}disconnect(){return null}};"IntersectionObserver"in window&&(Ri=new IntersectionObserver((function(e){e.forEach((e=>{if(freestar.refreshLibrary[e.target.id]){const t=e.isIntersecting?e.intersectionRatio:0;freestar.refreshLibrary[e.target.id].intersectionRatio=t}}))}),Ci));class Oi{constructor(e){freestar.log(25,"REFRESH V2 Enabled"),this.slots=e||$n(),this.observers={},this.time={},this.time.default=window.freestar.fsdata.adRefreshRate||0,this.bidTimeout=window.freestar.fsdata.timeout,this.url=window.location.href,this.renderBidMidwayManager=Ti,this.onLoad(e),!window.freestar.fsdata.pauseRefreshOnVirtualKeyboard||window.freestar?.deviceInfo?.device?.type!==He&&window.freestar?.deviceInfo?.device?.type!==Ge||(this.virtualKeyboardRefreshControl=new pi,this.virtualKeyboardRefreshControl.init()),this._addGumgumListener()}_addGumgumListener(){a.instance.resolve(Ht.EVENT_BUS).then((e=>{e.subscribe(Ts,(()=>{this._resubscribeIntersectionObservers()}))}))}_resubscribeIntersectionObservers(){for(const e in freestar.refreshLibrary){const t=document.getElementById(e);t&&t.id&&(Ri.unobserve(t),Ri.observe(t))}}static isTimerSet=!1;onLoad(e){this.init(e),Oi.isTimerSet||(window.setInterval((()=>{for(const e in this.observers)freestar.refreshLibrary[e]||(this.observers[e]=!1);let e=!1;if(this.url===window.location.href&&this.placementsChangedViaUrl===freestar.refreshLibrary.length||(e=!0,this.placementsChangedViaUrl=freestar.refreshLibrary.length,this.url=window.location.href),!document.hidden)for(const t in freestar.refreshLibrary){const n=document.getElementById(t);if(n&&n.id){this.counter(n.id),this.observers[t]&&!e&&void 0!==freestar.refreshLibrary[t].intersectionRatio||(this.observers[t]=!0,Ri.unobserve(n),Ri.observe(n));Oi.chekIsItTimeToRefresh(n.id)&&Oi.refresh(n.id)}}}),1e3),Oi.isTimerSet=!0)}init(e){freestar.refreshLibraryCreator=Oi.refreshLibraryCreator;for(let t=0;t<this.slots.length;t++){const n=this.slots[t]?this.slots[t].getSlotElementId():void 0;if(Oi.refreshLibraryCreator(n),e&&e.length>0&&this.slots[t]){const e=sa({name:pn({slotId:n})});this.observers[n]||e.outOfPage||(Ri.observe(document.getElementById(n)),this.observers[n]=!0),Oi.refresh(n,document.getElementById(n))}}}static refreshLibraryCreator(e,t){e&&(Array.isArray(e)||(e=[e]),e=(e=e.filter((e=>-1===e.indexOf("_fs-sf")))).filter((e=>document.getElementById(e))),t=t||void 0,e.forEach((e=>{window.freestar.refreshLibrary[e]||(window.freestar.refreshLibrary[e]={});const n=sa({name:pn({slotId:e})});if(!n)return void freestar.log(20,"refreshLibraryCreator","Cannot find placement for ad slot",e);const i=window.freestar.refreshLibrary[e];if(i.pauseRefresh&&U(i.pauseRefresh)||(i.pauseRefresh=!1),i.viewabilityThresholdMet=!1,i.refreshTime&&$(i.refreshTime)||(i.refreshTime=Number(ma(e))),i.isCounterStopped&&$(i.isCounterStopped)||(i.isCounterStopped=!1),i.refreshCounter&&$(i.refreshCounter)||(i.refreshCounter=t||0),i.viewPercentage&&$(i.viewPercentage)||(i.viewPercentage=100),!i.disableRefresh||!U(i.disableRefresh)){i.disableRefresh=!1;const t=document.getElementById(e);(t&&-1===Number(t.getAttribute("data-refresh-time"))||!0===n.outOfPage)&&(i.disableRefresh=!0)}i.intersectionRatio&&$(i.intersectionRatio)||(i.intersectionRatio=0),i.timesRefreshed&&$(i.timesRefreshed)||(i.timesRefreshed=0),n.interstitialOptions&&!0===n.interstitialOptions.active&&(i.disableRefresh=!0),i.refreshUserIds||(i.refreshUserIds=new li)})),window.freestar.globalRefreshUserIDsState=new di)}static getRefreshTime(e,t){let n=e.refreshTime;return(void 0===n||isNaN(n)||null===n)&&(n=ma(t),freestar.log(25," ","freestar.fsdata.adRefreshRate",n)),n}static getRefreshCounter(e){let t=e.refreshCounter;return(void 0===t||isNaN(t))&&(t=0),t}static chekIsItTimeToRefresh(e){const t=freestar.refreshLibrary[e];if(!t||t.pauseRefresh)return!1;const n=Oi.getRefreshCounter(t),i=Oi.getRefreshTime(t,e),s=Oi.getViewabilityThresholdMet(e);return!(i<=0||n<0)&&(n>=i&&s)}static getViewabilityThresholdMet(e){return(freestar.refreshLibrary[e]?.intersectionRatio||0)>.49}counter(e){const t=freestar.refreshLibrary[e],n=sa({name:pn({slotId:e})});if(n&&n.lazyAd&&n.selectedSize?.lazyLoadViewportHeight>0&&!t.hasIntersectLazyAd)return void(t.refreshCounter=0);if(t.disableRefresh||t.isCounterStopped)return;const i=Oi.getRefreshTime(t,e),s=Oi.getRefreshCounter(t);if(!(i<=0||s<0||(freestar.log({title:mi},e,t.refreshCounter),s>=i))){if(isNaN(t.refreshCounter)?t.refreshCounter=1:t.refreshCounter+=1,s>=.5*i&&s<=.85*i&&Oi.getViewabilityThresholdMet(e)){if(t.checkingForBid)return;t.checkingForBid||(t.checkingForBid=!0),this.renderBidMidwayManager.renderAd({elementId:e})}if(s>.85*i&&t.checkingForBid&&(t.checkingForBid=!1),s>=.8*i&&n&&!Ot({siteId:freestar.fsdata.siteId,placement:n})){const t=(Pi(e)||0)+1;xr().prefetchFloorsData({placement:n,slotId:e,timesRefreshed:t})}t?.refreshUserIds&&t.refreshUserIds.check(t,window.freestar.globalRefreshUserIDsState)}}static async refresh(e){const t=document.getElementById(e),n=freestar.refreshLibrary[e];if(!n||!t)return;n.isCounterStopped=!0;const i=sa({name:pn({slotId:e})});if(i?.lazyAd&&!n.hasIntersectLazyAd&&i.selectedSize?.lazyLoadViewportHeight>0||n.disableRefresh||n.pauseRefresh)return;const s=zn({elementId:e});s&&s.setTargeting("fs_uuid",Yr()),i&&!Ot({siteId:freestar.fsdata.siteId,placement:i})&&(freestar.refreshLibrary[e].timesRefreshed+=1,await xr().getFloorsData({placement:i,slotId:e,callback:t=>{let{result:n}=t;freestar.refreshLibrary[e].timesRefreshed-=1,n&&s&&(Object.keys(n).forEach((e=>{s.setTargeting(e,n[e])})),freestar.log({title:"FLOORS"},e,"Refreshed floors value.",n))}})),function(e){let{elementId:t,placement:n}=e,i=fsprebid?.adUnits?.find((e=>e.code===t));i?fsprebid.removeAdUnit(t):i={...In(n),code:t||n.name};Di({adUnits:[{...i,bids:[...n.bidders]}],isRefresh:!0})}({elementId:e,placement:i}),wr().refreshData(),n.refreshCounter=1,n.isCounterStopped=!1,freestar.currentStickyFooter&&freestar.currentStickyFooter.placement&&e===freestar.currentStickyFooter.placement.name?(n.timesRefreshed+=1,freestar.log({title:mi},e,"Refreshing sticky footer ad slot..."),freestar.currentStickyFooter.stickyFooterRefresh(),n?.refreshUserIds&&n.refreshUserIds.reset()):window.freestar.superflex&&window.freestar.superflex.refresh&&window.freestar.superflex.isSuperflex&&window.freestar.superflex.isSuperflex({placement:i})?(window.freestar.superflex.refresh({elementId:e,placement:i}),n?.refreshUserIds&&n.refreshUserIds.reset()):(freestar.log({title:mi},e,"Refreshing standard ad slot..."),ha(t),Oi.refreshSlots({slotIds:[e]},!1),n?.refreshUserIds&&n.refreshUserIds.reset())}static refreshSlots(){let{slotIds:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{slotIds:null};(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&console.warn("freestar.freestarReloadAdSlot() has been deprecated and will be removed in the future use freestar.refreshAllSlots()"),freestar.log(1,`${e?"freestar.refresh":"freestar.refreshAllSlots"}${e?" : "+e:null}`),oi(e),window.fsprebid.que.push((function(){const t=[],n=$n().filter((e=>-1===e.getSlotElementId().indexOf("_fs-sf"))).map((function(n){if(n){let i=n.getSlotElementId();if(null===document.getElementById(i))return null;if(freestar.refreshLibrary[i]||Oi.refreshLibraryCreator(i),freestar.refreshLibrary[i].dataRefreshId=Yr(),freestar.refreshSlots.push({refreshId:freestar.refreshLibrary[i].dataRefreshId}),!e||e.indexOf(i)>-1)return freestar.refreshLibrary[i].refreshCounter=1,freestar.refreshLibrary[i].timesRefreshed+=1,freestar.refreshLibrary[i]?.refreshUserIds&&freestar.refreshLibrary[i].refreshUserIds.reset(),t.push(i),n.setTargeting("fsrefresh",`${freestar.refreshLibrary[i].timesRefreshed??0}`),n}})).filter((e=>void 0!==e));e&&!t.length||ri(t,n)}))}static refreshAllSlots(){$n().forEach((e=>{if(e){const t=e.getSlotElementId();Oi.refresh(t)}}))}static refreshAllActiveSlots(){$n().forEach((function(e){const t=e.getSlotElementId();document.getElementById(t)&&Oi.getViewabilityThresholdMet(t)&&Oi.refresh(t)}))}}function Pi(e){const t=freestar.refreshLibrary[e];if(t)return t.timesRefreshed}function Ni(e){const{isRefreshAllowed:t}=wr().determineAdRefreshBehavior();t?Oi.refreshLibraryCreator(e):freestar.log({title:mi},"Ad refresh is disabled for this geo.")}function Di(e){let{adUnits:t,isRefresh:n=!1}=e;Array.isArray(t)||(t=[t]),t=function(e,t){const n=[];return e.forEach((e=>{const i=(Pi(e.code)||0)+(t?1:0),s=sa({name:pn({slotId:e.code})}),r=wr().getConfig({refresh:i,placement:s});r&&"off"===r.preGAMAuction||n.push(function(e,t){const n=zn({elementId:e.code});n&&t?.clientServerMask&&!wr().isDebugOrTestSession()?n.setTargeting("fs_clientservermask",t.clientServerMask):n&&n.clearTargeting("fs_clientservermask");return function(e,t){t||(t={});const n=[];Object.entries(t).forEach((e=>{let[t,i]=e;"both"!==wr().getBidderSummary()[t]?"off"!==i&&n.push(t):("client"!==i&&"both"!==i||n.push(tt(t)),"server"!==i&&"both"!==i||n.push(t))}));const i=[];return(e.bids||[]).forEach((function(e){t[nt(e.bidder)]&&!n.includes(e.bidder)||i.push({...e})})),{...e,bids:i}}(e,t?.clientServer)}(e,r))})),n}(t,n);const i=t.filter((e=>e&&null!=e.bids&&e.bids.length>0)),s=t.filter((e=>!e||null==e.bids||0===e.bids.length));if(s.length>0){const e=s.map((e=>e&&e.code)).join(", ");freestar.log(20,`Not adding adUnits ${e} which have no bidders configured.`)}freestar.log(20,`Adding ${i.length} adUnits to fsprebid.`),fsprebid.que.push((function(){fsprebid.addAdUnits(i)})),i.forEach((e=>{Bn.add({prebid:e})}))}function Li(){fsprebid.que.push((function(){fsprebid.onEvent(zt,(function(e){freestar.performanceLogger.logMark({markerName:Yn.pubfigPrebidAuctionEnd,compareTo:[Yn.pubfigPrebidAuctionInit]}),si({auctionData:e})}))}))}function Mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wn;const{placements:t,networks:n}=window.freestar.fsdata,{bidderOverrides:i=[],type:s=P}=window.freestar?.fsdata?.schain||{},r=e=>e.slug;let a=n.map(r).concat(t.filter((e=>e.networks.length)).map((e=>{let{networks:t}=e;return t.map(r)}))).flat();e.hasValidStoredRequests()&&a.push(e.getSlug());const o=i&&i.length;return o&&s===O?a=a.filter((e=>!i.includes(e))):o&&s===P&&(a=a.filter((e=>i.includes(e)))),a.filter(((e,t,n)=>n.indexOf(e)===t&&!R.includes(e)))}function Bi(e){return e.sizes.forEach((e=>{Object.keys(e.params).forEach((t=>!e.params[t]&&delete e.params[t]))}))}let Fi=0;const Ui=()=>{if(Fi++,Fi<5&&!window.fsprebid||!window.fsprebid.addAdUnits||!window.googletag||!window.googletag.pubads||!window.googletag.pubads().getSlots)return void setTimeout((function(){freestar.log(1,"RequestQue: There is an error with googletag or prebid loading in requestQueInitiate. Making another attempt."),Ui()}),300);if(freestar.requests.que.length<1)return void freestar.log(1,"RequestQue: nothing left in queue returning");let e=freestar.requests.que,t=[],n=[];freestar.log(1,"request que objects",e);Di({adUnits:e.filter((e=>0!==e.sizes.length)).filter((function(e){t.push(e.code);const i=zn({elementId:e.code});if(i&&n.push(i),!fsprebid.adUnits.filter((t=>t.code===e.code))[0])return e}))}),Ni(t),freestar.fsRequestBids(t,n,freestar.fsdata.timeout),freestar.requests.que=[]},$i={},zi=e=>{let{element:t,placement:n}=e;hn({placementName:n.name,slotId:t.id});const{lazyLoadViewportHeight:i}=n.selectedSize;let s=$i[i];s||(s=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(oa(e)){const n=pn({slotId:e.target.id});if(n){freestar.newAdSlots([{placementName:n,slotId:e.target.id,source:"lazyAd"}]);const i=freestar.refreshLibrary?.[e.target.id];Y(i)&&(i.hasIntersectLazyAd=!0),t.unobserve(e.target)}}}))}),{root:null,rootMargin:`${i}% 0px ${i}% 0px`})),s.observe(t)},qi={videoAdhesion:{prettyName:"Sticky Footer Video Adhesion",disabled:!1},stickyFooter:{prettyName:"Sticky Footer",disabled:!1,refreshDisabled:!1,refreshInterval:0},video:{prettyName:"Video",disabled:!1,refreshDisabled:!1,refreshInterval:0},standAloneVideo:{prettyName:"Stand Alone Video",disabled:!1,refreshDisabled:!1,refreshInterval:0},revolvingRail:{prettyName:"Revolving Rail",disabled:!1,refreshDisabled:!1,refreshInterval:0},pushdown:{prettyName:"Pushdown",disabled:!1,refreshDisabled:!1,refreshInterval:0},dynamicAds:{prettyName:"Dynamic Ads",disabled:!1,refreshDisabled:!1,refreshInterval:0,optionsPath:"dynamicAdOptions"},dynamicAdsV2:{prettyName:"Dynamic Ads V2",disabled:!1,refreshDisabled:!1,refreshInterval:0,optionsPath:"dynamicAdOptionsV2"},footerBidding:{prettyName:"Footer Bidding",disabled:!1,refreshDisabled:!1,refreshInterval:0},superflex:{prettyName:"Superflex",disabled:!1,refreshDisabled:!1,refreshInterval:0},slidingUnit:{prettyName:"Sliding Unit",disabled:!1,refreshDisabled:!1,refreshInterval:0},sideWall:{prettyName:"Sidewall",disabled:!1,refreshDisabled:!1,refreshInterval:0},pageGrabber:{prettyName:"Page Grabber",disabled:!1,refreshDisabled:!1,refreshInterval:0},interstitial:{prettyName:"Interstitial",disabled:!1,refreshDisabled:!1,refreshInterval:0},googleInterstitial:{prettyName:"Google Interstitial",disabled:!1,refreshDisabled:!1,refreshInterval:0},dianomiContentRec:{prettyName:"Dianomi Content Recommendation",disabled:!1,refreshDisabled:!1,refreshInterval:0},lazyLoad:{prettyName:"Lazy Loaded Ads",disabled:!1,refreshDisabled:!1,refreshInterval:0},iai:{prettyName:"Intelligent Ad Insert",disabled:!1,refreshDisabled:!1,refreshInterval:0},stickyRail:{prettyName:"Sticky Rail",disabled:!1,refreshDisabled:!1,refreshInterval:0}},ji=function(e){let{name:t}=e;return!(!window.freestar.config.products[t]||!window.freestar.config.products[t].disabled)&&(window.freestar.log(1,`${qi[t].prettyName} Disabled via freestar.config.products.${t}.disabled`),!0)};function Vi(e){const t=e.selectedSize?.elementTargetedConfig;return t&&t.active?{...t,source:"viewport"}:{active:!1}}const Hi="crsl",Gi={title:"CAROUSEL V1.0.0",styles:"background: black; color: white; border-radius: 3px; padding: 3px"},Wi={percentage:0,blockedSiteIDs:[1575,1910,1748,1841,6326,2410,1783,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1985,2095,2132,2170,2232,2244,2511,5491,1756,2372,1556,2086,2087,2192,2193,2194,2195,2196,2197,2198,2199,2200,2201,2202,2203,2204,2205,2206,2207,2208,2209,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2351,2352,2353,2354,2355,2356,2357,2358,2359,2360,2361,2362,2363,2364,2365,2366,2367,2394,2395,2396,2397,2398,2399,2400,2401,2402,2403,2404,2405,2426,3516,5344,3107,3108,3109,3110,3111,3234,6152,6603,1556,1495]},Yi=()=>{const e=JSON.parse(ze({key:`fs.${Hi}`}))||{};return e?.inTest&&e?.control};function Qi(e,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{const i=function(e,t){let n={};return window.freestar.config.targeting&&Array.isArray(window.freestar.config.targeting)&&(n=window.freestar.config.targeting.find((function(e){return Object.keys(e).includes(t)}))),n&&(e={...e,...n[t]}),e}(n,t);if(i)for(const t in i)e.setTargeting(t,i[t])}catch(e){freestar.log(49,"ERROR:","slotTargeting",...arguments),freestar.log(49,"ERROR:","slotTargeting",e)}}function Ki(e){return freestar.googletagCorrelatorUpdate=!0,freestar.log(25,"deleteAdSlots invoked and the following ID(s) will be destroyed",e),fsprebid.libLoaded&&(googletag||googletag.destroySlots)?void 0===e?(googletag.cmd.push((function(){googletag.destroySlots()})),void(freestar.refreshLibrary={})):(Array.isArray(e)||(e=[e]),void Ji({list:e})):(freestar.log(10,"destroyAdSlots","Objects not ready, returning..."),freestar.queue.timers=freestar.queue.timers||{},clearTimeout(freestar.queue.timers[e]),void(freestar.queue.timers[e]=setTimeout(Ki,100,...arguments)))}const Ji=e=>{let{list:t}=e;t=t.map((e=>Bn.getAdUnitBySlotElementId({elementId:e})));let n=[];for(let e of t){const{placement:t}=e;if(t&&t.sizeMappings&&t.sizeMappings.some((e=>e.superflex))){const e=[...document.querySelectorAll(`[name="${t.name}"]`)];n=n.concat(e.flatMap((e=>e.id.includes("fs-sf")&&Bn.getAdUnitBySlotElementId({elementId:e.id})||[])))}}t=t.concat(n),t.forEach((e=>{e&&qn({elementId:e.slot.getSlotElementId()})}))};function Xi(e){let{placement:t,element:n,newElement:i}=e;const s=In(t);s&&(s.code=n.id,"lazyAd"===i.source?freestar.requests.que.push(s):t.selectedSize&&t.selectedSize.lazyLoadViewportHeight>0?zi({element:n,placement:t}):freestar.requests.que.push(s))}function Zi(e){let{placement:t,slotId:n,targeting:i={},placementName:s=null,newElement:r,element:a=null}=e;function o(e,a){if(a&&s&&(a.setAttribute("name",s),window.freestar.newAdSlotIds.push(n),t=sa({name:s}),t)){window.freestar.dynamicSlots.push(n);const e=(e,t)=>e[0]+e[1]<t[0]+t[1]?1:t[0]+t[1]<e[0]+e[1]?-1:0;let o=[];if(t.selectedSize&&!0===t.selectedSize.mediaTypes.includes("video")?o=t.selectedSize.size.sort(e).filter((e=>35843!==e[0]))[0]:t.sizeMappings.some((t=>{if(!0===t.mediaTypes.includes("video")&&Rr()>=t.viewport.size[0])return o=t.size.sort(e).filter((e=>35843!==e[0])),!0})),o.length>0){const e=o[0]>=500?[[640,360],[552,334]]:[[400,225],[300,169]];a.setAttribute("data-freestar-ad",a.getAttribute("data-freestar-ad")+` __${e[0][0]}x${e[0][1]}`)}window.googletag.cmd.push((function(){if(t.sizes&&t.sizes.length||t.fluidAd){let e=zn({elementId:n}),o=freestar.config.channel,d=freestar.config.channel,l=t.dfpId;if(t.dfpId.indexOf("{{channel}}")>-1?o="{{channel}}":t.dfpId.indexOf(freestar.config.channel)>-1?o=freestar.config.channel:t.dfpId.indexOf(freestar.config.orignalChannel)>-1&&(o=freestar.config.orignalChannel),d&&(r.path||o)&&(l=t.dfpId.replace(d,r.path||o),e&&window.googletag.destroySlots&&(e=void 0)),e||(e=Hn({placement:t,slotConfig:{targeting:i},sizes:t.sizes,id:a.id,specialDfpId:l})),e){i={...i,fs_ad_product:es(t),fsrefresh:i?.fsrefresh??"0",fsrebid:i?.fsrebid??"0"};Qi(e,n,s,(()=>void 0!==i&&Object.keys(i).length?i:void 0)())}}}))}}s=s&&s.length?s:t.name,a?o(0,a):function(e,t){let n=document.getElementById(e);n?t(null,n):setTimeout((function(){n=document.getElementById(e),n?t(null,n):t(!0)}),500)}(n,o)}function es(e){if(!e)return"";const t=["revolvingRail","slidingUnit","topAdhesion","standAloneVideo","stickyRail"].filter((t=>{const n=e[t+"Options"];return n?.active})),n=Vi(e);return n&&n.active&&t.push("dynamicAd"),e.stickyFooterOptions?.active&&t.push(!0===e.stickyFooterOptions.video?"stickyFooterVideo":"stickyFooter"),e.interstitialOptions?.active&&t.push("interstitial"),!0===e.lazyAd&&t.push("lazyLoad"),[1,2].includes(e.sideWallOptions?.type)&&t.push("sideWall"),e.pushdownOptions?.isPushdownUnit&&t.push("pushdown"),e?.carouselOptions&&t.push(Yi()?"notcrsl":"crsl"),t.length<=0&&t.push("banner"),t.filter((e=>!ji({name:e}))).join(",")}function ts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n="newAdSlots";if(!freestar.newAdSlotsAllowed)return function(e){let{elements:t=[],channel:n=null}=e;freestar.newAdSlotsQueue.push(new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.elements=e,this.channel=t,this.used=!1}process(){this.used||(freestar.log(1,"Invoking process for queued new ad slot for the following elements ",this.elements),freestar.log(1,"Invoking process for queued new ad slot using the following channel ",this.channel),this.used=!0,freestar.newAdSlots(this.elements,this.channel))}}(t,n))}({elements:e,channel:t}),void freestar.log(1,"The method newAdSlots not allowed while page grabber is active. Placement the following elements / channel in the newAdSlotsQueue : ",arguments);if(freestar.log(10,`${n} invoked`,...arguments),Ur())throw new Error("Ad serving is blocked in "+freestar.locData.iso);if(void 0===e)return;Array.isArray(e)||(e=[e]);let i=q(e=e.filter((e=>{const{placementName:t}=e,i=null!=sa({name:t});return i||freestar.log(30,n,`cannot find placement for ${t}, ignoring`),i})),"slotId");if(!window.freestar.loaded||!window.fsprebid.libLoaded||!window.googletag)return freestar.log(10,n,"Objects not ready, returning..."),freestar.queue.timers=freestar.queue.timers||{},void(freestar.queue.timers&&i[0]&&i[0].slotId&&(freestar.queue.timers[i[0].slotId]&&clearTimeout(freestar.queue.timers[i[0].slotId]),freestar.queue.timers[i[0].slotId]=setTimeout(ts,100,...arguments)));!t&&freestar.config.channel&&(t=freestar.config.channel),freestar.config.orignalChannel||(freestar.config.orignalChannel="{{channel}}"),t&&freestar.config.orignalChannel!=t&&(freestar.log(99,n,"Channel is different than originally set, modifying dfpIds"),freestar.fsdata.placements=freestar.fsdata.placements.map((e=>(e.dfpId=e.dfpId.replace(freestar.config.orignalChannel,t),e))),freestar.config.orignalChannel=t,freestar.log(99,n,"New dfpIDs",freestar.fsdata.placements.map((e=>e.dfpId))));for(let e=0;e<i.length;e++)if(-1===freestar.enabledSlotsCalled.indexOf(i[e].slotId)){Ni(i[e].placementName);const{placementName:t,slotId:n,targeting:s}=i[e],r=document.getElementById(n),o=sa({name:t});o&&(Zi({placement:o,slotId:n,targeting:s,newElement:i[e],element:r}),r&&(Xi({placement:o,element:r,newElement:i[e]}),freestar.newAdSlotsCalled.push(r.id),void 0===i[e].skipSAU&&a.instance.resolve("StickyAd",!0).then((e=>{e?.isSlidingUnit({placement:o})&&e?.attachSlidingUnit({adUnit:o,slotId:n})}))))}Ui()}class ns extends tn{type="bidWon";static payloadProperties=["bidderCode","width","height","statusMessage","adId","creativeId","cpm","rawCpm","bidCpm","adUrl","requestId","responseTimestamp","requestTimestamp","bidder","adUnitCode","timeToRespond","pbLg","pbMg","pbHg","pbAg","pbDg","pbCg","size","alwaysUseBid","bidderRefresh","isRebid","format","placementId","source","rebidType","prebidAuctionStrategy","dropped","fsRefreshCount","fsRebidCount","dealId","adomain","networkCode","impressionId","countryCode","fsAdProduct","auctionId","originalCpm","fsuuid","cdep","isGamBypass","isS2SDisabled","fsAuctionId","auctionTimeout"];_buildPayload(e){return o(e,ns.payloadProperties)}}r.class(class extends ln{constructor(e){let{win:t,freestar:n,dispensaryData:i,auctionManager:s}=e;super({win:t,freestar:n,dispensaryData:i}),this._auctionManager=s,this._dispensaryData=i}create(e){const{mediaType:t,currency:n,adUnitCode:i,auctionId:s}=e,r=this._auctionManager.getAuctionByPrebidAuctionId(s),a=r?r.fsAuctionId:null,o=e.creative_id||e.creativeId,d=bn({adUnitCode:e.adUnitCode,dynamicSlotLibrary:this._freestar.dynamicSlotLibrary}),{isRebid:l,rebidType:c,rebidAttempt:u}=gn({bid:e,placementId:d,rebidManager:this._freestar.rebidManager,fsAuctionId:a,auctionManager:this._auctionManager}),f=sa({name:pn({slotId:i})});return new ns({...e,...this._getMeta(e),...this._getCpm(e),isRebid:l,rebidType:c,fsRebidCount:u,isGamBypass:this._getIsGamBypass(),currencyCode:n,fsuuid:yn({slotId:e.slotId,slot:e.slot,googletag:this._win.googletag}),placementId:d,fsRefreshCount:mn({placementId:d,adUnitCode:e.adUnitCode,refreshLibrary:this._freestar.refreshLibrary}),auctionTimeout:this._getAuctionTimeout(),format:t.length?t:"unknown",fsAdProduct:es(f),networkCode:Number(f.dfpId.split("/")[1]),impressionId:Yr(),isS2SDisabled:wr().isS2SDisabled(),adomain:this._getAdomain(e),creativeId:o&&String(o),cdep:this._dispensaryData.cdep||"",fsAuctionId:a,auctionId:s},Kt)}_getIsGamBypass(){return!wr().isGAMEnabled()}_getMeta(e){const{meta:t={}}=e;return Object.entries(t).reduce(((e,t)=>{let[n,i]=t;return e[n]=Array.isArray(i)?i.join(","):i,e}),{})}_getAdomain(e){const{meta:t={},advertiserDomains:n}=e,i=n||t?.advertiserDomains||[];return Array.isArray(i)?i.join(","):i}},{token:"BidWonAnalyticsEventFactory",defaultAlias:"bidWonAnalyticsEventFactory",dependencies:[Ht.FREESTAR,{token:Ht.WINDOW,alias:"win"},Ht.DISPENSARY_DATA,Ht.AUCTION_MANAGER]});class is extends tn{type="dfpResponse";static payloadProperties=["placementId","DfpId","advertiserId","campaignId","isEmpty","lineItemId","serviceName","size","sourceAgnosticCreativeId","sourceAgnosticLineItemId","complete","auctionId","dfpRefresh","maxBid","fsRefreshCount","fsRebidCount","fstrU","networkCode","impressionId","countryCode","fsAdProduct","fsuuid","itfTargetingValue","fsAuctionId"];_buildPayload(e){return o(e,is.payloadProperties)}}class ss extends dn{constructor(e){let{win:t,freestar:n,prebidManager:i,auctionManager:s}=e;super(),this._window=t,this._freestar=n,this._prebidManager=i,this._auctionManager=s}create(e){const{parentDiv:t,advertiserId:n=0,campaignId:i=0,lineItemId:s=0,sourceAgnosticCreativeId:r=0,sourceAgnosticLineItemId:a=0,placementId:o,fsAuctionId:d,slotId:l}=e,c=this._window.document.getElementById(t),u=freestar.refreshLibrary?.[t]?.refreshId;let f=!1;if(c&&u){let e;const t=RegExp(u,"g");this._freestar.refreshSlots?.forEach(((n,i)=>{t.test(n.refreshId)&&(e=i,f=!0)})),this._freestar.refreshSlots.splice(e,1)}const h=mn({placementId:o,refreshLibrary:this._freestar.refreshLibrary}),{rebidAttempt:p}=gn({bid:{fsAuctionId:d,slotId:l},placementId:o,rebidManager:this._freestar.rebidManager,fsAuctionId:d,auctionManager:this._auctionManager}),m=function(e){let{prebid:t,placementId:n}=e;if(!n)return 0;const i=t?.getBidResponsesForAdUnitCode?.(n);if(!i?.bids?.length)return 0;const s=i.bids.sort(((e,t)=>t.cpm-e.cpm)),[r]=s;return Number(r.cpm)}({placementId:o,prebid:this._prebidManager.instance});return new is({...e,maxBid:Math.trunc(1e4*m),advertiserId:n,campaignId:i,lineItemId:s,dfpRefresh:f,fsRefreshCount:h,fsRebidCount:p,sourceAgnosticCreativeId:r,sourceAgnosticLineItemId:a,itfTargetingValue:this._freestar.identity.targeting,fsuuid:yn({slotId:l,googletag:this._window.googletag})})}}r.class(ss,{token:"DfpResponseAnalyticsEventFactory",dependencies:[Ht.FREESTAR,{token:Ht.WINDOW,alias:"win"},Ht.AUCTION_MANAGER],factory:e=>{let{dependencies:t}=e;return new ss({...t,prebidManager:{get instance(){return t.win.fsprebid}}})}});class rs extends tn{type="outstreamBidWon"}class as extends tn{type="outstreamTagLoad"}class os extends tn{type="sniffer"}class ds extends tn{type="iaiHighImpactTrackings"}class ls extends tn{type="iaiHighImpactAdRequests"}class cs extends tn{type="iaiHighImpactInteractions"}class us extends tn{type="adBlocked"}const fs=0,hs=99;class ps{static _instancesCount=0;constructor(e){const t=d(e?.level)?hs:e.level,n=d(e?.defaultLevel)?hs:e.defaultLevel;this._level=Math.max(t,fs),this._defaultLevel=Math.max(n,fs),this._context=e?.context??"Pubfig",this.id=e?.id??ps._instancesCount,ps._instancesCount+=1}log(e,t){if(this.level===fs)return;const{level:n=this._defaultLevel}=t??{};this.level>=n&&console.info(...this._getLogArguments(e,t))}error(e,t){console.error(...this._getArguments(e,t?.context))}warning(e,t){console.warn(...this._getArguments(e,t?.context))}info(e,t){console.info(...this._getArguments(e,t?.context))}setLevel(e){this._defaultLevel=e}get level(){return this._level}setContext(e){this._context=e}createLogger(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._defaultLevel;return ps._instancesCount+=1,new ps({level:this.level,defaultLevel:t,context:e,id:ps._instancesCount})}_getLogArguments(e){let{context:t,styles:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[`%c${t??this._context}:`,this._getStyles(n),...this._getMessages(e)]}_getStyles(e){if(e)return e;return`background: hsl(${(150+30*this.id)%360}, 40%, 50%); color: #fff; border-radius: 3px; padding: 3px`}_getMessages(e){return Array.isArray(e)?e:[e]}_getArguments(e,t){const n=Array.isArray(e)?e:[e];return[`${t??this._context}: `,...n]}}r.class(ps,{token:Ht.LOGGER,defaultAlias:"logger",injectionMode:s.FOR_FEATURE,dependencies:[Ht.CONFIG_MANAGER],factory:e=>{let{dependencies:{config:t}={}}=e;return new ps({level:t.logLevel})}});const ms="Init",gs="Init complete",bs="analyticsError";class ys{beforeMessageSend(e,t){t(e)}}class vs extends ys{static propertiesToUnalias=["bidder","bidderCode","adapterCode"];beforeMessageSend(e,t){const{payload:n}=e;vs.propertiesToUnalias.forEach((e=>{n[e]&&(n[e]=nt(n[e]))})),t()}}class ws{constructor(e){let{logger:t,mainQueue:n,errorQueue:i,immediateQueue:s,beaconQueue:r,eventBus:a}=e;this._logger=t,this._logger.setContext(Ht.ANALYTICS),this._logger.setLevel(2),this._errorReportingEnabled=Math.random()<=.01,this._mainQueue=n,this._errorQueue=i,this._immediateQueue=s,this._beaconQueue=r,this._middlewares=[],this._eventBus=a,this._topicMap={[Zt]:this._errorQueue,[Xt]:this._beaconQueue,[Kt]:this._immediateQueue,[Jt]:this._mainQueue},this._errorReportingEnabled&&this._eventBus.subscribe(bs,this._reportError),this._init()}_init(){this._logger.log(ms),this._mainQueue.start(),this._logger.log([gs,"Queue processing started."])}addMiddleware(e){if(!(e instanceof ys))throw new Error("Middleware must be an instance of AnalyticsMiddleware");this._middlewares.includes(e)||this._middlewares.push(e)}removeMiddleware(e){this._middlewares=this._middlewares.filter((t=>t!==e))}track(e){if(!e.type||!e.payload)return void this._logger.error("Invalid event type. event must be an instance of AnalyticsEvent.");const t=this._applyBeforeSendMiddleware(e);if(!t)return;(this._topicMap[t.topic]||this._topicMap[Jt]).enqueue(t)}_reportError=e=>{let{payload:t}=e;this._errorQueue.enqueue(new nn({eventName:"MESSAGE_ERROR",eventType:t.details?.status,data:{error:t.details,message:t.message,timestamp:(new Date).toISOString()}}))};_applyBeforeSendMiddleware(e){const t=this._middlewares.filter((e=>e.beforeMessageSend));if(!t.length)return e;try{const n=()=>{if(!t.length)return;t.shift().beforeMessageSend(e,n)};return n(),e}catch{return null}}}r.class(ws,{token:Ht.ANALYTICS,defaultAlias:"analytics",dependencies:[Ht.LOGGER,Ht.MAIN_QUEUE,Ht.ERROR_QUEUE,Ht.IMMEDIATE_QUEUE,Ht.BEACON_QUEUE,Ht.EVENT_BUS],factory:e=>{let{dependencies:t}=e;const n=new ws(t);return n.addMiddleware(new vs),n}});class Is{enqueue(){throw new Error("Method not implemented")}}class _s extends Is{_name="DelayedQueue";constructor(e){let{analyticsMessageFactory:t,eventBus:n,logger:i,api:s,batchLimit:r=Qt,intervalMs:a=Yt}=e;super(),this._eventBus=n,this._logger=i,this._messageFactory=t,this._logger.setContext(`Analytics Queue: ${this._name}`),this._logger.setLevel(2),this._queue=[],this._api=s,this._intervalMs=a,this._batchLimit=r,this._isProcessing=!1,this._intervalId=null}enqueue(e){const t=this._queue[this._queue.length-1];t&&t.size<this._batchLimit?t.addEvent(e):this._queue.push(this._messageFactory.create({events:[e]}))}start(){this._processQueue(),this._intervalId=setInterval((()=>{this._processQueue()}),this._intervalMs)}stop(){clearInterval(this._intervalId)}async _processQueue(){if(this._isProcessing)return;const e=this._queue.shift();if(e?.size)try{this._isProcessing=!0,await this._api.send(e.getJSON())}catch(e){this._logger.warning(["Failed to process queue",e]),this._eventBus.emit(bs,e)}finally{this._isProcessing=!1}}}class Ss extends Is{_name="ImmediateQueue";constructor(e){let{analyticsMessageFactory:t,eventBus:n,logger:i,api:s,reportErrors:r=!0}=e;super(),this._eventBus=n,this._logger=i,this._messageFactory=t,this._logger.setContext(`Analytics Queue: ${this._name}`),this._logger.setLevel(2),this._queue=[],this._api=s,this._reportErrors=r,this._isProcessing=!1}enqueue(e){this._queue.push(this._messageFactory.create({events:[e]})),this._processQueue()}async _processQueue(){for(;this._queue.length;)try{const e=this._queue.shift();if(!e?.size)continue;await this._api.send(e.getJSON())}catch(e){this._logger.warning(["Failed to process queue",e]),this._reportErrors&&this._eventBus.emit(bs,e)}}}class Es extends Is{_name="BeaconQueue";constructor(e){let{analyticsMessageFactory:t,logger:n,api:i}=e;super(),this._messageFactory=t,this._api=i,this._logger=n,this._logger.setContext(`Analytics Queue: ${this._name}`),this._logger.setLevel(2),this._queue=[]}enqueue(e){const t=this._messageFactory.create({events:[e]});this._sendBeacon(t)}_sendBeacon(e){try{this._api.sendBeacon(e.getJSON())}catch(e){this._logger.warning(["Failed to send beacon",e])}}}const As=[Ht.EVENT_BUS,Ht.LOGGER,{token:Ht.DATA_COLLECTOR_API,alias:"api"},Ht.ANALYTICS_MESSAGE_FACTORY];class ks extends _s{_name=Ht.MAIN_QUEUE}class xs extends Ss{_name=Ht.IMMEDIATE_QUEUE}r.class(ks,{token:Ht.MAIN_QUEUE,defaultAlias:"mainQueue",dependencies:As,factory:e=>{let{dependencies:t}=e;return new ks({...t,batchLimit:Qt,intervalMs:Yt})}}),r.class(xs,{token:Ht.ERROR_QUEUE,defaultAlias:"errorQueue",dependencies:As,factory:e=>{let{dependencies:t}=e;return new xs({...t,reportErrors:!1})}}),r.class(Ss,{token:Ht.IMMEDIATE_QUEUE,defaultAlias:"immediateQueue",dependencies:As}),r.class(Es,{token:Ht.BEACON_QUEUE,defaultAlias:"beaconQueue",dependencies:[Ht.ANALYTICS_MESSAGE_FACTORY,Ht.LOGGER,Ht.EVENT_BUS,{token:Ht.DATA_COLLECTOR_API,alias:"api"}],factory:e=>{let{dependencies:t}=e;return new Es({analyticsMessageFactory:t.analyticsMessageFactory,api:t.api,eventBus:t.eventBus,logger:t.logger})}});r.class(class{_events;constructor(){this._events={}}subscribe(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)}unsubscribe(e,t){this._events[e]&&(this._events[e]=this._events[e].filter((e=>e!==t)))}emit(e,t){this._events[e]&&this._events[e].forEach((n=>n({eventName:e,payload:t})))}hasSubscribers(e){return Boolean(this._events[e]?.length)}},{token:Ht.EVENT_BUS,defaultAlias:"eventBus"});const Ts="GUM_GUM_LOADED",Cs="STICKY_FOOTER_RESIZE",Rs=[{owner:"google",ua:"googlebot"},{owner:"google",ua:"mediapartners-google"},{owner:"google",ua:"adsbot-google"},{owner:"bing",ua:"bingbot"},{owner:"yahoo",ua:"slurp"},{owner:"duckduckgo",ua:"duckduckbot"},{owner:"baidu",ua:"baiduspider"},{owner:"yandex",ua:"yandexbot"},{owner:"exabot",ua:"konqueror/3.5"},{owner:"exabot",ua:"Exabot/3.0"},{owner:"facebook",ua:"facebot"},{owner:"facebook",ua:"facebookexternalhit/1.0"},{owner:"facebook",ua:"facebookexternalhit/1.1"},{owner:"alexa",ua:"ia_archiver"}];r.class(class{constructor(e){let{win:t,analytics:n}=e;this._win=t,this._analytics=n,this._isDetected=!1}get isDetected(){return this._isDetected}checkForBot(){const e=this._win.navigator?.userAgent||navigator.userAgent,t="fs.bot.found",n=at({name:t});n&&!0===Boolean(n)?this._handleBotDetected(t,e):e&&!n&&(Rs.forEach((n=>{RegExp(n.ua.toLowerCase()).test(e.toLowerCase())&&this._handleBotDetected(t,e)})),rt({name:t,value:!1}))}_handleBotDetected(e,t){throw this._isDetected=!0,this._trackEvent(),rt({botCookieName:e,value:!0}),`pubfig code disabled as the user agent ${t} is a bot`}_trackEvent(){this._analytics.track(new nn({eventName:"BOT_DETECTED",eventType:"botDetected",data:{detected:!0}}))}},{token:"BotTraffic",dependencies:[Ht.ANALYTICS,{token:"window",alias:"win"}]});const Os=()=>{const e=Ps();return e?.offsetHeight||0},Ps=()=>(freestar?.currentStickyFooter?.footer||freestar?.currentStickyFooter||{}).slotWrapper,Ns=["kargo","teads","seedtag"];class Ds{constructor(e){let{type:t,prebidAuctionId:n=null}=e;this.fsAuctionId=Yr(),this.type=t,this.prebidAuctionId=n,this.adUnits=new Set,this.reportedPlacements=new Set,this.timestamp=Date.now()}addAdUnit(e){this.adUnits.add(e)}getAdUnits(){return Array.from(this.adUnits)}isAuctionEndReported(e){return this.reportedPlacements.has(e)}}const Ls={"scribd-com":{clientId:"ca-pub-1211639399720391",sizes:{"300x100":6475080870,"300x250":7125817567,"300x50":1716797968,"320x100":9052362509,"320x50":4499654227,"336x280":4367012037,"468x60":5113117491,"728x90":7843222610,"970x250":5105378639,"970x90":6338569255}}},Ms=()=>freestar?.config?.adsense||Ls[Lt()];const Bs=new class{constructor(){this.params=!1,this.init()}init(){this.params=Ms()}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!Ms())return;this.params||(this.params=Ms()),window.adsbygoogle||(Tn("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"),window.adsbygoogle=[]);const t=Bn.getAdUnitByPrebidCode(e),{placement:n}=t,i=(e=>{let{placement:t,sizesAllowed:n=!1}=e,{sizes:i}=t;return i=i.filter((e=>Array.isArray(e))),Array.isArray(n)&&(i=i.filter((e=>-1!==n.indexOf(e.join("x"))))),i.sort(((e,t)=>t[0]+t[1]-(e[0]+e[1])))[0]})({placement:n,sizesAllowed:Object.keys(this.params.sizes)});document.getElementById(e).innerHTML=`<ins class="adsbygoogle"\n            style="display:block; width:${i[0]}px; height:${i[1]}px;"\n            data-ad-client="${this.params.clientId}"\n            data-ad-slot="${this.params.sizes[i.join("x")]}"\n        ></ins>`,window.adsbygoogle.push({})}},Fs="PREBID",Us="PREBID-GAM",$s="GAM";class zs{constructor(e){let{adUnitManager:t,analytics:n,prebidManager:i,gamManager:s,idealAdStackManager:r,rebidManager:a,dispensaryData:o,logger:d,nativeRenderManager:l}=e;this._adUnitManager=t,this._idealAdStackManager=r,this._analytics=n,this._prebidManager=i,this._gamManager=s,this._rebidManager=a,this._dispensaryData=o,this._nativeRenderManager=l,this._logger=d,this._logger.setContext(Ht.AUCTION_MANAGER),this.auctions=new Map,this._bindPrebidEvents(),this._bindGamEvents(),this._listeners={auctionInit:[]}}addEventListener(e,t){if(!this._listeners[e])throw new Error(`Invalid event type: ${e}`);this._listeners[e].includes(t)||this._listeners[e].push(t)}removeEventListener(e,t){this._listeners[e]=this._listeners[e].filter((e=>e!==t))}_bindGamEvents(){this._gamManager.instance.pubads().addEventListener(Ut,this._handleSlotRequested.bind(this)),this._gamManager.instance.pubads().addEventListener(Ft,this._handleSlotRenderEnded.bind(this))}_bindPrebidEvents(){this._prebidManager.instance.onEvent($t,this._handleAuctionInit.bind(this)),this._prebidManager.instance.onEvent(zt,this._handleAuctionEnd.bind(this))}_createAuction(e){const t=new Ds({type:e,prebidAuctionId:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null});return this.auctions.set(t.fsAuctionId,t),t}_handleAuctionInit(e){const{adUnits:t,auctionId:n}=e,i=this._idealAdStackManager.isGAMEnabled()?Us:Fs,s=this._createAuction(i,n),r=s.fsAuctionId;t.forEach((e=>{const{code:t}=e,a=this._adUnitManager.getAdUnitByPrebidCode(t);a&&(a.saveState({fsAuctionId:r,auctionType:i,prebidAuctionId:n}),s.addAdUnit(a),this._trackAuctionStart(a,r,i,n))})),this._listeners.auctionInit.forEach((e=>e(s)))}_handleAuctionEnd(e){var t=this;const{auctionId:n}=e,i=this.getAuctionByPrebidAuctionId(n);i&&i.adUnits.forEach((s=>{const r=function(r){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t._trackAuctionEnd(s,i.fsAuctionId,r,e,n,a,!1)};if(i.type===Fs){const e=this._nativeRenderManager.getHighestBid(s.prebid.code);e?this._nativeRenderManager.renderAd(e,s.prebid.code).then((()=>{r(Fs,!0)})):Ms()&&s.isDisplayAd()?Bs.render(s.prebid.code):r(Fs)}else s.slot||r(Us)}))}_handleSlotRequested(e){const{slot:t}=e,n=this._adUnitManager.getAdUnitBySlotElementId(t.getSlotElementId());if(n){const e=t.getTargeting("fs-auuid")[0],i=this.getAuctionByFsAuctionId(e);if(i?.type===Us||i?.type===Fs)return;const s=this._createAuction($s);n.saveState({fsAuctionId:s.fsAuctionId,auctionType:$s}),this._trackAuctionStart(n,s.fsAuctionId,$s)}}_handleSlotRenderEnded(e){var t=this;const{slot:n}=e,i=n.getSlotElementId(),s=this._adUnitManager.getAdUnitBySlotElementId(i);if(!s)return;const r=n?.getTargeting("fs-auuid")[0],a=this.getAuctionByFsAuctionId(r);if(!a)return;const o=function(){let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t._trackAuctionEnd(s,r,a.type,e,a.prebidAuctionId,n,n)};if(B("fs-force-rebid"))return this._rebidEmptySlot(e,i),o(),void this._logger.log("When in 'fs-force-rebid' mode, ads will not be rendered natively");if(!e.isEmpty)return o(),void this._rebidManager.resetRebidStatus(i);if(Ms()&&s.isDisplayAd())return void Bs.render(i);const d=this._nativeRenderManager.getHighestBid(i);d?this._nativeRenderManager.renderAd(d,i).then((()=>{o(!0)})).catch((e=>{this._logger.log(`Error native rendering prebid ad: ${e}`)})):(this._rebidEmptySlot(e,i),o())}_rebidEmptySlot(e,t){!this._dispensaryData.fsdata.secondAuctionDisabled&&this._idealAdStackManager.isRebidAllowed()&&this._rebidManager.handleNoBidScenario(e,t)}_trackAuctionStart(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const s={...this._buildBaseAuctionPayload(e,t,n,i),fsAuctionId:t};this._analytics.track(new rn(s))}_trackAuctionEnd(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;const o=this.getAuctionByFsAuctionId(t);if(o&&!o.reportedPlacements.has(e.placement.name)){const d=this._buildAuctionEndPayload(e,t,n,i,s,r,a);this._analytics.track(new an(d)),o.reportedPlacements.add(e.placement.name)}}_buildAuctionEndPayload(e,t,n,i,s,r,a){return{...this._buildBaseAuctionPayload(e,t,n,s),...this._extractAuctionEndData(i),...this._calculateAuctionStatusFields(t,n,i,r,a),fsAuctionId:t,winningBid:e.getWinningBid(),isS2SDisabled:this._idealAdStackManager.isS2SDisabled()}}_buildBaseAuctionPayload(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{placementId:e.placement.name,DfpId:e.slot?.getAdUnitPath(),fsAuctionId:t,auctionId:i,auctionType:n,location:freestar.locData??{},userIds:this._prebidManager.instance.getConfig().userSync.userIds.map((e=>e.name)),kvps:e.getKVPs()}}_extractAuctionEndData(e){return{...e,size:JSON.stringify(e.size)}}_calculateAuctionStatusFields(e,t,n,i,s){let r,a;return t===Fs?(r=!0,a=!i):(r=!1,a=n.isEmpty&&!i&&!s),{isNativeRender:i,isGamBypass:r,unfilled:a}}getAuctionByFsAuctionId(e){return this.auctions.get(e)||null}getAuctionByPrebidAuctionId(e){return Array.from(this.auctions.values()).find((t=>t.prebidAuctionId===e))||null}}r.class(zs,{token:Ht.AUCTION_MANAGER,dependencies:[Ht.ANALYTICS,Ht.FREESTAR,Ht.PREBID_MANAGER,Ht.GAM_MANAGER,Ht.DISPENSARY_DATA,Ht.LOGGER,Ht.NATIVE_RENDER_MANAGER],factory:async e=>{let{dependencies:t}=e;return await t.prebidManager.ready,await t.gamManager.ready,new zs({...t,idealAdStackManager:wr(),adUnitManager:Bn,rebidManager:ai})}});const qs="_FOOTER_ONLY";function js(e){return!0===e?.freestarBrandingDisabled?null:e?.stickyFooterOptions?.active?Hs():Vs()}function Vs(){const{branding:e}=freestar.fsdata;return e&&"NO_BRANDING"!==e&&!e.endsWith(qs)?e:null}function Hs(){const{branding:e}=freestar.fsdata;return e&&"NO_BRANDING"!==e?e.endsWith(qs)?e.slice(0,-qs.length):e:null}function Gs(){return"true"===B("fsreportad")||freestar?.fsdata?.adQualityOptions?.confiantReportThisAdEnabled&&wr().allowConfiant()}const Ws=e=>{let{placement:t,sizes:n}=e;if(!t)return!1;const{pushdownOptions:i,stickyFooterOptions:s,interstitialOptions:r}=t;return!(i?.isPushdownUnit||s?.active||r?.active||Gr(n))},Ys=e=>{let{ancillary:t,placement:n}=e;const i=kn({type:"div",classList:["__fs-branding"]}),s=Qs(n),r=Ks(n);s&&r&&(s.appendChild(r),i.appendChild(s)),t.appendChild(i)},Qs=e=>{try{const t=es(e);return kn({type:"a",attributes:[{href:`https://ads.${g}/?utm_campaign=branding&utm_medium=${t}&utm_source=${window.freestar.fsdata.domain}&utm_content=${e.name}`},{target:"_blank"},{rel:"noreferrer"}]})}catch(e){console.error(e)}},Ks=e=>{try{const t=js(e);if(!t)return;return kn({type:"img",src:`${b}/imgs/fslogo-${t.toLowerCase()}.svg`,attributes:[{alt:"freestar"},{width:"14"},{height:"14"}]})}catch(e){console.error(e)}};function Js(e,t,n){const i=function(e,t){if(freestar.currentStickyFooter&&freestar.currentStickyFooter.placement){if(freestar.currentStickyFooter.placement.name===t.id)return"sticky-reportThisAd";if(e.pushdownOptions.isPushdownUnit)return"pushdown-reportThisAd"}return null}(t,n),s=n.id,r=kn({id:`__fs-reportThisAd-${s}`}),o=`btn-${s}`,d=kn({classList:["report-ad-container",i]}),l=kn({type:"button",id:o,classList:["report-ad-button"],attributes:[{"aria-label":"Report this ad"}]});l.style.fontSize="12px",l.style.color="black",l.style.textDecoration="none",l.style.cursor="pointer",l.style.background="none",l.style.marginLeft="auto",l.style.marginRight="auto",l.style.display="block",l.style.border="none",l.innerHTML="Report this ad",a.instance.resolve(Ht.CONFIANT).then((e=>{l.addEventListener("click",(function(t){const n=t.target.id.slice(4);e.reportSingleAd(n)}))})),t.stickyFooterOptions&&t.stickyFooterOptions.active&&(freestar.deviceInfo.device.type===He&&("sticky-reportThisAd"===i&&(d.style.top="46px",d.style.right="0px"),l.style.marginTop="5px"),"NO_BRANDING"!==freestar.fsdata.branding&&(l.style.display="none")),d.appendChild(l),r.appendChild(d),e.style.position="relative",e.appendChild(d)}const Xs=e=>{let{ancillary:t,placement:n,element:i}=e;null===i.querySelector(".report-ad-container")&&!0!==n?.adQualityOptions?.disabled&&(freestar.fsdata.reportThisAd||Gs())&&"CONFIANT"==Qe()&&freestar?.fsdata?.adQualityOptions?.confiantReportThisAdEnabled&&wr().allowConfiant()&&Js(t,n,i)};function Zs(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.getElementById(e);if(!n)return{element:null,target:null,targetIFrame:null,placement:null};let i=null,s=null;t?(s=n.querySelector('iframe[id*="_fs-ad-"]'),i=s?n:null):(i=n.querySelector('div[id*="google_ads_iframe_"]'),s=i?.querySelector("iframe"));const r=!!n&&sa({name:n.getAttribute("name")||n.parentNode.getAttribute("name")});return{element:n,target:i,targetIFrame:s,placement:r}}function er(e){const{element:t,target:n,targetIFrame:i,placement:s}=e;t&&n&&i&&s?i.addEventListener("load",(()=>{i.offsetWidth<=1||i.offsetHeight<=1?freestar.log(20,"not applying ancillary, targetIFrame is too small",i):(e.element.classList.contains("_fs-sf-ad")||function(e){let{element:t,target:n,targetIFrame:i,placement:s}=e;if(!js(s))return void freestar.log(20,"not applying branding, feature not active for placement",t.id,s);const r=s.sizes.sort().reverse();if(!isNaN(r[0][0])&&!Ws({placement:s,sizes:r}))return void freestar.log(20,"not applying report-this-ad based on sizes or non-standard product type",t.id,r,s);const a=tr(n);a.querySelector(".__fs-branding")?freestar.log(20,"Not applying branding, already exists!",t.id):(freestar.log(20,"applying branding",t.id),Ys({ancillary:a,placement:s}));sr(t,i,a,r)}(e),function(e){let{element:t,target:n,targetIFrame:i,placement:s}=e;if(!Gs())return void freestar.log(20,"not applying report-this-ad, feature not active");const{stickyFooterOptions:r}=s,a=s.sizes.sort().reverse();if(!isNaN(a[0][0])&&!Ws({placement:s,sizes:a})&&!r.active)return void freestar.log(20,"not applying report-this-ad based on sizes or non-standard product type",t.id,a,s);const o=r.active?n:tr(n);freestar.log(20,"applying report-this-ad",t.id),Xs({ancillary:o,placement:s,element:t}),r.active||sr(t,i,o,a)}(e))}),{once:!0}):freestar.log(20,"not applying ancillary, missing attribute",{element:t,target:n,targetIFrame:i,placement:s})}function tr(e){let t=e.querySelector(".__fs-ancillary");return t||(t=kn({type:"div",classList:["__fs-ancillary"]}),e.appendChild(t)),t}const nr={},ir=10;function sr(e,t,n,i){freestar.log(20,"setting ancillary style timeout",e.id),clearTimeout(nr[e.id]);const s=t.width<=1?1500:ir;nr[e.id]=setTimeout((()=>{freestar.log(20,"ancillary style timeout fired",e.id),n.style.setProperty("--childWidth",function(e,t){if(t<2)return"fluid"===e[0]?"100%":e[0][0]+"px";const n=Number(t);return isNaN(n)&&t.includes("%")?t:`${n}px`}(i,t.width||"300")),n.style.setProperty("visibility","visible")}),s)}class rr{constructor(e){let{prebidManager:t,adUnitManager:n,logger:i}=e;this._prebidManager=t,this._adUnitManager=n,this._logger=i,this._logger.setContext(Ht.NATIVE_RENDER_MANAGER)}getHighestBid(e){const t=this._prebidManager.instance.getBidResponsesForAdUnitCode(e);if(t.bids&&t.bids.length>0){const e=t.bids.filter((e=>"rendered"!==e.status&&(e=>{const t=nt(e.bidderCode);if(!Ns.some((e=>nt(e)===t)))return!0;const{width:n,height:i,ad:s}=e;if(!s||!n||!i)return!0;const r=String(s).toLowerCase().includes(`${n}x${i}`);return r||freestar.log(10,`Invalid ad size for ${e.bidderCode} bid: ${n}x${i}`),r})(e)));if(e.length>0)return e.sort(((e,t)=>t.cpm-e.cpm)),e[0]}return null}getAdUnit(e){return this._adUnitManager.getAdUnitBySlotElementId(e)}async renderAd(e,t){if("none"===document.getElementById(t).style.display)return;const n=this.getAdUnit(t);if(!n)return void console.warn(`[nativeRender-renderAd] AdUnit not found for elementId: ${t}`);if(n.renderMap.has(e.adId))return;if(n.renderMap.set(e.adId,!0),n.placement){if(n.placement.stickyFooterOptions.active){const n=new CustomEvent(Vt,{detail:{elementId:t,height:e.height+4}});document.dispatchEvent(n)}n.placement.pushdownOptions.isPushdownUnit&&freestar.pushdownControl&&freestar.pushdownControl.applyControlsToNativeRender()}await this.clearExistingAd(t);const i=this.createAdElement(e);document.getElementById(t).appendChild(i),this.executeRenderAd(e.adId),this.applyAncillary(t)}applyAncillary(e){er(Zs(e,!0))}clearExistingAd(e){return new Promise((t=>{const n=document.getElementById(e);if(!n)return;const i=n.querySelector("#_fs-ad-iframe-container");i&&i.remove();n.querySelectorAll('div[id*="google_ads_iframe"]').forEach((e=>e.remove())),Object.values(T).forEach((e=>{n.querySelectorAll(e).forEach((e=>{e.parentNode.removeChild(e)}))})),t()}))}createAdElement(e){return kn({id:"_fs-ad-iframe-container",children:[kn({type:"iframe",id:`_fs-ad-${e.adId||e.amzniid}`,attributes:[{width:e.width||"100%",height:e.height||"100%",frameBorder:"0",marginHeight:"0",marginWidth:"0",scrolling:"no"}]})]})}executeRenderAd(e){this._prebidManager.instance.renderAd(document.querySelector(`#_fs-ad-${e}`).contentWindow.document,e),this._logger.log(`rendered #_fs-ad-${e} natively`)}}r.class(rr,{token:Ht.NATIVE_RENDER_MANAGER,dependencies:[Ht.PREBID_MANAGER,Ht.LOGGER],factory:async e=>{let{dependencies:t}=e;return await t.prebidManager.ready,new rr({...t,adUnitManager:Bn})}});var ar="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function or(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function dr(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})})),n}var lr=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===cr}(e)}(e)};var cr="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function ur(e,t){return!1!==t.clone&&t.isMergeableObject(e)?gr((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function fr(e,t,n){return e.concat(t).map((function(e){return ur(e,n)}))}function hr(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function pr(e,t){try{return t in e}catch(e){return!1}}function mr(e,t,n){var i={};return n.isMergeableObject(e)&&hr(e).forEach((function(t){i[t]=ur(e[t],n)})),hr(t).forEach((function(s){(function(e,t){return pr(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,s)||(pr(e,s)&&n.isMergeableObject(t[s])?i[s]=function(e,t){if(!t.customMerge)return gr;var n=t.customMerge(e);return"function"==typeof n?n:gr}(s,n)(e[s],t[s],n):i[s]=ur(t[s],n))})),i}function gr(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||fr,n.isMergeableObject=n.isMergeableObject||lr,n.cloneUnlessOtherwiseSpecified=ur;var i=Array.isArray(t);return i===Array.isArray(e)?i?n.arrayMerge(e,t,n):mr(e,t,n):ur(t,n)}gr.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return gr(e,n,t)}),{})};var br=or(gr);class yr{prebidNameSpace="fsprebid";constructor(e){let{window:t,freestar:n,dispensaryData:i,logger:s,analytics:r,prebidManager:a,rebidManager:o}=e;this._win=t,this._freestar=n,this._dispensaryData=i,this._logger=s,this._logger.setContext("Confiant"),this._logger.setLevel(50),this._analytics=r,this._rebidManager=o,this._prebidManager=a}async init(){await this._loadScript(),this._logger.log("Confiant module initialized")}async _loadScript(){const{adQualityOptions:e}=this._dispensaryData.fsdata||{};if(e&&"CONFIANT"===e.vendor&&(e.desktopEnabled||e.mobileEnabled)){const t=e.vendorId;this._buildBasicConfiantObject(),await Cn(`https://cdn.confiant-integrations.net/${t}/gpt_and_prebid/config.js`),this._logger.log("Inserted Confiant script"),this._subscribe()}}_buildBasicConfiantObject(){this._win.confiant=this._win.confiant||{},this._win.confiant.prebidNameSpace=this.prebidNameSpace,this._win.confiant.callback=(e,t,n,i,s,r)=>{this._win.postMessage({message:"CONFIANT_CALLBACK",isBlocked:n,impressionData:r})}}_sendMessage(e){let{args:t}=e;this._analytics.track(new us(t))}_subscribe(){this._win.addEventListener("message",this._handleEvent.bind(this))}_handleEvent=e=>{const{data:t}=e;if("CONFIANT_CALLBACK"===t.message&&1===t.isBlocked){const e=t.impressionData||{},n=e.prebid?.s||e.dfp?.s;if(!n)return void this._logger.log("domId not found in impressionData");e.prebid?this._prebidBlockProcess(e):this._dfpBlockProcess({domId:n}),this._rebidBlockedAd({domId:n})}};_prebidBlockProcess(e){const{adId:t}=e.prebid,n=this._win.fsprebid.getAllWinningBids().find((e=>e.adId===t));if(n){const e=Object.keys(n).reduce(((e,t)=>("adserverTargeting"!==t&&"ad"!==t&&(e[t]=n[t]),e)),{}),t=br({blockingType:"prebid",isBlocked:!0,bidCpm:e.cpm},e);this._sendMessage({args:t}),this._prebidBlockExcludeBidderSet({bidResponse:n})}}_prebidBlockExcludeBidderSet(e){let{bidResponse:t}=e;const n=ze(Ye);n.includes(t.bidder)||n.push(t.bidder),qe({key:We,value:n,type:$e.array}),this._removeBidder(t)}_removeBidder(e){let{bidder:t}=e;this._prebidManager.instance.adUnits.forEach((e=>{e.bids=e.bids.filter((e=>nt(e.bidder)!==nt(t)))}))}_dfpBlockProcess(e){let{domId:t}=e;const n={blockingType:"dfp",isBlocked:!0,adUnitCode:t};this._sendMessage({args:n})}_rebidBlockedAd(e){let{domId:t}=e;this._rebidManager.track({elementId:t}),this._rebidManager.isAbleToRebid({elementId:t})?(this._logger.log(`Rebid for blocked ad on ${t}`),this._freestar?.freestarReloadAdSlot?.(t)):this._logger.log(`Rebid attempt maximum reached for ${t}. There will not be another attempt to fill`)}reportSingleAd(e){try{this._win.confiant.services().reportSingleAd(e)}catch(e){alert("Unable to report the ad: "+e.toString())}}}r.class(yr,{token:Ht.CONFIANT,defaultAlias:"confiant",dependencies:[Ht.WINDOW,Ht.FREESTAR,Ht.DISPENSARY_DATA,Ht.LOGGER,Ht.ANALYTICS,Ht.PREBID_MANAGER],factory:async e=>{let{dependencies:t}=e;await t.prebidManager.ready;return new yr({...t,rebidManager:ai})}}),r.object({token:Ht.CONFIG_MANAGER,dependencies:[Ht.FREESTAR],defaultAlias:"config",factory:e=>{let{dependencies:t}=e;const n=t.freestar?.configManager??{};return delete t.freestar?.configManager,n}}),r.object({token:Ht.DISPENSARY_DATA,defaultAlias:"dispensaryData",dependencies:[Ht.FREESTAR],factory:e=>{let{dependencies:t}=e;const{freestar:n}=t,i=n.dispensaryData||{};return delete n.dispensaryData,i}});const vr={title:"IDEAL AD STACK v3.0"};window.freestar=window.freestar||{};const wr=vt.getInstanceFn({ClassConstructor:class{constructor(){this.active=!0,this.config=null,this.configByRtt=null,this.refreshCallback=()=>this.refreshData(),this.refreshingInProgress=!0,this.logs=new pt,this.init(),this.asyncInit(),this.bidderSummary=null,this.debugOrTestSession=null,this.alwaysBypassFirstAuction=null,this.refreshCategories=null,this.fallbackConfig=null,this.allowedBothBidders=null}init(){let e,t,n;const i=wt().get({requestId:"getIdealData"});if(i)({config:e,source:t,errors:n}=this.parseRequestHandlerResult(i));else{const i=mt({key:_t});i?(e=i,n=[],t=St):(e={},n=["data not yet available"],t=Et)}this.logs.add(`Got config from ${t}`),n.length>0&&(this.sendErrorMessage(n),this.logs.add("Config invalid!",JSON.stringify(e))),this.setConfig(e),this.setKVPs(),this.logs.show(vr)}setConfig(e){this.config=e,this.setConfigByRtt()}sendErrorMessage(e){a.instance.resolve(Ht.ANALYTICS).then((t=>{t.track(new nn({eventName:"DYNAMIC_AUCTION_TIMEOUT_TEST",eventType:"ERRORS",data:{errors:e.join(", ")}}))}))}sessionStoreConfig(e){let{config:t}=e;const n=t?.floors,i=!Pt({siteId:freestar.fsdata.siteId}),s=t?.testGroup;i&&(!n&&"experiment"!==s||n?.error)?function(e){let{key:t,value:n}=e;gt({key:t,value:n,expiry:Date.now()+9e5})}({key:_t,value:t}):i&&0===n?.length?function(e){let{key:t,value:n}=e;gt({key:t,value:n,expiry:Date.now()+3e5})}({key:_t,value:t}):function(e){let{key:t,value:n}=e;gt({key:t,value:n,expiry:Date.now()+36e5})}({key:_t,value:t})}async asyncInit(){const e=await wt().fetch({requestId:"getIdealData",fetchFn:Dt}),{config:t,source:n,errors:i}=this.parseRequestHandlerResult(e);n===Et&&0===i.length&&this.sessionStoreConfig({config:t}),t.knownUser||this.bindEvents(),this.refreshingInProgress=!1}async refreshData(){if(this.refreshingInProgress)return;this.refreshingInProgress=!0;const e=await wt().fetch({requestId:"getIdealData",fetchFn:Dt});if(!this.parseRequestHandlerResult(e).config.knownUser&&yt.isKnown){wt().clearClassCachedData({requestId:"getIdealData"});const e=await wt().fetch({requestId:"getIdealData",fetchFn:Nt}),{config:t,source:n,errors:i}=this.parseRequestHandlerResult(e);n===Et&&0===i.length&&(this.sessionStoreConfig({config:t}),window.freestar.queue.push((()=>{window.fsprebid.offEvent(zt,this.refreshCallback)})))}this.refreshingInProgress=!1}bindEvents(){window.freestar&&window.freestar.queue&&window.freestar.queue.push((()=>{window.fsprebid.onEvent(zt,this.refreshCallback)}))}parseRequestHandlerResult(e){let t,n,i;const{data:s,error:r}=e;return r?(t={},i=[r.toString()]):(({data:t,source:n}=s),i=n===Et?this.getErrors(t):[]),{config:t,source:n,errors:i}}_buildRefreshCategories(){const e=[];let t;return null!=this.config.roundTripTime&&(t=Number(this.config.roundTripTime)),null!=t&&!Number.isNaN(t)&&this.config.clientServerRefresh&&this.config.clientServerRefresh.forEach((n=>{const{clientServerRTT:i,lessThan:s}=n,r=Ir(t,i);r?.config&&e.push({lessThan:s,config:r.config})})),e}getRefreshCategories(){return this.refreshCategories||(this.refreshCategories=this._buildRefreshCategories()),this.refreshCategories}_chooseFallbackConfig(){if(this.config.clientServerRTT&&null!=this.config.roundTripTime){const e=Number(this.config.roundTripTime);if(!Number.isNaN(e)){const t=Ir(e,this.config.clientServerRTT);if(t)return t.config}}return this.config}getFallbackConfig(){return this.fallbackConfig||(this.fallbackConfig=this._chooseFallbackConfig()),this.fallbackConfig}_buildBidderSummary(){const e=Object.fromEntries(window.freestar.fsdata.networks.map((e=>[e.slug,e.isPrebidServer?"server":"client"])));return window.freestar.fsdata.placements.forEach((function(t){t.networks.forEach((t=>{e[t.slug]?t.isPrebidServer&&"client"===e[t.slug]&&(e[t.slug]=At.BOTH):e[t.slug]=t.isPrebidServer?"server":"client"}))})),this.getRefreshCategories().map((e=>e.config)).concat(this.getFallbackConfig()).filter((e=>e?.clientServer)).forEach((t=>{const{clientServer:n}=t;Object.entries(n).forEach((t=>{let[n,i]=t;"off"!==i&&e[n]!==At.BOTH&&(e[n]?e[n]!==i&&(e[n]=At.BOTH):e[n]=i)}))})),e}getDefaultConfig(e){let{placement:t}=e,n=Object.fromEntries(window.freestar.fsdata.networks.map((e=>[e.slug,e.isPrebidServer?"server":"client"])));if(!t)return n;t.ignoreSiteBidders&&(n={});const i=Object.fromEntries(t.networks.map((e=>[e.slug,e.isPrebidServer?"server":"client"])));return{...n,...i}}getConfigByRtt(){return this.configByRtt}setConfigByRtt(){let e,t;if(null!=this.config.roundTripTime&&(t=Number(this.config.roundTripTime),!Number.isNaN(t)&&this.config.clientServerRTT))for(const n of this.config.clientServerRTT)t<n.lessThan&&(!e||e.lessThan>n.lessThan)&&(e=n);this.configByRtt=(e||this).config}getConfig(e){let{placement:t=null,refresh:n=0}=e;const i=this.getDefaultConfig({placement:t}),s=this._getConfigByRefresh({refresh:n}),r=s.clientServer||{},a=this.applyTestSessionOverride({...i,...r}),{clientServer:o,updated:d}=this.applyAllowedBothBidderOverride({placement:t,clientServer:a});return d?{...s,clientServer:o,clientServerMask:void 0}:{...s,clientServer:o}}getAllowedBothBidders(){return this.allowedBothBidders||(this.allowedBothBidders=this._buildAllowedBothBidders()),this.allowedBothBidders}_buildAllowedBothBidders(){return freestar.fsdata.networks.filter((e=>e.allowConcurrent&&(!e.distinctParamsRequired||e.sizes.some((e=>e.serverParams))))).map((e=>e.slug))}applyAllowedBothBidderOverride(e){let{placement:t,clientServer:n}=e;const i=this.getAllowedBothBidders();let s;return Object.entries(n).forEach((e=>{let[r,a]=e;a!==At.BOTH||i.includes(r)||(s||(s=this.getDefaultConfig({placement:t})),n={...n,[r]:s[r]})})),{clientServer:n,updated:null!=s}}_getConfigByRefresh(e){let{refresh:t}=e;const n=Ir(t,this.getRefreshCategories());return n?n.config:this.getFallbackConfig()}_getConfig(e){let{rtt:t,refresh:n}=e;const i=this._getConfigByRttAndRefresh({rtt:t,refresh:n});if(i)return i.config;const s=this._getConfigByRtt({rtt:t});return s?s.config:this.config}_getConfigByRttAndRefresh(e){let{rtt:t,refresh:n}=e;if(null!=t&&null!=n&&this.config.clientServerRefresh){const e=Ir(n,this.config.clientServerRefresh);if(e&&e.clientServerRTT)return Ir(t,e.clientServerRTT)}}_getConfigByRtt(e){let{rtt:t}=e;if(null!=t&&this.config.clientServerRTT)return Ir(t,this.config.clientServerRTT)}applyTestSessionOverride(e){if(!this.isDebugOrTestSession())return e;const t={...e};return Object.keys(t).forEach((e=>{const n=window?.freestar?.fsdata?.networks?.find((t=>t.slug===e))||null;if(n){"off"!==t[e]&&(n.isClient?t[e]=At.CLIENT:n.isPrebidServer?t[e]=At.SERVER:n.isClientAndServer&&(t[e]=At.BOTH))}})),t}adjustClientServer(){let{clientServer:e={}}=this.getConfigByRtt();return this.applyTestSessionOverride(e)}getInactiveBidders(){if(!this.active)return[];let{clientServer:e={}}=this.getConfigByRtt();return Object.keys(e).filter((t=>"off"===e[t]))}getAllBidders(){let{clientServer:e={}}=this.config;return Object.keys(e)}getServerToServerDetails(){if(!this.active)return{};let{testGroup:e}=this.config,{clientServerMask:t}=this.getConfigByRtt();return{clientServerMask:t,testGroup:e}}getDynamicAuctionTimeoutDetails(){const{maxTimeout:e=window.freestar.fsdata.timeout,roundTripTime:t=null}=this.config;return{maxTimeout:e,roundTripTime:t}}getMaxAuctionTimeout(){const{maxTimeout:e}=this.getDynamicAuctionTimeoutDetails();return e}setKVPs(){const{roundTripTime:e=null}=this.getDynamicAuctionTimeoutDetails(),{clientServerMask:t=null,testGroup:n=null}=this.getServerToServerDetails();freestar.queue.push((()=>{googletag.pubads().setTargeting("floors_user",String(yt.isKnown)),e&&googletag.pubads().setTargeting("floors_rtt",`${e}`),this.isDebugOrTestSession()||n&&googletag.pubads().setTargeting("fs_testgroup",`${n}`)})),this.logs.add(`fs_clientservermask: ${t}\nfs_testgroup: ${n}\nfloors_user: ${yt.isKnown}\nfloors_rtt: ${e}`)}getErrors(e){const t=[];return 0===Object.keys(e).length?t.push("no params"):void 0===e.maxTimeout&&t.push("no maxTimeout"),t}async getFloorsData(){const e=await wt().fetch({requestId:"getIdealData",fetchFn:Dt}),{config:t}=this.parseRequestHandlerResult(e);return t&&t.floors}getBypassFirstAuction(){if(null===this.alwaysBypassFirstAuction){const e=this.getAllPossibleConfigs();this.alwaysBypassFirstAuction=e.length>0&&e.every((e=>"off"===e.preGAMAuction))}return this.alwaysBypassFirstAuction}getFeatureConfig(){return this.config&&this.config.features||{}}allowBrowsi(){return"off"!==this.getFeatureConfig().browsi}allowConfiant(){return"off"!==this.getFeatureConfig().confiant}allowBlockthrough(){return"off"!==this.getFeatureConfig().blockthrough}isRebidAllowed(){return"off"!==this.getFeatureConfig().rebid}isGAMEnabled(){return"off"!==this.getFeatureConfig().gam}isS2SDisabled(){return!Object.values(this.getBidderSummary()).some((e=>e!==At.CLIENT))}allowRefresh(){return"off"!==this.getFeatureConfig().refresh}determineAdRefreshBehavior(){const e=!this.isGAMEnabled()&&this.isS2SDisabled(),t=this.allowRefresh();return{isRefreshAllowed:e||t}}getDebugOrTestSession(){const e=B(ct),t=B(lt),n=window.freestar?.fsdata?.networks?.some((e=>void 0!==e.isClient||void 0!==e.isPrebidServer));if(e||t)return n;const i=ze({key:"fs.config",type:$e.object.type})?.pubfigSettings?.abtest?.testType,s=ze({key:"fs.abtest.type",type:$e.string.type});return(null!=i||null!=s)&&(![i,s].some((e=>"PUBFIG_TEMPLATE"===e))&&n)}isDebugOrTestSession(){return null===this.debugOrTestSession&&(this.debugOrTestSession=this.getDebugOrTestSession()),this.debugOrTestSession}getAllPossibleConfigs(){return this.getRefreshCategories().map((e=>e.config)).concat(this.getFallbackConfig())}getBidderSummary(){return this.bidderSummary||(this.bidderSummary=this._buildBidderSummary()),this.bidderSummary}},instanceName:"idealAdstackManager"});function Ir(e,t){let n;for(const i of t)e<i.lessThan&&(!n||n.lessThan>i.lessThan)&&(n=i);return n}class _r{constructor(){this.slotMaxBids={},this.slotToPlacement={},this.placementToSlots={}}initiateWatcher(e){e.que.push((()=>{e.onEvent(qt,this.handleBidResponse.bind(this))}))}handleBidResponse(e){this.addSlotPlacementAssociation(e.adUnitCode),this.addBidResponse(e)}addSlotPlacementAssociation(e){if(e&&!this.slotToPlacement[e]){const t=pn({slotId:e});t&&(this.slotToPlacement[e]=t,this.placementToSlots[t]||(this.placementToSlots[t]=[]),this.placementToSlots[t].push(e))}}addBidResponse(e){const{adUnitCode:t,cpm:n}=e;t&&n&&(!this.slotMaxBids[t]||this.slotMaxBids[t]<n)&&(this.slotMaxBids[t]=n)}getSlotMaxBid(e){return _r.validateMaxBid(this.slotMaxBids[e])}getPlacementMaxBidBySlot(e){const t=this.slotToPlacement[e];return this.getPlacementMaxBid(t)}getPlacementMaxBid(e){const t=this.placementToSlots[e]||[];return _r.validateMaxBid(Math.max(...t.map((e=>this.getSlotMaxBid(e)))))}static validateMaxBid(e){return!Number.isNaN(e)&&null!=e&&e>0?e:null}}let Sr=null;function Er(){return null==Sr&&(Sr=new _r),Sr}async function Ar(e){let{deviceVendor:t,deviceType:n,refreshNumber:i,placement:s,maxBid:r,isFloorsActive:a}=e;const o=kt(),d="Apple"===t?"smartphone-ios":n,l=yt.isKnown,c=s&&null!=r?`&mb=${r}&au=${encodeURIComponent(s)}`:"",u=freestar.locData?freestar.locData.iso:"",f=fetch(`https://api.floors.dev/sgw/v1/floors?${`d=${o}&t=${d}&k=${l}&r=${i}${c}&c=${u}`}`,{headers:{"x-api-key":It,"x-lm":a?"0":"1"}}),h=await f;if(!h.ok)throw new Error(`Request failed with status ${h.status}`);return h.json()}class kr{constructor(e,t){this.idealAdStackManager=e,this.maxBidTracker=t,this.initialData=null,this.requests=[],this.maxBidRequests={},this.failedRequestCount=0,this.throttleRequests=!1,this.throttleExpiry=0}async getInitialFloorsData(){if(Pt({siteId:freestar.fsdata.siteId}))return this.initialData={timestamp:new Date,floors:[]};const{timestamp:e,floors:t}=this.getRequest(0);return this.initialData?await t:this.initialData={timestamp:e,floors:await t},this.initialData}getRequest(e,t,n){if(this.shouldThrottleRequests()){const i=t&&null!=n?`, placement ${t}, maxBid ${n}`:"";return freestar.log({level:20,title:"Floors"},`Floors throttled: fetch skipped for refresh ${e}${i}`),{timestamp:new Date,floors:Promise.resolve([])}}return t&&null!=n?(this.maxBidRequests[t.name]||(this.maxBidRequests[t.name]=[null]),this.maxBidRequests[t.name][e]||(this.maxBidRequests[t.name][e]={}),this.maxBidRequests[t.name][e][n]||(this.maxBidRequests[t.name][e][n]={timestamp:new Date,floors:this.fetchData(e,t.dfpId,n)}),this.maxBidRequests[t.name][e][n]):(this.requests[e]||(this.requests[e]={timestamp:new Date,floors:this.fetchData(e)}),this.requests[e])}reportError(e){freestar.log({level:40,title:"Floors"},"Floors error",e),a.instance.resolve(Ht.ANALYTICS).then((t=>{t.track(new nn({eventName:"FLOORS_ERROR",eventType:"FETCH_RESPONSE",data:{message:e}}))}))}async fetchInitialData(){const e=await this.idealAdStackManager().getFloorsData();if(e)return!e.error&&e.length>0?e:(e?.error&&e?.message&&this.reportError(e.message),this.startThrottle(),[]);const{data:t,error:n}=await wt().fetch({requestId:"getFloorsData",fetchFn:()=>Ar({deviceVendor:window.freestar.deviceInfo.device.vendor,deviceType:window.freestar.deviceInfo.device.type,refreshNumber:0,isFloorsActive:window.freestar?.fsdata?.isTriple13Enabled})});if(n)this.reportError(n.toString());else{if(t&&!t.error&&t.length>0)return t;t?.error&&t?.message&&this.reportError(t.message)}return this.startThrottle(),[]}static MAX_FAILED_REQUESTS=2;static FAILED_REQUEST_TIMEOUT=9e5;countRequestFailed(){this.failedRequestCount+=1,this.failedRequestCount>=kr.MAX_FAILED_REQUESTS&&this.startThrottle()}startThrottle(){this.throttleRequests=!0,this.throttleExpiry=Date.now()+kr.FAILED_REQUEST_TIMEOUT}countRequestSucceeded(){this.failedRequestCount=0,this.throttleRequests=!1}shouldThrottleRequests(){return this.throttleRequests&&Date.now()>this.throttleExpiry?(this.startThrottle(),!1):this.throttleRequests}async fetchData(e,t,n){if(0===e)return await this.fetchInitialData();let i,s;try{i=await Ar({deviceVendor:window.freestar.deviceInfo.device.vendor,deviceType:window.freestar.deviceInfo.device.type,refreshNumber:e,placement:t,maxBid:n,isFloorsActive:window.freestar?.fsdata?.isTriple13Enabled})}catch(e){s=e}if(s)this.reportError(s.toString());else{if(i&&!i.error&&i.length>0)return this.countRequestSucceeded(),i;i?.error&&i?.message&&this.reportError(i.message)}return this.countRequestFailed(),[]}getFloor(e,t,n){const i=t.find((e=>n.dfpId===e.adUnit)),s=i?i.upr:"timeout",r=i?new Date(i.lastUpdated):e;return{floors_id:s,floors_hour:String(r.getUTCHours())}}getInitialFloorKVP(e){let{placement:t,keyMap:n}=e;return n||(n={}),Object.assign(n,this.getFloor(this.initialData.timestamp,this.initialData.floors,t))}async getFloorsData(e){let t,n,{placement:i,slotId:s,callback:r,isRebid:a=!1}=e;if(Ot({siteId:freestar.fsdata.siteId,placement:i}))return t=null,n="inactive",void r({result:t,reason:n});const o=(Pi(s)||0)+(a?1:0);let d,l;if(0===o||a)({timestamp:d,floors:l}=this.getRequest(o));else{const e=this.maxBidTracker.getSlotMaxBid(s),t=kr.formatMaxBid(e);({timestamp:d,floors:l}=this.getRequest(o,i,t))}t=this.getFloor(d,await l,i),n=null,r&&r({result:t,reason:n})}prefetchFloorsData(e){let{placement:t,slotId:n,timesRefreshed:i}=e;const s=this.maxBidTracker.getSlotMaxBid(n),r=kr.formatMaxBid(s);this.getRequest(i,t,r)}static formatMaxBid(e){if(null!=e){const t=e.toString();if(t){if(t.includes("e-"))return"0";if(t.includes("e"))return e.toPrecision(3);const n=e.toString().match(/^-?\d*(?:\.\d{0,2})?/);if(n){let e=n[0];for(;e.includes(".")&&(e.endsWith("0")||e.endsWith("."));)e=e.slice(0,-1);return e}}}return null}}const xr=vt.getInstanceFn({ClassConstructor:kr,instanceName:"floorsManager",params:[wr,Er()]});function Tr(e,t){if("indexExchange".indexOf(t.bidder)>-1&&t.params&&t.params.id&&t.params.id<0&&(t.dynamicId=!0),"conversant"===t.bidder){t.params.secure=freestar.isHttps;for(const e in t.params)switch(e){case"bidfloor":case"position":case"maxduration":t.params[e]=Number(t.params[e])}}if("cox"===t.bidder&&(t.params.id=Number(t.params.id),t.params.siteId=Number(t.params.siteId)),"justpremium"===t.bidder&&t.params&&(t.params.allow=Lr(t.params.allow),t.params.exclude=Lr(t.params.exclude),void 0===t.params.allow||null!==t.params.allow&&0!==t.params.allow.length||delete t.params.allow,void 0===t.params.exclude||null!==t.params.exclude&&0!==t.params.exclude.length||delete t.params.exclude),"pulsepoint"===t.bidder)for(const e in t.params)"cf"==e&&(t.params[e]=t.params[e].replace("X","x"));if("connectad"===t.bidder)for(let e in t.params)"siteId"!==e&&"networkId"!==e||(t.params[e]=Number(t.params[e]));if("grid"===t.bidder&&t.params&&t.params.uid&&(t.params.uid=Number(t.params.uid)),"beachfront"===t.bidder)for(var n in t.params)"video"!=n&&"banner"!=n||(t.params[n]="object"==typeof t.params[n]?t.params[n]:JSON.parse(t.params[n]));if("undertone"===t.bidder&&(t.params.publisherId=Number(t.params.publisherId),t.params.placementId=Number(t.params.placementId)),"zid"===t.bidder&&(t.params.adUnitID=Q(t.params.adUnitID)),"mantis"===t.bidder&&(t.params.zone=e.name),"districtmDMX"===t.bidder&&(t.params.dmxid=Number(t.params.dmxid),t.params.memberid=Number(t.params.memberid)),"answermedia"===t.bidder&&(t.params.siteId=Q(t.params.siteId),t.params.networkId=Q(t.params.networkId),t.params.zoneIds&&z(t.params.zoneIds)&&t.params.zoneIds.split(",").length>0?t.params.zoneIds=t.params.zoneIds.split(",").map((function(e){return Q(e)})):t.params.zoneIds=[]),"consumable"===t.bidder&&(t.params.siteId=Q(t.params.siteId),t.params.networkId=Q(t.params.networkId),t.params.unitId=Q(t.params.unitId)),["appnexus","appnexusAst","brealtime","pagescience","defymedia","gourmetads","matomy","featureforward","oftmedia"].indexOf(t.bidder)>-1)for(const e in t.params)"placementId"==e&&(t.params[e]=Number(t.params[e])),["allowSmallerSizes","member","invCode"].indexOf(e)>-1&&delete t.params[e];if(["defymedia","zid"].indexOf(t.bidder)>-1)return!1;"sortable"===t.bidder&&(t.params.tagId=e.name);return!(!0===e.stickyFooter&&["sharethrough","triplelift"].indexOf(t.bidder)>-1)&&("criteo"===t.bidder&&(t.params.zoneId=Number(t.params.zoneId)),Ne(t))}function Cr(e){return Pr(e.size,[0,0])&&delete e.size,e}function Rr(){return window.innerWidth&&document.documentElement.clientWidth?Math.min(window.innerWidth,document.documentElement.clientWidth):window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth}function Or(e,t){if(t.length>0&&Array.isArray(t[0])){let n=t.length;if(0===t[0][0]&&0===t[0][1])return!0;for(;n--;)if(Or(e,t[n]))return!0}let n=e.length;for(;n--;)if(e[n][0]===t[0]&&e[n][1]===t[1])return!0;return!1}function Pr(e,t){let n=e.length;for(;n--;)if(e[n][0]===t[0]&&e[n][1]===t[1])return!0;return!1}function Nr(){return freestar.fsdata.placements}function Dr(e){return!(!e.validAdSizes||!e.bidders||0===e.bidders.length||e.stickyFooter||e.dynamicAd)&&function(e){return void 0===freestar.config||void 0===freestar.config.enabled_slots||function(e,t){for(let n=0;n<e.length;n++)if(e[n].placementName===t){if("complete"!==document.readyState)return!0;if(window.document.getElementById(t))return!0}return!1}(freestar.config.enabled_slots,e.name)}(e)}function Lr(e){if(!e)return null;let t=null;try{t=JSON.parse(e)}catch(e){t=null}return null!==t&&t.length>0?t:null}function Mr(e){let{network:t,adQualityBlockList:n}=e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!1===t)return!0;let{allowedGeos:n=[],disallowedGeos:i=[]}=e;const{iso:s}=t,r=freestar.networkMap[e.id];return r&&(r.allowedGeos&&r.allowedGeos.length&&(n=r.allowedGeos),r.disallowedGeos&&r.disallowedGeos.length&&(i=r.disallowedGeos)),!(n&&n.length&&-1===n.indexOf(s)||i&&i.length&&-1!==i.indexOf(s))||(freestar.log(1,`Users in ${freestar.locData.iso} are not allowed to use ${e.slug}!`),!1)}(t,window.freestar.locData)&&function(e){let{network:t}=e;if(!1===freestar.networkMap||0===Object.keys(freestar.networkMap).length)return!0;const n=freestar.networkMap[t.id];return!n||Me()&&-1!==v.indexOf(t.slug)?(freestar.log(1,"isNetworkActive - Page Speed Optimized in effect, or network is inactive filtering out",t.slug),!1):!n||!U(n.active)||n.active}({network:t})&&Je({network:t,adQualityBlockList:n})&&function(e){let{freestar:t=window.freestar,network:n}=e;return!n.deviceExclusive||n.deviceExclusive.toLowerCase()===t.deviceInfo.device.type}({network:t})}async function Br(){const e=Ke();function t(e,t){"ix"===nt(e.bidder)?t.sizes.forEach((n=>{const i={bidder:e.bidder,params:{siteId:e.params.siteId,size:n}};t.bidders.push(i)})):e&&t.bidders.push(e)}function n(e,n,i){const s="both"===wr().getBidderSummary()[e.slug],r=Tr(i,Cr({bidder:e.slug,size:n.size,params:n.params}));if(r){const e=s?tt(r.bidder):r.bidder;t({...r,bidder:e},i)}if(s)if(e.distinctParamsRequired){if(n.serverParams){const s=Tr(i,Cr({bidder:e.slug,size:n.size,params:n.serverParams}));s&&t(s,i)}}else t(r,i)}let i=freestar.config.channel||freestar.fsdata.defaultChannel;i&&(freestar.log(9," Setting the channel to:"+i),freestar.config.orignalChannel=i),freestar.fsdata.placements=freestar.fsdata.placements.filter((e=>!e.archived)),freestar.fsdata.placements.forEach((async t=>{i&&(t.dfpId=t.dfpId.replace("{{channel}}",i),freestar.log(9," Setting the dfp id to:"+t.dfpId)),t.bidders=[],t.sizes=[],t.validAdSizes=!1,t.sizeMappings.sort((function(e,t){return e.viewport.size[0]===t.viewport.size[0]?0:e.viewport.size[0]>t.viewport.size[0]?-1:1}));for(let e=0;e<t.sizeMappings.length;e++){let n=t.sizeMappings[e];if(Rr()>=n.viewport.size[0]){for(let e=0;e<n.size.length;e++){let i=n.size[e];t.selectedSize=n,35843==i[0]?(t.fluidAd=!0,t.validAdSizes=!0):Or(n.size,i)&&!Pr(t.sizes,i)&&(freestar.forceSize&&W(freestar.forceSize.sort(),i.sort())?t.sizes.push(i):freestar.forceSize||t.sizes.push(i))}t.sizes.length>0&&(t.validAdSizes=!0);break}}t.ignoreSiteBidders||freestar.fsdata.networks.forEach((i=>{Mr({network:i,adQualityBlockList:e})&&F({value:i.sizes})&&i.sizes.forEach((e=>{Or(t.sizes,e.size)&&n(i,e,t)}))}));let s=[];if(t.networks.forEach((i=>{Mr({network:i,adQualityBlockList:e})&&i.sizes.forEach((e=>{if(s.push(e.size[0]),Or(t.sizes,e.size)){if(e.deviceExclusive&&e.deviceExclusive.toLowerCase()!==freestar.deviceInfo.device.type)return;n(i,e,t)}}))})),t.sizes=K(t.sizes),t.bidders=K(t.bidders),t.sizes.length>0){const{active:e,adhesionRemove:n}=h({placement:t,type:l.STICKY_FOOTER_OPTIONS});e&&n&&document.getElementById("fs-special-remove")&&(t.bidders=t.bidders.filter((e=>!["33across","gumgum"].includes(nt(e.bidder)))))}})),freestar.log(1," freestar.fsdata.placements : "+JSON.stringify(freestar.fsdata.placements))}const Fr=e=>{let{adUnitPath:t}=e;return window.freestar.fsdata.placements.find((e=>t===e.dfpId))};function Ur(){const e=y,t=e.length;let n=!1;if(freestar.locData&&freestar.locData.iso)for(let i=0,s=t;i<s;i++){const t=e[i];if(freestar.fsdata.siteId===t.siteId&&t.restrictedCountries.indexOf(freestar.locData.iso)>-1){n=!0;break}}return n}let $r;const zr=new Uint8Array(16);function qr(){if(!$r&&($r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!$r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $r(zr)}const jr=[];for(let e=0;e<256;++e)jr.push((e+256).toString(16).slice(1));var Vr={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Hr(e,t,n){if(Vr.randomUUID&&!t&&!e)return Vr.randomUUID();const i=(e=e||{}).random||(e.rng||qr)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=i[e];return t}return function(e,t=0){return jr[e[t+0]]+jr[e[t+1]]+jr[e[t+2]]+jr[e[t+3]]+"-"+jr[e[t+4]]+jr[e[t+5]]+"-"+jr[e[t+6]]+jr[e[t+7]]+"-"+jr[e[t+8]]+jr[e[t+9]]+"-"+jr[e[t+10]]+jr[e[t+11]]+jr[e[t+12]]+jr[e[t+13]]+jr[e[t+14]]+jr[e[t+15]]}(i)}const Gr=e=>1===e.length&&1===e[0][0]&&1===e[0][1],Wr=e=>{let{placement:t}=e,n="";if(!t)return n;const i=t.sizes.filter((e=>Array.isArray(e))),s={w:V(i,(e=>e[0])),h:V(i,(e=>e[1]))};return s.w&&s.w.length&&(n+=`__${s.w.join("x")}`),s.h&&s.h.length&&(n+=`  __${s.h.join("x")}`),js(t)&&(n+=" __fsAncillary"),n};const Yr=()=>Hr();function Qr(e){if(!e.state||0===Object.keys(e.state).length)return;const t=window.location.origin,n=e.state.current?t+e.state.current:window.location.href;freestar.trackPageview({path:n})}function Kr(){let e=window.innerWidth,t=window.innerHeight,n=document.body,i=document.documentElement,s=Math.max(n.scrollHeight,n.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight),r=document.querySelector("link[rel='canonical']"),o="";r&&(o=r.getAttribute("href")),0===freestar.msg.loadTime&&(freestar.msg.loadTime=Date.now()-freestar.hitTime),window.freestar.lastHrefPushed=window.freestar.lastHrefPushed||"",window.googletag.cmd.push((function(){window.freestar.lastHrefPushed!==freestar.url&&(window.freestar.lastHrefPushed=freestar.url,a.instance.resolve(Ht.ANALYTICS).then((n=>{n.track(new on({canonical:o,fpc:freestar.msg.fpc,hitTime:freestar.hitTime,loadTime:freestar.msg.loadTime,winHeight:t,winWidth:e,maxHeight:s,isServerToServer:freestar.server.diceRoll,googleVersion:window.googletag.getVersion()||""}))})))}))}function Jr(e){Xr(e,!0)}function Xr(e,t){if(!e)return;const n=e.slot.getSlotElementId(),i=e.slot.getAdUnitPath(),s=pn({slotId:n,path:i}),r={elementId:n,creativeId:e.creativeId,adUnitPath:i,placementId:s,displayed:!e.isEmpty},o=En({freestar:freestar}),d=e.slot.getTargeting(o.auction_id);0!==d.length&&(r.auctionId=d[0]),s&&"unknown"!==s&&(te({name:"adServerResponse",detail:r}),freestar.pushdownControl&&freestar.pushdownControl.postGamResponse&&freestar.pushdownControl.postGamResponse({event:e}),function(e){let{eventObject:t,event:n,complete:i}=e;if(i?n=freestar.dfpSlotInfo[t.elementId]:freestar.dfpSlotInfo[t.elementId]=n,n&&t&&!Tt({event:n})){const{slot:e}=n,s=e.getTargeting("fs-auuid")[0]||null;Promise.all([a.instance.resolve(Ht.ANALYTICS),a.instance.resolve("DfpResponseAnalyticsEventFactory")]).then((e=>{let[r,a]=e;r.track(a.create({slotId:t.elementId,placementId:t.placementId,DfpId:t.adUnitPath,advertiserId:n.advertiserId,campaignId:n.campaignId,isEmpty:n.isEmpty,lineItemId:n.lineItemId,serviceName:n.serviceName,size:JSON.stringify(n.size),sourceAgnosticCreativeId:n.sourceAgnosticCreativeId,sourceAgnosticLineItemId:n.sourceAgnosticLineItemId,parentDiv:t.elementId,complete:i||!1,auctionId:t.auctionId?t.auctionId:null,fsAuctionId:s}))}))}n&&Tt({event:n})&&(window.freestar.googleInterstitialPlacement||(window.freestar.googleInterstitialPlacement={}),window.freestar.googleInterstitialPlacement.event=n)}({event:e,eventObject:r,complete:t}),function(e){let{event:t}=e;if(t.isEmpty)return;const n=t.slot.getSlotElementId();if(!n)return;const i=freestar.bidsWon[n];i&&i.time&&Date.now()-i.time>29e3&&delete freestar.bidsWon[n]}({event:e}),freestar.fsdata.customDirectAdRefresh&&ua(),la(e))}function Zr(e){if(freestar.debug<50)return;freestar.log(25,"GPT Targeting - START ************************");let t=googletag.pubads().getTargetingKeys();for(let e=0;e<t.length;e++){let n=googletag.pubads().getTargeting(t[e]);freestar.log(25,"GPT Targeting - "+t[e]+" = "+n)}e?Array.isArray(e)||(e=[e]):e=$n();for(let n=0;n<e.length;n++){let i=e[n],s=i.getSlotElementId();t=i.getTargetingKeys();for(let e=0;e<t.length;e++){let n=i.getTargeting(t[e]);freestar.log(25," GPT Targeting - Slot ("+s+")- "+t[e]+" = "+n)}}freestar.log(25," GPT Targeting - END **************************")}const ea=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=!!e&&window.freestar.fsdata[`${e}ZIndex`];return t&&t>0?t:(()=>{let e=0;return Object.values(document.styleSheets).forEach((t=>{try{const n=t.cssRules;Object.values(n).forEach((t=>{const{style:n}=t;if(n){const t=parseInt(n.getPropertyValue("z-index"),10);t&&t>e&&(e=t)}}))}catch(e){}})),Array.from(document.getElementsByTagName("*")).forEach((t=>{const n=parseInt(t.style.zIndex,10);n&&n>e&&(e=n)})),e+1})()};function ta(e){let{id:t=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=kn({type:"style",attributes:[{"data-owner":"freestar"}],id:t});n.textContent=e,document.head.append(n)}function na(e){let t=!1;return e.sizeMappings.some((e=>{if(Rr()>=e.viewport.size[0])return t=e.size.sort(((e,t)=>e[0]+e[1]<t[0]+t[1]?1:t[0]+t[1]<e[0]+e[1]?-1:0)).filter((e=>35843!==e[0])),!0})),t}const ia=e=>e.indexOf("#")>-1?document.querySelector(e):document.querySelectorAll(e)[0],sa=e=>{let{name:t}=e;return window.freestar.fsdata.placements.filter((e=>e.name===t))[0]};function ra(e){let{placement:t,slotId:n,slotConfig:i,targeting:s={}}=e;if(!t)return;hn({placementName:t.name,slotId:n||t.name});let r=function(e){let{slotIds:t}=e;return $n().map((function(e){if(!t||t.indexOf(e.getSlotElementId())>-1)return e})).filter((e=>void 0!==e))}({slotIds:[n||t.name]})[0];r||(r=Hn({placement:t,id:n,slotConfig:i})),r&&Qi(r,t.name,null,Object.assign(s,{fs_ad_product:es(t)}));const a=In(t);return n&&(a.code=n),{slot:r,bidObject:a,placement:t}}const aa=e=>{let{element:t}=e,n=!1;return(e=>{let{element:t}=e;const n=document.styleSheets,i=[],s=n.length;for(let e=0;e<s;e++)try{const s=n[e].cssRules,r=s.length;for(let e=0;e<r;e++)t.matches(s[e].selectorText)&&i.push(s[e].cssText)}catch(e){}return i})({element:t}).forEach((e=>{e.indexOf("overflow")>-1&&(n=!0)})),n},oa=e=>e.intersectionRatio>0&&e.isIntersecting&&j(e,"target.id.length",0)>1,da=[],la=function(e){const{lineItemId:t}=e,n=da.findIndex((e=>e.lineItemId===t));if(t&&n&&n<0)da.push({lineItemId:t,demandSourceType:null,slots:[e.slot.getSlotElementId()]});else if("undefined"!=n&&void 0!==da[n]){da[n].slots.find((t=>t===e.slot.getSlotElementId()))||da[n].slots.push(e.slot.getSlotElementId())}};function ca(e){window.freestar.refreshLibrary[e]||(window.freestar.refreshLibrary[e]={});const t=window.freestar.refreshLibrary[e],n=window.freestar.fsdata.directAdRefreshRate;n>0?(t.refreshTime=n,t.disableRefresh=!1):(t.refreshTime=-1,t.disableRefresh=!0)}const ua=async function(){const e=da.filter((e=>null===e.demandSourceType));if(e.length>0){const t=await fetch(`${freestar.msg.dispensaryURL}/demand-source`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lineItems:e.map((e=>e.lineItemId))}),credentials:"include"}),n=await t.json();n.demandSources&&(e=>{for(const t in e.demandSources){const n=da.findIndex((e=>e.lineItemId===Number(t)));da[n].demandSourceType=e.demandSources[t]}})(n),fa(),freestar.superflex&&freestar.superflex.checkLineItems&&freestar.superflex.checkLineItems({needed:e})}},fa=function(){da.forEach((e=>{"DIRECT"!==e.demandSourceType&&"TRAFFICKED"!==e.demandSourceType||e.slots.forEach((e=>{ca(e)}))}))};const ha=e=>{let t=freestar.fsdata.adRefreshRate;try{t=ma(null!==e.getAttribute("name")?e.getAttribute("name"):e.id)}catch(e){freestar.log(1,`Error: ${e}`)}freestar.refreshLibrary[e.id].refreshTime=t},pa=(e,t)=>{let{bidder:n,adUnitCode:i,testData:s}=e;s&&(freestar=s.freestar);const r=function(){const e=function(){let e=sa({name:pn({slotId:i})});!e&&freestar.dynamicSlotLibrary[i]&&fsdata.placements[freestar.dynamicSlotLibrary[i]]&&(e=freestar.fsdata.placements[freestar.dynamicSlotLibrary[i]]);return e}();if(e&&1==e.outOfPage)return-1;if(e&&e.adRefreshRate&&e.adRefreshRate>0)return e.adRefreshRate;if(freestar.fsdata.adRefreshRate&&freestar.fsdata.adRefreshRate>0)return freestar.fsdata.adRefreshRate;return 0}();let a=$(r)?r:void 0;return r&&a&&t&&a>0&&t.time>a&&(freestar.refreshLibrary[i]||(freestar.refreshLibrary[i]={}),freestar.refreshLibrary[i].refreshTime=t.time,a=t.time,freestar.log(10,`Set Refresh Rate: ${n} won. Changing refresh rate to ${t.time} due to ${t.rule}`)),a};function ma(e){const t=window.freestar.dynamicSlotLibrary[e];t&&(e=t);const n=sa({name:pn({slotId:e})});return function(e){let{placement:t,refreshRate:n}=e;if(freestar.config&&freestar.config.products&&t){let e=!1;if(["stickyFooter","sideWall","pushdown","stickyFooter","revolvingRail","dynamicAd","stickyRail"].forEach((i=>{if(freestar.config.products[i]){const s=f({placement:t,type:`${i}Options`}),{refreshDisabled:r,refreshInterval:a}=freestar.config.products[i];s&&(r&&(e=!0),a&&a>15&&(n=a))}})),e)return 0}return n}({placement:n,refreshRate:n&&n.ignoreSiteRefresh?n.adRefreshRate:window.freestar.fsdata.adRefreshRate})}function ga(e){let{slotId:t,disableRefresh:n}=e;freestar.refreshLibrary[t].disableRefresh=n,freestar.refreshLibrary[t].refreshTime=n?0:ma(t)}function ba(){return!!freestar.refreshLibrary||(freestar.log(1,"No refreshLibrary entries found, exiting..."),!1)}function ya(e){let{slotId:t=!1,methodName:n}=e;return!!ba()&&(t?!!freestar.refreshLibrary[t]||(freestar.log(1,`No entry found, exiting ${n}...`),!1):(freestar.log(1,`No placement name provided, exiting ${n}...`),!1))}function va(e){let{placementName:t,disableRefresh:n}=e;for(const e in freestar.refreshLibrary)freestar.refreshLibrary[e].placementName===t&&ga({slotId:e,disableRefresh:n})}function wa(e){let{slotId:t,placementName:n}=e;n?va({placementName:n,disableRefresh:!1}):t&&ya({slotId:t,methodName:"disableRefreshKey"})&&ga({slotId:t,disableRefresh:!0})}function Ia(e){let{slotId:t,placementName:n}=e;n?va({placementName:n,disableRefresh:!1}):t&&ya({slotId:t,methodName:"enableRefreshOn"})&&ga({slotId:t,disableRefresh:!1})}function _a(e){let{disableRefresh:t}=e;if(ba())for(const e in freestar.refreshLibrary)ga({slotId:e,disableRefresh:t})}function Sa(){ba()&&_a({disableRefresh:!0})}function Ea(){ba()&&_a({disableRefresh:!1})}function Aa(){let{classList:e=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return kn({type:"button",classList:e,attributes:[{"aria-label":"Close Ad"},{tabindex:0}]})}function ka(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.body=document.body,this.placement=e,this.iteration=0,this.STICKYFOOTER_KEY=l.STICKY_FOOTER_OPTIONS,this.FOOTER_CORDIAL_KEY="fs.stickyfooter.cordial",this.stickyFooterId="fs-sticky-footer",this.stickyElement=void 0,this.stickySlotElement=void 0,this.slotWrapper=void 0,this.closeButton=void 0,this.brandingElement=void 0,this.error=!1,this.disabled=!1,this.options=h({placement:this.placement,type:this.STICKYFOOTER_KEY}),this.errorSet=()=>{this.error=!0},this.disabledSet=()=>{this.disabled=!0},this.cordial={set:()=>{if(this.cordial.isCordial()){freestar.log({title:yi},"Cordial is being set in local storage with the following time : "+this.options.session);const e=this.options.session&&this.options.session>0?this.options.session:180,t=Date.now()+6e4*e;localStorage.setItem(this.FOOTER_CORDIAL_KEY,t.toString())}},isCordial:()=>(this.options.cordial?freestar.log({title:yi},"Cordial is active."):freestar.log({title:yi},"Cordial is not active."),this.options.cordial),isActivated:()=>{const e=localStorage.getItem(this.FOOTER_CORDIAL_KEY);return e?e&&Date.now()>e?(freestar.log({title:yi},"Cordial storage item found, but time has lapsed and storage item will be removed."),localStorage.removeItem(this.FOOTER_CORDIAL_KEY),!1):(freestar.log({title:yi},"Cordial is activated. Exiting process"),!0):(freestar.log({title:yi},"Cordial storage item not found. Cordial not activated."),!1)}},this.isAdhesionDisabled=()=>{if(!(this.placement&&this.options&&this.placement.sizes.length&&this.body))return freestar.log({title:yi},"No document body, placement, options, or sizes found! Exiting process."),this.errorSet(),!0;if(ji({name:"stickyFooter"}))return this.disabledSet(),!0;if(this.options.remove){if(freestar.log({title:yi},"Option to remove is true."),document.querySelector("fs-select-footer-remove")||document.querySelector(this.options.remove))return freestar.log({title:yi},"Option to remove is on DOM! Exiting process."),this.disabledSet(),!0;freestar.log({title:yi},"Option to remove is not on DOM sticky footer will continue.")}return freestar.frequencyLibrary[this.placement.name].cap>-1&&!freestar.frequencyLibrary[this.placement.name].allowProduct()?(freestar.log({title:yi},"Frequency Cap has been met. Exiting process."),this.disabledSet(),!0):this.cordial.isCordial()&&this.cordial.isActivated()?(this.disabledSet(),!0):(freestar.log({title:yi},"Placement, options, and sizes found. No rules to disable have been accepted. Process will continue."),!1)},this.gumgumBidderRemoval=function(){this.options.gumgumSelect&&!document.getElementById("adhesion-select-one")&&(H(this.placement.bidders,(e=>"gumgum"===e.bidder)),window.fsprebid.adUnits=window.fsprebid.adUnits.map((e=>(e.code===this.placement.name&&H(e.bids,(function(e){return"gumgum"===nt(e.bidder)})),e))),freestar.log({title:yi},"Gumgum has been removed as a bidder"))},this.createStickyElement=function(){this.stickyElement=kn({type:"div",id:this.stickyFooterId,classList:[this.stickyFooterId]}),this.stickyElement.style.zIndex=this.options.zindex&&`${this.options.zindex}`||"",this.body.appendChild(this.stickyElement)},this.setSlotMinHeight=function(){const{selectedSize:e}=freestar.fsdata.placements.find((e=>e.name===this.placement.name)),t=e.size.map((e=>e[1])),n=Math.max.apply(Math,t),i=freestar.deviceInfo.device.type===He&&"CONFIANT"===Qe()&&freestar.fsdata.adQualityOptions&&freestar.fsdata.adQualityOptions.confiantReportThisAdEnabled&&wr().allowConfiant()?n+20:n;this.stickyElement.style.minHeight=`${i}px`},this.createSlotElement=function(){this.stickySlotElement=kn({type:"div",id:this.placement.name,classList:["fs-sticky-slot-element"],attributes:[{name:this.placement.name}]}),this.stickySlotElement.style.visibility="inherit",Ni(this.placement.name),this.slotWrapper=kn({type:"div",id:"fs-slot-footer-wrapper",classList:["fs-sticky-parent","fs-sticky-wrapper"]}),this.slotWrapper.style.visibility="inherit",this.slotWrapper.style.zIndex="inherit",this.slotWrapper.appendChild(this.stickySlotElement),this.stickyElement.appendChild(this.slotWrapper);const e=()=>this.options.backgroundRgba&&this.options.backgroundRgba.length?this.options.backgroundRgba:freestar.fsdata.stickyFooterBackgroundRgba&&freestar.fsdata.stickyFooterBackgroundRgba.length?freestar.fsdata.stickyFooterBackgroundRgba:"rgba(247,247,247,.9)";this.setSlotMinHeight(),this.stickySlotElement.style.backgroundColor=e(),this.stickyElement.style.backgroundColor=e();const t=()=>{this.stickyElement.style.minHeight=`${this.slotWrapper.offsetHeight}px`},n=()=>{const e=document.getElementsByClassName("fs-sticky-slot-element")[0]||{},{offsetHeight:t,offsetWidth:n}=e;this.brandingElement&&(t>50&&n<468?this.brandingElement.classList.add("fs-mobile-tall"):this.brandingElement.classList.remove("fs-mobile-tall"))};googletag.pubads().addEventListener("slotOnload",(e=>{e.slot.getSlotElementId()===this.placement.name&&(this.elementToggle("visible"),n(),t())})),googletag.pubads().addEventListener(Ft,(e=>{let{isEmpty:t,slot:n}=e;t&&n.getSlotElementId()===this.placement.name&&this.elementToggle("hidden")})),document.addEventListener(Vt,(e=>{!function(e){const t=document.getElementById(e),n=t?.querySelector("div[id*='google_ads_iframe']");n&&n.setAttribute("style","display: none;")}(e.detail.elementId),"number"==typeof e?.detail?.height&&(this.stickyElement.style.minHeight=`${e.detail.height}px`),n(),this.elementToggle("visible"),freestar.log({title:yi},"Sticky footer rendered natively.")}))},this.buttonEvents={onPage:!1,clicked:!1},this.closeButtonCreate=()=>{this.closeButton=Aa(),this.closeButton.setAttribute("class","fs-close-button fs-close-button-sticky"),this.closeButton.style.visibility="inherit",this.buttonEvents.onPage||(this.buttonEvents.onPage=!0,a.instance.resolve(Ht.ANALYTICS).then((e=>{e.track(new nn({eventName:"STICKY_BUTTON_SHOWED",eventType:"STICKY_FOOTER",data:{value:!0}}))}))),this.slotWrapper.appendChild(this.closeButton),this.closeButton.addEventListener("click",this.closeButtonMethod)},this.closeButtonMethod=()=>{this.cordial.set(),this.removeStickyElements(),this.buttonEvents.clicked||(this.buttonEvents.clicked=!0,a.instance.resolve(Ht.ANALYTICS).then((e=>{e.track(new nn({eventName:"STICKY_CLOSE_CLICKED",eventType:"STICKY_FOOTER",data:{value:!0}}))})))},this.createReportThisAd=function(e,t){const n=document.createElement("a");n.textContent="Report This Ad",n.style.color="#999",a.instance.resolve(Ht.CONFIANT).then((t=>{n.addEventListener("click",(function(){t.reportSingleAd(e)}))})),t.appendChild(n)},this.createBranding=()=>{const e=this.placement.name,t=Hs();if(t){this.brandingElement=kn({type:"div",classList:["__fs-branding"]});const n=kn({type:"a",attributes:[{target:"_blank"}]});this.brandingElement.style.visibility="inherit";const i=kn({type:"img",src:`${b}/imgs/fslogo-${t.toLowerCase()}.svg`,attributes:[{alt:"Freestar"}]});n.style.cursor.pointer,n.appendChild(i),this.brandingElement.appendChild(n),this.slotWrapper.appendChild(this.brandingElement);const s=document.createElement("div");s.className="fs-sticky-popup-container",s.style.display="none";const r=document.createElement("a");r.href=`https://ads.${g}/?utm_campaign=branding&utm_medium=stickyFooter&utm_source=${window.freestar.fsdata.domain}&utm_content=${this.placement.name}`,r.target="_blank",r.textContent="Freestar.com",r.style.color="#999",s.appendChild(r),Gs()&&this.placement.adQualityOptions&&!this.placement.adQualityOptions.disabled&&wr().allowConfiant()&&this.createReportThisAd(e,s);const a=document.createElement("div");a.style.position="relative",a.appendChild(s),document.body.appendChild(a),this.brandingElement.addEventListener("click",(function(e){e.stopPropagation(),s.style.display="none"===s.style.display?"grid":"none";var t=this.getBoundingClientRect();s.style.position="fixed",s.style.top=t.top-70+"px",s.style.left=t.left-70+"px",s.style.backgroundColor=(()=>this.options&&this.options.backgroundRgba&&this.options.backgroundRgba.length?this.options.backgroundRgba:freestar.fsdata.stickyFooterBackgroundRgba&&freestar.fsdata.stickyFooterBackgroundRgba.length?freestar.fsdata.stickyFooterBackgroundRgba:"rgba(247,247,247,.9)")()})),document.addEventListener("click",(function(){s.style.display="none"}))}},this.closeButtonMethod.bind(this),this.frequencyCapInit=()=>{freestar.frequencyLibrary[this.placement.name]=new vi({placement:this.placement,product:"stickyFooter"})},this.videoAdRequest=function(e){const t=Date.now();this.hideAdhesion(),n.footerVideoInit?.({videoAd:e,callback:(e,n)=>{if(this.stickyFooterDeleted)return;if(n&&n.userEnded)return freestar.log(1,"Sticky Footer Video: User ended video. Will not refresh sticky footer."),void this.cordial.set();const i=(ma(this.placement.name)||30)-(Date.now()-t)/1e3;function s(){i>=10?freestar.currentStickyFooter.fillSlot(i):freestar.currentStickyFooter.fillSlot()}document.hasFocus()?s():freestar.focusQueue.push(s)},placement:this.placement})},this.fillSlot=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;e||this.iteration++;const t=n.videoFetch?.({iteration:this.iteration,placement:this.placement});if(t&&!e)this.isVideo=!0,this.hideAdhesion(),freestar.refreshLibrary&&freestar.refreshLibrary[this.placement.name]&&freestar.refreshLibrary[this.placement.name].refreshTime&&(freestar.refreshLibrary[this.placement.name].refreshTime=-1),this.videoAdRequest(t);else{freestar.refreshLibrary[this.placement.name]||(freestar.refreshLibrary[this.placement.name]={}),this.isVideo=!1,freestar.refreshLibrary[this.placement.name].refreshTime=e||ma(this.placement.name),freestar.refreshLibrary[this.placement.name].refreshCounter=0;const t={fsrefresh:String(freestar.refreshLibrary[this.placement.name].timesRefreshed??0)};ts([{slotId:this.placement.name,placementName:this.placement.name,targeting:t}])}},this.elementToggle=e=>{this.stickyElement&&(this.stickyElement.style.setProperty("display","block"),this.stickyElement.style.setProperty("visibility",e))},this.hideAdhesion=()=>{this.elementToggle("hidden")},this.showAdhesion=()=>{this.elementToggle("visible")},this.fetchCLSElement=()=>document.getElementById(this.placement.name+"-sticky-footer-cls"),this.addGumgumListener=()=>{a.instance.resolve(Ht.EVENT_BUS).then((e=>{e.subscribe(Ts,(()=>{this.hideAdhesion()}))}))},this.init=function(){this.frequencyCapInit(),window.freestar.gumgumLoaded=!1,this.isAdhesionDisabled()||(hn({slotId:this.placement.name,placementName:this.placement.name}),this.gumgumBidderRemoval(),this.options.clsEnabled?(this.stickyElement=this.fetchCLSElement(),this.stickyElement&&(this.stickyElement.className+=` ${this.stickyFooterId}`)):this.createStickyElement(),this.stickyElement?(this.hideAdhesion(),this.createSlotElement(),this.hideAdhesion(),this.closeButtonCreate(),this.hideAdhesion(),this.createBranding(),this.fillSlot(),this.addGumgumListener()):freestar.log({title:yi},"There is no sticky element! Exiting!"))},this.init(),this.eval=function(e){freestar.performanceLogger.logMark({markerName:Yn.pubfigStickyFooterSlotRenderEnded,compareTo:[Yn.pubfigStickyFooterSlotRequested]}),e.isEmpty?this.hideAdhesion():this.showAdhesion()},this.fetchElement=e=>{let{selector:t}=e;try{return document.querySelector(t)}catch(e){freestar.log(1,`Error: ${e}`)}},this.removeSpecialAdhesion=()=>{for(const e in T)if(Object.prototype.hasOwnProperty.call(T,e)){const t=this.fetchElement({selector:T[e]});t&&t.parentNode&&t.parentNode.removeChild(t)}},this.stickyFooterRefresh=()=>{this.removeSpecialAdhesion(),freestar.refreshLibrary[this.placement.name].refreshTime=-1;const e=this.placement.name;window.freestar.superflex&&window.freestar.superflex.removeCSS({elementId:e});const t=zn({elementId:e});t&&(t.setTargeting("fsrefresh",`${freestar.refreshLibrary[this.placement.name].timesRefreshed??0}`),freestar.refreshLibrary[e].refreshCounter=0),this.fillSlot()},this.removeStickyElements=()=>{[this.stickySlotElement,this.stickyElement,this.slotWrapper].forEach((e=>{try{e&&e.parentNode&&e.parentNode.removeChild(e)}catch(e){freestar.log(1,`Error: ${e}`)}}))},this.deleteStickyFooter=()=>{if(this.stickyFooterDeleted=!0,this.isVideo&&window.AdPlayerPro){window.AdPlayerPro().remove()}this.cordial.set(),qn({elementId:this.placement.name}),this.removeSpecialAdhesion(),this.removeStickyElements()},this.removeSpecialFromBidding=()=>{function e(e){if(["gumgum","33across"].includes(nt(e.bidder)))return e}H(fsprebid.adUnits.filter((e=>e.code===this.placement.name))[0].bids,e),H(this.placement.bidders,e)},this.handleYieldmoHighImpact=e=>{!("yieldmo"!==e.bidderCode||!document.querySelectorAll(T[e.bidderCode]).length)&&this.hideAdhesion()},this.prebidEvaluation=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&e.adUnitCode===t.placement.name){const i=!("undertone"!==nt(e.bidderCode)||!document.querySelector(T[nt(e.bidderCode)])),s=!("33across"!==nt(e.bidderCode)||!document.getElementsByClassName("ttx-close").length),r=!("kargo"!==e.bidderCode||!document.querySelectorAll(T[e.bidderCode]).length),a=ma(t.placement.name)||30;if(i||n||s||r){let e=0;t.hideAdhesion(),(n||s)&&t.options.singleUse&&t.removeSpecialFromBidding();const i=setInterval(function(){e+=1,e>a&&(clearInterval(i),this.stickyFooterRefresh())}.bind(t),1e3)}}},this.isSticky=e=>this.placement.name===e.slot.getSlotElementId()}const xa={};class Ta{constructor(e){let{placement:t,videoInstance:n}=e;this.placement=JSON.parse(JSON.stringify(t)),this.videoCount=0,this.timer=null,this._videoInstance=n||{},this.init()}init(){if(this.videoAd=this._videoInstance.getEnabledVideo?.({placement:this.placement}),this.placement.stickyFooterOptions.videoPattern="NO_STICKY_FOOTER_OUTSTREAM_VIDEO_PATTERN",this.placement.stickyFooterOptions.video=!1,this.footer=new ka(this.placement,this._videoInstance),this.footer.showAdhesion(),this._appendCSS(),ji({name:"videoAdhesion"}))return;let{delayTime:e=0}=this.videoAd||{};e<1&&(e=1),freestar.log({title:bi},`${e}s before video loads...`),xa.delay=setTimeout((()=>{clearTimeout(xa.delay),this.initVendor()}),1e3*e),this._attachStickyFooterResizeListener()}initVendor(){var e=this;freestar.currentStickyFooter&&this.videoAd&&(this.videoCount+=1,this._videoInstance?.videoVendors?.[this.videoAd.vendor]?.({callback:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.handleCallback(t,n)},placement:this.placement,videoAd:this.videoAd}))}_appendCSS(){const e=kn({type:"style",id:this._getStyleId()}),{offsetHeight:t}=this.footer.slotWrapper;e.textContent=this._getCustomStyles(t),document.head.appendChild(e)}handleCallback(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!freestar.currentStickyFooter)return;if(e)return void freestar.log({title:bi},"ERROR",e);const{frequencyCap:n=0}=this.videoAd;t.userEnded?freestar.log({title:bi},"User exited, no longer loading videos..."):n>0&&this.videoCount>=n?freestar.log({title:bi},`Frequency cap set to ${n}, no longer loading videos...`):document.hasFocus()?this.callNextVideo():freestar.focusQueue.push((()=>{this.callNextVideo()}))}callNextVideo(){if(!freestar.currentStickyFooter)return;const{timeToWaitBetweenVideos:e=0}=this.videoAd;freestar.log({title:bi},`${e}s before next video loads...`),xa.delay=setTimeout((()=>{clearTimeout(xa.delay),freestar.currentStickyFooter.initVendor()}),1e3*e)}prebidEvaluation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.footer.prebidEvaluation(e,t)}stickyFooterRefresh(){this.footer.stickyFooterRefresh()}handleYieldmoHighImpact(e){this.footer.handleYieldmoHighImpact(e)}deleteStickyFooter(){if(this.resizeObserver?.disconnect(),Object.keys(xa).forEach((e=>{clearTimeout(xa[e])})),freestar.currentStickyFooter.footer.deleteStickyFooter(),window.AdPlayerPro){const e=window.AdPlayerPro();e&&e.remove()}freestar.currentOutstreamPlayer&&(freestar.currentOutstreamPlayer.videoPlayer.dispose(),document.getElementById("fs-player-container").remove()),delete freestar.currentStickyFooter}hideAdhesion(){freestar.currentStickyFooter.footer.hideAdhesion()}_adjustVideoPosition(e){let{payload:{stickyFooterHeight:t}}=e;const n=document.querySelector(`#${CSS.escape(this._getStyleId())}`);n&&(n.textContent=this._getCustomStyles(t))}_attachStickyFooterResizeListener(){a.instance.resolve(Ht.EVENT_BUS).then((e=>{e.subscribe(Cs,(e=>this._adjustVideoPosition(e)))}))}_getCustomStyles(){return`\n            #fs-player-container,\n            .orp-player-wrapper {\n                margin-bottom: ${(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+10}px !important;\n                bottom: 0px !important;\n            }`}_getStyleId(){return`${this.placement.name}-stylesheet`}isVisible(e){return Boolean(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}}let Ca=!1,Ra=!1;const Oa=function(e){Ca||(Ca=!0,freestar.newStickyFooter()),freestar.log(1,`${e}`)},Pa=e=>{let t=!1;return e.sizeMappings.some((e=>{if(Rr()>=e.viewport.size[0]){const{stickyFooterOutstreamVideoPattern:n,delayTime:i,playerSize:s,timeToWaitBetweenVideos:r,videoAdhesionPosition:a,videoEnabled:o,videoAdId:d,videoId:l,frequencyCap:c}=e;return t={stickyFooterOutstreamVideoPattern:n,delayTime:i,playerSize:s,timeToWaitBetweenVideos:r,videoAdhesionPosition:a,videoEnabled:o,videoAdId:d,videoId:l,frequencyCap:c},!0}})),t};class Na{constructor(e){let{freestar:t,video:n={},eventBus:i}=e;this._freestar=t,this._eventBus=i,this._videoInstance=n.stickyFooterVideoInstance||{}}newStickyFooter=e=>{!function(e,t,n){const i=freestar.fsdata.placements.filter((e=>f({placement:e,type:l.STICKY_FOOTER_OPTIONS})&&e[l.STICKY_FOOTER_OPTIONS].isOnCall));if(Me()&&i.length&&!Ra)return Ra=!0,void freestar.log("Sticky Footer: Sticky is on Call and PSO enabled next pub needs to call newStickyFooter");if(Me()&&!freestar.fsdata.psoDisableInteraction&&!Ca)return void Ue({name:"stickyFooter",callback:Oa.bind(null,{})});let s;if(e&&e.length?(freestar.log(1,`Sticky Footer: newStickyFooter method invoked and requesting placement with the name ${e}.`),s=sa({name:e})):(s=window.freestar.fsdata.placements.filter((e=>e.stickyFooterOptions&&e.stickyFooterOptions.active))[0],s&&freestar.log(1,`Sticky Footer: newStickyFooter method invoked without a name for a placement. The default Sticky Footer ${s.name} was found and will be used.`)),s){freestar.log(1,`Sticky Footer: newStickyFooter method - attempting a new sticky footer using placement ${s.name}.`),freestar.currentStickyFooter&&freestar.currentStickyFooter.placement&&(freestar.log(1,`Sticky Footer: newStickyFooter method - the current sticky footer will be removed ${freestar.currentStickyFooter.placement.name}.`),freestar.currentStickyFooter=void 0),freestar.currentStickyFooter&&freestar.currentStickyFooter.deleteStickyFooter&&freestar.currentStickyFooter.deleteStickyFooter();let{stickyFooterOutstreamVideoPattern:e}=Pa(s);freestar.currentStickyFooter="VIDEO_DISPLAY_CONCURRENT"===e?new Ta({placement:s,videoInstance:t}):new ka(s,t),freestar.deleteStickyFooter=freestar.currentStickyFooter.deleteStickyFooter}else freestar.log(1,"Sticky Footer: newStickyFooter method - no placement found for the sticky footer!");n&&n()}(e,this._videoInstance,this._attachStickyFooterResizeListener.bind(this))};setVideoAdhesionEnabled=e=>this._videoInstance.setVideoAdhesionEnabled?.(e);_attachStickyFooterResizeListener=()=>{this._resizeObserver&&this._resizeObserver.disconnect(),this._resizeObserver=new ResizeObserver((()=>{const e=Os();this._eventBus.emit(Cs,{stickyFooterHeight:e})}));const e=Ps();e&&this._resizeObserver.observe(e)};init=()=>{try{performance.mark("stickyFooter-initialization-start");const e="Sticky Footer: initStickyFooter method - ";this._freestar.log(1,e+" invoked looking for sticky placements!");const t=this._freestar.fsdata.placements.filter((e=>e.validAdSizes&&f({placement:e,type:l.STICKY_FOOTER_OPTIONS})&&e[l.STICKY_FOOTER_OPTIONS].isOnCall));if(t.length)this._freestar.log(1,`${e} there are ${t.length} on call sticky footer placements. There will be no standard sticky footer invoked by Pubfig.js!`);else{this._freestar.log(1,e+" there are no on call sticky footer placements. Attempting to find a default sticky footer placement");const t=this._freestar.fsdata.placements.filter((e=>e.validAdSizes&&f({placement:e,type:l.STICKY_FOOTER_OPTIONS})&&!e[l.STICKY_FOOTER_OPTIONS].isOnCall))[0];if(t&&!m({placement:t})){this._freestar.log(1,`${e} ${t.name} is not blocked invoking AddStickyFooter.`);let{stickyFooterOutstreamVideoPattern:n}=Pa(t);"VIDEO_DISPLAY_CONCURRENT"===n&&t.stickyFooterOptions.video?this._freestar.currentStickyFooter=new Ta({placement:t,videoInstance:this._videoInstance}):this._freestar.currentStickyFooter=new ka(t,this._videoInstance),this._attachStickyFooterResizeListener(),this._freestar.deleteStickyFooter=this._freestar.currentStickyFooter.deleteStickyFooter||this._freestar.currentStickyFooter.footer.deleteStickyFooter}else this._freestar.log(1,e+"no default sticky placement found or it is blocked due to rules found in the footerIsBlocked method. There will be no standard sticky footer invoked by Pubfig.js!")}performance.mark("stickyFooter-initialization-end")}catch(e){this._freestar.log({title:"STICKY FOOTER",styles:"background: red; color: white; border-radius: 3px; padding: 3px"},e.message)}}}r.class(Na,{token:"StickyFooter",dependencies:[Ht.FREESTAR,{token:"Video",optional:!0},Ht.EVENT_BUS],defaultAlias:"stickyFooter"});const Da={title:"sidewall",style:"background: orange; color: #fff; border-radius:3px; padding: 3px"},La={NONE:0,AUTO:1,MANUAL:2,TOP_RIGHT:3,TOP_LEFT:4,BOTTOM_LEFT:5,BOTTOM_RIGHT:6};let Ma=!1;function Ba(e){let{placement:t}=e;const n=j(t,"selectedSize.viewport.size",!1);return!!(n&&n[0]>0)&&n[0]}function Fa(e,t){return $(e=e&&Q(e))?e:t}function Ua(e){return"left"===e.orientation?0:e.boundaries.right}function $a(e,t){function n(t){let n,i=0;for(;!(n||(i++,i>1e3));){const{targetElement:t}=h({placement:e,type:l.SIDE_WALL_OPTIONS});n=document.querySelector(t)}n?t(null,n):t(!0)}n((function(i,s){i?t(!0):s&&(e.boundaries=s.getBoundingClientRect(),function(e,t){n(((n,i)=>{i?(e.targetDivX=i.getBoundingClientRect().left,t(null,e)):t(!0)}))}(e,(function(n,i){if(n)t(!0);else{e=i;const n=document.getElementsByTagName("body"),s=kn({type:"div",id:`fs-sidewall-${e.orientation}-container`,name:e.name});let r=function(e){return"left"===e.orientation?e.targetDivX:window.innerWidth-e.boundaries.right}(e);s.style=`display: block; z-index: ${e.sideWallOptions.zindex?e.sideWallOptions.zindex:ea("sidewall")};\n                        top: 0px;\n                        margin-top: ${function(e,t,n){const i=parseInt(t,10);return e&&i?i:n}(e.sideWallOptions.automaticTopOverride,e.sideWallOptions.topMargin,0)}vh;\n                        width: ${r}px; height: 100%;\n                        left: ${Ua(e)}px;\n                        position: fixed;\n                        display:flex;\n                        align-items:center;\n                        justify-content: center;`,n[0].appendChild(s),t(null,{div:s,placement:e})}})))}))}function za(e,t){const n=[];e&&Array.isArray(e)&&e.length&&e.forEach((e=>{!function(e){freestar.deleteAdSlots([e]);let t=document.getElementById(e);if(!t)return;let n=t.parentNode;t&&n&&(t.parentNode.removeChild(t),n.parentNode.removeChild(n)),freestar.sideWallUnitControl=[]}(e.name);const{orientation:i}=h({placement:e,type:l.SIDE_WALL_OPTIONS}),s=Ba({placement:e});if(s&&-1===n.indexOf(i)&&window.innerWidth>=s){switch(i){case 1:e.orientation="left";break;case 2:e.orientation="right";break;default:return}$a(e,(function(e,i){if(i){const{div:e,placement:s}=i,r=kn({type:"div",id:s.name,name:s.name});let a=kn({type:"div",classList:["fs-sidewall-close-container"]});e.appendChild(a),e.appendChild(r),e.style.left=Ua(s)+"px",e.style.visibility="visible",e.style.position="fixed",t(null,ra({placement:s})),n.push(s.sideWallUnitOrientation),freestar.sideWallUnitControl.push(s.name)}}))}})),Ma=!0}function qa(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(ji({name:"sideWall"}))return!1;let n="auto",i=[];if(Ma&&!e)return;if(e&&"object"==typeof e&&(e=e.name),!e){i=freestar.fsdata.placements.filter((function(e){const{orientation:t}=h({placement:e,type:l.SIDE_WALL_OPTIONS});if(t>0)return e}));const e=i.filter((e=>{const{select:t,isOnCall:n}=h({placement:e,type:l.SIDE_WALL_OPTIONS});if(!n&&t&&t.length&&document.getElementById(t))return e})),t=e.length>0;if(e.length&&(i=e),t&&0===e.length)return}function s(t){let{filterType:n}=t;if(e){const t=sa({name:e}),{type:i}=t.sideWallOptions;return Array.isArray(n)&&n.includes(i)||i&&i===n?[t]:[]}return i.filter((e=>{const{type:t}=h({placement:e,type:l.SIDE_WALL_OPTIONS});return Array.isArray(n)&&n.includes(t)||t===n?e:void 0}))}let r=s({filterType:La.AUTO}),a=s({filterType:[La.MANUAL,La.BOTTOM_LEFT,La.BOTTOM_RIGHT,La.TOP_LEFT,La.TOP_RIGHT]});r.length>a.length?i=q(r,(e=>e.sideWallOptions.orientation)):(n="manual",i=q(a,(e=>e.sideWallOptions.orientation))),"auto"===n?za(i,t):(matchMedia||window.matchMedia)&&i.forEach((e=>{const n=Ba({placement:e});if(n){window.matchMedia(`(min-width: ${Fa(n,1500)}px)`).matches&&function(e,t){let n="top";const{orientation:i,topMargin:s,leftMargin:r,rightMargin:a,bottomMargin:o,type:d}=h({placement:e,type:l.SIDE_WALL_OPTIONS});let c=1===i?"left":"right";[La.TOP_LEFT,La.BOTTOM_LEFT].includes(d)?c="left":[La.TOP_RIGHT,La.BOTTOM_RIGHT].includes(d)&&(c="right"),[La.BOTTOM_RIGHT,La.BOTTOM_LEFT].includes(d)&&(n="bottom"),freestar.sideWallUnitControl.push(e.name);const u=document.getElementsByTagName("body"),f=kn({type:"div",id:e.name,name:e.name});let p=kn({type:"div",classList:["fs-sidewall-container"]});[La.MANUAL].includes(d)?p.style=`position:fixed;\n          ${c}:0;\n          ${n}:0;\n          margin: ${Fa(s,20)}vh ${Fa(a,20)}px ${Fa(o,20)}px ${Fa(r,20)}px;\n          z-index: ${e.sideWallOptions.zindex?e.sideWallOptions.zindex:ea("sidewall")};\n          overflow: hidden;`:p.style=`position:fixed;\n          ${c}:0;\n          ${n}:0;\n          margin: ${Fa(s,20)}px ${Fa(a,20)}px ${Fa(o,20)}px ${Fa(r,20)}px;\n          z-index: ${e.sideWallOptions.zindex?e.sideWallOptions.zindex:ea("sidewall")};\n          overflow: hidden;`,p.appendChild(f),u[0].appendChild(p),t(null,ra({placement:e})),Ma=!0}(e,t)}}))}class ja{constructor(e){let{fsdata:t}=e;this._fsdata=t}add=e=>function(e){const t={elementIds:[],bidObjects:[],slots:[]},n=(e,n)=>{n&&(t.elementIds.push(n.placement.name),t.bidObjects.push(n.bidObject),t.slots.push(n.slot)),t.bidObjects.length&&Di({adUnits:t.bidObjects}),t.elementIds.length&&ri(t.elementIds,t.slots)},i=sa({name:e});if(i){performance.mark("sidewall-initialization-start");const{orientation:e}=h({placement:i,type:l.SIDE_WALL_OPTIONS});if(e>0)return void qa(i,n);performance.mark("sidewall-initialization-end")}freestar.log(Da,`No sidewall matched : ${e}`)}(e);delete=e=>function(e){freestar.deleteAdSlots(e);const t=document.getElementById(e),n=t.parentElement;t&&n&&n.parentElement.removeChild(n)}(e);init=e=>{performance.mark("sideWalls-initialization-start");this._fsdata.placements.filter((function(e){if(f({placement:e,type:l.SIDE_WALL_OPTIONS})){const{orientation:t,isOnCall:n,select:i}=h({placement:e,type:l.SIDE_WALL_OPTIONS}),s=Ba({placement:e});if(!n&&t&&s&&0!==t&&s>0&&(e=>{let{select:t}=e;return!(t&&t.length&&!(t&&t.length&&document.getElementById("fs-select-side-wall"))&&!document.getElementById(t))})({select:i}))return e}})).length?qa(null,e):e(!0),performance.mark("sideWalls-initialization-end")}}r.class(ja,{token:"SideWall",dependencies:[Ht.FS_DATA],defaultAlias:"sideWall"});const Va="Video Messaging: ";function Ha(e){let{bidder:t,cpm:n=null,requestTimestamp:i,videoAd:s,playerType:r=null}=e;const o=Date.now(),d={bidder:nt(t),cpm:n,playerType:r,placementId:s.name||s.id,requestTimestamp:i,responseTimestamp:o,timeToRespond:o-i,bidCpm:n};freestar.log({title:bi},Va+`bid won for bidder ${t} and placement id ${s.name}.\nVIDEO MSG OBJECT: ${JSON.stringify(d)}`),a.instance.resolve(Ht.ANALYTICS).then((e=>{e.track(new rs(d))}))}function Ga(e){let{bidder:t,placementId:n,tagUrl:i}=e;const s={bidder:nt(t),placementId:n,tagUrl:i};freestar.log({title:bi},Va+`tag loaded for bidder ${t} and placement id ${n}.\nVIDEO MSG OBJECT: ${JSON.stringify(s)}`),a.instance.resolve(Ht.ANALYTICS).then((e=>{e.track(new as(s))}))}function Wa(e){let{type:t,device:n}=e;return t&&(n&&n===He||n===Ve)&&t[n]?t[n]:t[He]}function Ya(e){let{selectedSize:t}=e;return t&&t.videoAdhesionPosition&&"DEFAULT_VIDEO_ADHESION_POSITION"!==t.videoAdhesionPosition?t.videoAdhesionPosition:"BR"}let Qa=!1;function Ka(e){let{callback:t,videoAd:n,placement:i}=e;const s=window.freestar.fsdata.placementVideos.find((e=>e.id===n.videoId)),r=function(){const e=freestar.deviceInfo.device.type;return e===Ge||e===He&&window.innerWidth>780?Ve:e}(),a={mobile:"625208",desktop:"625207"},o=Ya(i),d=Ya(i),l={mobile:{widthm:"LARGE"===n.playerSize?"100%":"45%",heightm:"LARGE"===n.playerSize?"175":"112",posm:d},desktop:{widthd:"LARGE"===n.playerSize?"400":"312",heightd:"LARGE"===n.playerSize?"225":"176",posd:o}};if(window.freestar.fsdata.networks.some((e=>"amazon"===e.slug))&&s.amazonActive){const e=s.amazonApsSlot||`springserve_${window.freestar.fsdata.siteId}_${location.host.split(".").length>2?location.host.split(".")[1]:location.host.split(".")[0]}`;l.mobile.apsSlot=e,l.desktop.apsSlot=e}const c=()=>s.supplyId&&s.supplyId.length?s.supplyId:Wa({type:a,device:r}),u={mobile:{spIdm:c()},desktop:{spIdd:c()}},f=`https://cdn.springserve.com/assets/0/playerJS/${Wa({type:{mobile:"frstrOSm_8",desktop:"frstrOSd_8"},device:r})}.js`;function h(){let{userEnded:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};freestar.log(1,"Spring Serve Footer Video Iteration Complete",arguments),delete window.AdPlayerPro,"function"==typeof t&&(t(void 0,e?{userEnded:!0}:{ended:!0}),t=void 0)}window._ssPlayer=Object.assign(Wa({type:u,device:r}),Wa({type:l,device:r}));const p=Date.now(),m=()=>{window.AdPlayerPro().on("AdStarted",(function(){freestar.log(1,"Spring Serve Footer Video Started"),Ha({bidder:"springserve",videoAd:n,requestTimestamp:p}),freestar.frequencyLibrary[i.name]&&freestar.frequencyLibrary[i.name].cap&&freestar.frequencyLibrary[i.name].incrementIteration()})),window.AdPlayerPro().on("AdError",(function(){freestar.log(1,"Spring Serve Footer Ad Fetch Error"),h({})})),window.AdPlayerPro().on("AdUserClose",(function(){freestar.log(1,"Spring Serve Footer Ad User Ended"),h({userEnded:!0})}));["AdStopped","AdVideoComplete"].forEach((e=>{window.AdPlayerPro().on(e,h)}))};Tn(f,(()=>{Qa||(Qa=!0,Ga({bidder:"springserve",placementId:n.videoId?n.videoId:"",tagUrl:f}));let e=0;const t=setInterval((()=>{if(window.AdPlayerPro&&"function"==typeof window.AdPlayerPro&&"object"==typeof window.AdPlayerPro()&&"function"==typeof window.AdPlayerPro().on?(clearInterval(t),m()):e+=1,e>=50)try{m()}catch(e){freestar.log(1,"Error binding events to SpringServe Video Player",e)}}),10)}))}class Ja{videoPatterns={DISPLAY_INIT_DISPLAY_CONSECUTIVE:{enabledDisplayIterations:[],disabledVideoIterations:[4,6],enabledVideoIterations:[2,5,7]},DISPLAY_INIT_ALTERNATING:{enabledDisplayIterations:[],disabledVideoIterations:[],enabledVideoIterations:[2]},VIDEO_INIT_ALTERNATING:{enabledDisplayIterations:[2],disabledVideoIterations:[],enabledVideoIterations:[],videoInitial:!0},VIDEO_INIT_DISPLAY_CONSECUTIVE:{videoInitial:!0,enabledDisplayIterations:[],disabledVideoIterations:[10,15,18],enabledVideoIterations:[4,5,9,12,13,17,20,21,29,33]},DISPLAY_INIT_VIDEO_CONSECUTIVE:{enabledDisplayIterations:[],disabledVideoIterations:[],enabledVideoIterations:[...Array(34).keys()].splice(2)}};constructor(e){let{freestar:t,freestarOutstreamVideo:n}=e;this._freestar=t,this._freestarOutstreamVideo=n}footerVideoInit(e){let{callback:t,videoAd:n,placement:i}=e;n&&n.vendor&&this.videoVendors[n.vendor]&&this.videoVendors[n.vendor]({callback:t,videoAd:n,placement:i})}getPlacementVideoAd(e){let{placement:t}=e;const{selectedSize:n}=t;if(!n?.videoEnabled)return;let i=freestar.fsdata.videoAds?.find((e=>e.name===n.videoAdId));return!i&&n.videoAdId&&(i=freestar.fsdata.placementVideos?.find((e=>e.id===n.videoId))),i}getEnabledVideo(e){let{placement:t}=e;const n=this.getPlacementVideoAd({placement:t});return!!n&&Object.assign(Pa(t),n)}getIfEnabledVideo(e){let{placement:t}=e;return!ji({name:"videoAdhesion"})&&((!freestar.locData||!freestar.locData.iso||-1===L.indexOf(freestar.locData.iso))&&(!(!t.stickyFooterOptions||!t.stickyFooterOptions.video)&&this.getEnabledVideo({placement:t})))}videoFetch(e){let{iteration:t,placement:n}=e;const i=function(e){let t=!1;return e.sizeMappings.some((e=>{if(Rr()>=e.viewport.size[0])return t=e,!0})),t}(n),{stickyFooterOutstreamVideoPattern:s}=i;if(s&&"NO_STICKY_FOOTER_OUTSTREAM_VIDEO_PATTERN"!==s&&this.videoPatterns[s]){const{disabledVideoIterations:e,enabledVideoIterations:i,enabledDisplayIterations:r,videoInitial:a=!1}=this.videoPatterns[s];if(a&&1===t)return this.getIfEnabledVideo({placement:n});if(r.length){return!r.map((e=>t%e)).includes(0)&&this.getIfEnabledVideo({placement:n})}if(e.length){if(e.map((e=>t%e)).includes(0))return!1}if(i.length){if(i.map((e=>t%e)).includes(0))return this.getIfEnabledVideo({placement:n})}}return!1}setVideoAdhesionEnabled(e){e?(freestar.currentStickyFooter&&(freestar.currentStickyFooter.iteration=0),freestar.config.products.videoAdhesion.disabled=!1):freestar.config.products.videoAdhesion.disabled=!0}get videoVendors(){return{SPRINGSERVE:Ka,FREESTAR_OUTSTREAM_PLAYER:this._freestarOutstreamVideo}}}const Xa=e=>{const{name:t,embedCode:n}=e;if(t&&n){const e=document.getElementById(t);if(e){const t=document.createRange().createContextualFragment(n);e.appendChild(t)}else freestar.log(20,`Failed to load STN video ad. Could not find container "${t}".`)}else freestar.log(30,"Failed to load STN video ad. Video ad must be configured with a name and embed code.")},Za="freestarPrimisPlayer",eo="freestarPrimisScript",to=e=>{let{videoAd:t,container:n}=e;if(n&&n.appendChild){const{primisToken:e,device:n}=t,i=n===Ve.toUpperCase()||window.innerWidth>768?400:300,s=parseInt(i/1.470588235,10),r=Math.round((new Date).getTime()/1e3),a=encodeURI(window.location.href),o=`${window.location.protocol}//live.primis.tech/live/liveView.php?s=${e}&cbuster=${r}&pubUrl=${a}&x=${i}&y=${s}&playerApiId=${Za}&schain=1.0,1!${g},${window.freestar.fsdata.companyId},1`;Ga({bidder:"primis",tagUrl:o,placementId:t.name}),function(e){let{scriptSrc:t,target:n=null,callback:i,id:s}=e;if(n)try{const e=kn({type:"script",src:t});e.async=!0,e.type="text/javascript",i&&(e.onload=i),s&&(e.id=s),n.appendChild(e)}catch(e){}}({scriptSrc:o,target:no({videoAd:t}),id:eo}),window.top.sekindoFlowingPlayerOn=!1}},no=e=>{let{videoAd:t}=e,n=document.querySelector("body");if(t.parentElement&&0===t.parentElement.indexOf("#")){if(n=document.querySelectorAll(t.parentElement)[0],t.nthElement>-1)try{n=n.children[t.nthElement]}catch(e){return freestar.log({title:bi},"PRIMIS ELEMENT NOT FOUND ON PAGE, SKIPPING"),!1}}else if(t.nthElement>-1)if(t.parentElement&&t.parentElement.length){const e=document.querySelectorAll(t.parentElement)[t.classIndex];try{n=e.children[t.nthElement]}catch(e){return freestar.log({title:bi},"PRIMIS ELEMENT NOT FOUND ON PAGE, SKIPPING"),!1}}else t.nthElement?n=document.body[t.nthElement]:freestar.log({title:bi},"COULD NOT ACQUIRE DOM NODE FOR PRIMIS VIDEO. CONFIGURATION FOR VIDEO INCORRECT!");return n},io=e=>{window.addEventListener("primisPlayerInit",(function(t){t.detail.playerApiId===Za&&(e=>{let{player:t,requestTimestamp:n,videoAd:i}=e;t.addEventListener("adStarted",(function(){Ha({bidder:"primis",videoAd:i,requestTimestamp:n})})),window.freestar.deleteVideo=function(){window.freestar.log({title:bi},"Video delete");const e=no({videoAd:i});if(e){const t=document.getElementById(eo);t&&t.remove();const n=Array.from(e.children).find((e=>null!==e.querySelector("#primis_container_div")||"primis_container_div"===e.id));n&&e.removeChild(n)}}})({player:t.detail,requestTimestamp:Date.now(),videoAd:e})}));const t=no({videoAd:e});null!==t?to({videoAd:e,container:t}):freestar.log({title:bi},"COULD NOT ACQUIRE DOM NODE FOR PRIMIS VIDEO")};function so(e){if(freestar.log({title:bi},"CONNATIX ELEMENTS : video init..."),!e.scriptId)return;const{parentElement:t,classIndex:n}=e,i=n&&n>-1?n:0,s=t?document.querySelectorAll(t)[i]:document.body;if(s){freestar.log({title:bi},"CONNATIX ELEMENTS : video target element : ",s);const t=Date.now();!function(e){let{videoAd:t}=e;const n="//cd.connatix.com/connatix.player.js?cid=f9509d53-804e-427d-a0bc-1204c0a3bcb1";freestar.log({title:bi},"CONNATIX ELEMENTS : script loading..."),Ga({bidder:"connatix",placementId:t.name,tagUrl:n}),function(e){if(!window.cnx){window.cnx={},window.cnx.cmd=[];var t=e.createElement("iframe");t.src="javascript:false",t.display="none",t.onload=function(){var e=t.contentWindow.document,i=e.createElement("script");i.src=n,i.setAttribute("async","1"),i.setAttribute("type","text/javascript"),e.body.appendChild(i)},e.head.appendChild(t)}}(document)}({videoAd:e}),function(e){let{videoAd:t,targetElement:n}=e;const i=kn({type:"script",id:t.scriptId});n.appendChild(i),freestar.log({title:bi},"CONNATIX ELEMENTS : script element created : ",i)}({videoAd:e,targetElement:s}),window.cnx.cmd.push((function(){cnx(function(e){let{videoAd:t}=e;const n={playerId:t.playerId,settings:{defaultSoundMode:window.cnx.configEnums.DefaultSoundModeEnum.Off}};return(!t.parentElement.length||t.toFloat||t.adType&&"SLIDER"===t.adType)&&(n.settings.customization={floating:{mode:window.cnx.configEnums.FloatingModeEnum[t.parentElement&&"SLIDER"!==t.adType?"AfterInView":"Always"],fixedPosition:window.cnx.configEnums.FloatingFixedPositionModeEnum.Page,scrollPosition:window.cnx.configEnums.FloatingScrollPositionEnum.BottomRight,floatingWidth:t.width&&t.width>100?t.width:401,floatingGutterX:5,floatingGutterY:100}}),n}({videoAd:e})).render(e.scriptId,(function(n,i){i&&i.on&&window.cnx.configEvents&&window.cnx.configEvents.AdPlay&&i.on(window.cnx.configEvents.AdPlay,(()=>{Ha({bidder:"connatix",videoAd:e,requestTimestamp:t})}))}))}))}else freestar.log({title:bi},"CONNATIX ELEMENTS : video ad parent element not found. Skipping...")}function ro(e){if(freestar.log({title:bi},"CONNATIX PLAYSPACE : video init..."),!e.scriptId)return;const{parentElement:t,classIndex:n}=e,i=n&&n>-1?n:0,s=t?document.querySelectorAll(t)[i]:document.body;if(s){freestar.log({title:bi},"CONNATIX PLAYSPACE : video target element : ",s);const t=Date.now();!function(e){let{videoAd:t}=e;const n="//cd.connatix.com/connatix.playspace.js?cid=f9509d53-804e-427d-a0bc-1204c0a3bcb1";freestar.log({title:bi},"CONNATIX PLAYSPACE : script loading..."),Ga({bidder:"connatix",placementId:t.name,tagUrl:n}),function(e){if(!window.cnxps){window.cnxps={},window.cnxps.cmd=[];var t=e.createElement("iframe");t.src="javascript:false",t.display="none",t.onload=function(){var e=t.contentWindow.document,i=e.createElement("script");i.src=n,i.setAttribute("async","1"),i.setAttribute("type","text/javascript"),e.body.appendChild(i)},e.head.appendChild(t)}}(document)}({videoAd:e}),function(e){let{videoAd:t,targetElement:n}=e;const i=kn({type:"script",id:t.scriptId});n.appendChild(i),freestar.log({title:bi},"CONNATIX PLAYSPACE : script element created : ",i)}({videoAd:e,targetElement:s}),window.cnxps.cmd.push((function(){cnxps(function(e){let{videoAd:t}=e;const n={playerId:t.playerId,settings:{defaultSoundMode:window.cnxps.configEnums.DefaultSoundModeEnum.Off}};return(!t.parentElement.length||t.toFloat||t.adType&&"SLIDER"===t.adType)&&(n.settings.customization={floating:{mode:window.cnxps.configEnums.FloatingModeEnum[t.parentElement&&"SLIDER"!==t.adType?"AfterInView":"Always"],fixedPosition:window.cnxps.configEnums.FloatingFixedPositionModeEnum.Page,scrollPosition:window.cnxps.configEnums.FloatingScrollPositionEnum.BottomRight,floatingWidth:t.width&&t.width>100?t.width:401,floatingGutterX:5,floatingGutterY:100}}),n}({videoAd:e})).render(e.scriptId,(function(n,i){i&&i.on&&window.cnxps.configEvents&&window.cnxps.configEvents.AdPlay&&i.on(window.cnxps.configEvents.AdPlay,(()=>{Ha({bidder:"connatix",videoAd:e,requestTimestamp:t})}))}))}))}else freestar.log({title:bi},"CONNATIX PLAYSPACE : video ad parent element not found. Skipping...")}const ao="FREESTAR VIDEO v1.0.0",oo={title:ao,styles:"background: black; color: white; border-radius: 3px; padding: 3px"},lo="FOP",co="FVP - PBJS IBV",uo="aps_springserve_outstream_ron",fo=["adsready","adRequest","adserror","loadstart","adImpression","adComplete","impression","progress","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","play","pause","ratechange","resize","volumechange"];class ho{constructor(e){let{params:t}=e;this.uuid=Yr(),this.params=t,this._playerId=`fsPlayer_${this.uuid}`}init(){}updateBottomSpacing(e){this.params.bottomSpacing=e,this.addCSS()}bindEvents(){this.player.on(fo,this.handlePlayerEvent.bind(this)),this.player.on("ads-manager",(e=>{const{adsManager:t}=e;Object.keys(window.google.ima.AdEvent.Type).forEach((e=>{t.addEventListener(window.google.ima.AdEvent.Type[e],this.handlePlayerEvent.bind(this))}))}))}addPlayer(){this.player=window.videojs(this._playerId)}addHTML(){}addCSS(){}getLargestPossibleDimensions(e){let{placement:t}=e,{sizes:n}=t;return n=n.filter((e=>Array.isArray(e))),[n.sort(((e,t)=>t[0]-e[0]))[0][0],n.sort(((e,t)=>t[1]-e[1]))[0][1]]}renderAd(){}handlePlayerEvent(e){const{type:t}=e;switch(t){case"impression":this.handleImpressionEvent({event:e});break;case"volumechange":case"volumeChange":this.handleVolumeChangeEvent({event:e});break;case"allAdsCompleted":this.handleAllAdsCompleteEvent({event:e});break;case"adsready":this.handleAdsReadyEvent({event:e});break;case"ended":this.handleEndedEvent({event:e});break;case"adserror":this.handleAdsErrorEvent({event:e})}}handleEndedEvent(e){let{event:t}=e;freestar.log(oo,"handleEnded",t)}handleAdsReadyEvent(e){let{event:t}=e;freestar.log(oo,"handleAdsReadyEvent",t)}handleAdsErrorEvent(e){let{event:t}=e;freestar.log(oo,"handleAdsErrorEvent",t)}handleVolumeChangeEvent(){this.player.ima.getAdsManager()&&0!==this.player.ima.getAdsManager().getVolume()&&this.player.ima.getAdsManager().setVolume(0)}handleImpressionEvent(e){let{event:t}=e;freestar.log(oo,"handleImpressionEvent",t)}handleAllAdsCompleteEvent(e){let{event:t}=e;freestar.log(oo,"handleAllAdsCompleteEvent",t)}remove(){}sendEvent(e){let{name:t=ao,type:n,value:i}=e;a.instance.resolve(Ht.ANALYTICS).then((e=>{e.track(new nn({eventName:t,eventType:n,data:{name:this.placement.name,uuid:this.uuid,...i}}))}))}}class po{constructor(e){let{aps:t=!1,apsSlot:n=uo,pbjs:i=!0,pbjsCode:s,auctionTimeout:r=5e3,cb:a=null}=e;this.aps=t,this.apsSlot=n,this.pbjs=i,this.pbjsCode=s,this.auctionTimeout=r,this.auctionCutoff=2e4,this.cb=a,this.finished=[],this.init()}init(){this.requestBids()}requestBids(){this.aps&&this.requestAPSBids(),this.pbjs&&this.requestPBJSBids(),(this.aps||this.pbjs)&&(this.timer=setTimeout((()=>{clearTimeout(this.timer),a.instance.resolve(Ht.ANALYTICS).then((e=>{e.track(new nn({eventName:ao,eventType:"videoAuctionTimeout",data:{pbjsCode:this.pbjsCode}}))})),this.finishRequestingBids()}),this.auctionCutoff))}requestAPSBids(){window.apstag&&window.apstag.fetchBids({timeout:this.auctionTimeout,slots:[{slotID:this.apsSlot,mediaType:"video"}]},(e=>{this.finished.push("aps"),this.apsBids=e,this.checkIfBidsFinished()}))}requestPBJSBids(){window.fsprebid.requestBids({adUnitCodes:[this.pbjsCode],bidsBackHandler:e=>{const{bids:t=[]}=e[this.pbjsCode]||{};this.finished.push("pbjs"),this.pbjsBids=t,this.checkIfBidsFinished()}})}checkIfBidsFinished(){const e=[];this.aps&&e.push("aps"),this.pbjs&&e.push("pbjs");e.every((e=>this.finished.includes(e)))&&(clearTimeout(this.timer),this.finishRequestingBids())}finishRequestingBids(){if(this.cb)try{this.cb(this)}catch(e){console.error(e)}}}class mo{constructor(e){let{player:t,adTagUrl:n="DEFAULT",uuid:i,placement:s}=e;this.player=t,this.adTagUrl=n,this.placement=s,this.uuid=i}renderAd(){"function"==typeof this.player.ima?(this.player.ima({adTagUrl:this.adTagUrl}),this.player.loadMedia({id:"XVXVXVXV",src:`${b}/videos/blank1s-20231016.mp4`,type:"video/mp4"})):(this.player.ima.changeAdTag(this.adTagUrl),this.player.ima.requestAds())}}class go extends mo{constructor(e){let{player:t,adTagUrl:n,uuid:i,placement:s}=e;super({player:t,adTagUrl:n,uuid:i,placement:s}),this.init(),this.adTagUrl=n}init(){this.renderAd()}}class bo extends ho{constructor(e){let{params:t}=e;super({params:t}),this.init()}init(){const{bid:e}=this.params,{adUnitCode:t,vastUrl:n,adId:i}=e;this.adId=i,this.adUnit=Bn.getAdUnitByPrebidCode(t);const{placement:s}=this.adUnit;this.placement=s,this.addCSS(),this.addHTML({targetElm:document.getElementById(t)}),this.addPlayer(),this.bindEvents(),this.renderAd({vastUrl:n,adId:i})}addHTML(e){let{targetElm:t=document.body}=e;const n=kn({type:"div",id:`fs-player-container_${this.uuid}`});n.innerHTML=`\n            <div class='fs-player-container-shim'>\n                <video id='fsPlayer_${this.uuid}' muted playsinline class='video-js vjs-16-9 vjs-default-skin'></video>\n            </div>\n        `,t.appendChild(n)}addCSS(){const e=kn({type:"style",id:`fs-player_${this.uuid}`}),t=this.getLargestPossibleDimensions({placement:this.adUnit.placement}),n=this.getPlayer16x9Dimensions({width:.95*t[0],height:.95*t[1]});e.textContent=`\n            #fs-player-container_${this.uuid} {\n                width: ${t[0]}px;\n                height: ${t[1]}px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                background-color: #d3d3d3;\n            }\n            #fs-player-container_${this.uuid}>.fs-player-container-shim {\n                width: ${n.width}px;\n                height: ${n.height}px;\n                border-radius: 10px;\n                border: 0px;\n                overflow: hidden;\n            }\n        `,document.head.appendChild(e)}getPlayer16x9Dimensions(e){let{width:t,height:n}=e,i=Math.min(t,Math.round(16/9*n));return{width:i,height:Math.round(9/16*i)}}getLargestPossibleDimensions(e){let{placement:t}=e,{sizes:n}=t;return n=n.filter((e=>Array.isArray(e))),[n.sort(((e,t)=>t[0]-e[0]))[0][0],n.sort(((e,t)=>t[1]-e[1]))[0][1]]}renderAd(e){let{vastUrl:t,adId:n}=e;const{prebid:i}=this.adUnit;freestar.refreshLibrary[i.code]&&(freestar.refreshLibrary[i.code].disableRefresh=!0),this.renderer=new go({player:this.player,adTagUrl:t}),fsprebid.markWinningBidAsUsed({adId:n})}handleAdsReadyEvent(){const e={type:"videoBidAttemptedToPlay",value:{player:co,placementId:this.placement.name,adId:this.adId}};this.sendEvent(e),this.player.play()}handleAdsErrorEvent(){this.remove()}handleImpressionEvent(e){let{event:t}=e;const{adSystem:n,creativeAdId:i,creativeId:s,duration:r,universalAdIds:a,vastMediaHeight:o,vastMediaWidth:d}=t.ad.data,l={type:"videoBidImpression",value:{player:co,placementId:this.placement.name,adSystem:n,creativeAdId:i,creativeId:s,duration:r,universalAdIds:a,vastMediaHeight:o,vastMediaWidth:d,adId:this.adId}};this.sendEvent(l)}handleAllAdsCompleteEvent(){this.remove()}remove(){const{prebid:e,slot:t}=this.adUnit;e&&freestar.refreshLibrary[e.code]&&(freestar.refreshLibrary[e.code].disableRefresh=!1),freestar.refresh([t.getSlotElementId()]),this.player.dispose()}}function yo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.freestar.locData;return!!e&&(A.includes(e.iso)||"QC"===e.state)}const vo=()=>Boolean(window.__tcfapi),wo=()=>{try{window.__gpp_addFrame=function(e){if(!window.frames[e])if(document.body){var t=document.createElement("iframe");t.style.cssText="display:none",t.name=e,document.body.appendChild(t)}else window.setTimeout(window.__gpp_addFrame,10,e)},window.__gpp_stub=function(){var e=arguments;if(__gpp.queue=__gpp.queue||[],__gpp.events=__gpp.events||[],!e.length||1==e.length&&"queue"==e[0])return __gpp.queue;if(1==e.length&&"events"==e[0])return __gpp.events;var t=e[0],n=e.length>1?e[1]:null,i=e.length>2?e[2]:null;if("ping"===t)n({gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:["2:tcfeuv2","5:tcfcav1","6:uspv1","7:usnatv1","8:uscav1","9:usvav1","10:uscov1","11:usutv1","12:usctv1"],cmpId:0,sectionList:[],applicableSections:[],gppString:"",parsedSections:{}},!0);else if("addEventListener"===t){"lastId"in __gpp||(__gpp.lastId=0),__gpp.lastId++;var s=__gpp.lastId;__gpp.events.push({id:s,callback:n,parameter:i}),n({eventName:"listenerRegistered",listenerId:s,data:!0,pingData:{gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:["2:tcfeuv2","5:tcfcav1","6:uspv1","7:usnatv1","8:uscav1","9:usvav1","10:uscov1","11:usutv1","12:usctv1"],cmpId:0,sectionList:[],applicableSections:[],gppString:"",parsedSections:{}}},!0)}else if("removeEventListener"===t){for(var r=!1,a=0;a<__gpp.events.length;a++)if(__gpp.events[a].id==i){__gpp.events.splice(a,1),r=!0;break}n({eventName:"listenerRemoved",listenerId:i,data:r,pingData:{gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:["2:tcfeuv2","5:tcfcav1","6:uspv1","7:usnatv1","8:uscav1","9:usvav1","10:uscov1","11:usutv1","12:usctv1"],cmpId:0,sectionList:[],applicableSections:[],gppString:"",parsedSections:{}}},!0)}else"hasSection"===t?n(!1,!0):"getSection"===t||"getField"===t?n(null,!0):__gpp.queue.push([].slice.apply(e))},window.__gpp_msghandler=function(e){var t="string"==typeof e.data;try{var n=t?JSON.parse(e.data):e.data}catch(e){n=null}if("object"==typeof n&&null!==n&&"__gppCall"in n){var i=n.__gppCall;window.__gpp(i.command,(function(n,s){var r={__gppReturn:{returnValue:n,success:s,callId:i.callId}};e.source.postMessage(t?JSON.stringify(r):r,"*")}),"parameter"in i?i.parameter:null,"version"in i?i.version:"1.1")}},"__gpp"in window&&"function"==typeof window.__gpp||(window.__gpp=window.__gpp_stub,window.addEventListener("message",window.__gpp_msghandler,!1),window.__gpp_addFrame("__gppLocator"))}catch(e){console.error("Error in sourcepointGPPScript",e)}};function Io(e,t){const n=yo(e),i=J(e);(e=>{let{isGDPRCountry:t,isUspApplicable:n,mspsPrivacyManagerId:i,gdprPrivacyManagerId:s}=e;try{window._sp_queue=[],window._sp_={config:{accountId:1638,baseEndpoint:"https://cdn.privacy-mgmt.com",propertyHref:`https://${document.location.host}`,usnat:{includeUspApi:n},...t?{gdpr:{}}:{},events:{...["onMessageChoiceSelect","onMessageReady","onMessageChoiceError","onPrivacyManagerAction","onPMCancel","onMessageReceiveData","onSPPMObjectReady","onError"].reduce(((e,t)=>(e[t]=function(){console.log(`[event] ${t}`,arguments)},e)),{}),onConsentReady:function(e,t,n,r){"usnat"==e&&r.applies&&(document.getElementById("pmLink").style.visibility="visible",document.getElementById("pmLink").innerHTML="Do Not Sell or Share My Personal Information",document.getElementById("pmLink").onclick=function(){window._sp_.usnat.loadPrivacyManagerModal(String(i))}),"gdpr"==e&&r.applies&&(document.getElementById("pmLink").style.visibility="visible",document.getElementById("pmLink").innerHTML="Privacy Preferences",document.getElementById("pmLink").onclick=function(){window._sp_.gdpr.loadPrivacyManagerModal(String(s))})}}}}}catch(e){console.error("Error in sourcepointGMPScript",e)}})({isGDPRCountry:n,isUspApplicable:i,mspsPrivacyManagerId:freestar.fsdata.mspsPrivacyManagerId||1035372,gdprPrivacyManagerId:freestar.fsdata.gdprPrivacyManagerId||899033}),n&&((()=>{try{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=function(){for(var e,n,i=[],s=window,r=s;r;){try{if(r.frames.__tcfapiLocator){e=r;break}}catch(e){}if(r===s.top)break;r=r.parent}e||(function e(){var t=s.document,n=!!s.frames.__tcfapiLocator;if(!n)if(t.body){var i=t.createElement("iframe");i.style.cssText="display:none",i.name="__tcfapiLocator",t.body.appendChild(i)}else setTimeout(e,5);return!n}(),s.__tcfapi=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];if(!t.length)return i;"setGdprApplies"===t[0]?t.length>3&&2===parseInt(t[1],10)&&"boolean"==typeof t[3]&&(n=t[3],"function"==typeof t[2]&&t[2]("set",!0)):"ping"===t[0]?"function"==typeof t[2]&&t[2]({gdprApplies:n,cmpLoaded:!1,cmpStatus:"stub"}):i.push(t)},s.addEventListener("message",(function(e){var n="string"==typeof e.data,i={};if(n)try{i=JSON.parse(e.data)}catch(e){}else i=e.data;var s="object"===t(i)&&null!==i?i.__tcfapiCall:null;s&&window.__tcfapi(s.command,s.version,(function(t,i){var r={__tcfapiReturn:{returnValue:t,success:i,callId:s.callId}};e&&e.source&&e.source.postMessage&&e.source.postMessage(n?JSON.stringify(r):r,"*")}),s.parameter)}),!1))},"undefined"!=typeof module?module.exports=e:e()}catch(n){console.error("Error in sourcepointGDPRScript",n)}var e})(),wo()),i&&((()=>{try{(()=>{var e=window,t=document;function n(t){var n="string"==typeof t.data;try{var i=n?JSON.parse(t.data):t.data;if(i.__cmpCall){var s=i.__cmpCall;e.__uspapi(s.command,s.parameter,(function(e,i){var r={__cmpReturn:{returnValue:e,success:i,callId:s.callId}};t.source.postMessage(n?JSON.stringify(r):r,"*")}))}}catch(i){}}!function n(){if(!e.frames.__uspapiLocator)if(t.body){var i=t.body,s=t.createElement("iframe");s.style.cssText="display:none",s.name="__uspapiLocator",i.appendChild(s)}else setTimeout(n,5)}(),"function"!=typeof __uspapi&&(e.__uspapi=function(){var e=arguments;if(__uspapi.a=__uspapi.a||[],!e.length)return __uspapi.a;"ping"===e[0]?e[2]({gdprAppliesGlobally:!1,cmpLoaded:!1},!0):__uspapi.a.push([].slice.apply(e))},__uspapi.msgHandler=n,e.addEventListener("message",n,!1))})()}catch(e){console.error("Error in sourcepointCCPAScript",e)}})(),wo()),Tn("https://cdn.privacy-mgmt.com/unified/wrapperMessagingWithoutDetection.js",t)}const _o=()=>Boolean(window.top.__uspapi);function So(e,t){const n=["4735792","38893584",_],i=t.fsdata?.disallowedGeos?.includes(t.locData.iso);if(e)return;if(Ur())throw new Error("Ad serving is blocked in "+t.locData.iso);if(i)return;t.fsdata.placements.some((e=>n.some((t=>e.dfpId&&e.dfpId.includes(t)))))&&(!function(){let e=ee({queue:[]},freestar);freestar.queue={push:function(e){googletag.cmd.push(e)}};for(let t=0;t<e.queue.length;t++)freestar.queue.push(e.queue[t])}(),t.newAdSlots=Eo,t.deleteAdSlots=Ao,t.refresh=ko,t.trackPageview=xo,t.config.enabled_slots.length&&(googletag.cmd.push((function(){googletag.pubads().setTargeting("fspbg","freestar")})),Eo(t.config.enabled_slots)))}function Eo(e,t){const n=q(e=e.filter((e=>void 0!==sa({name:e.placementName}))),"slotId");!t&&freestar.config.channel&&(t=freestar.config.channel),freestar.config.orignalChannel||(freestar.config.orignalChannel="{{channel}}"),t&&freestar.config.orignalChannel!==t&&(freestar.fsdata.placements=freestar.fsdata.placements.map((e=>(e.dfpId=e.dfpId.replace(freestar.config.orignalChannel,t),e))),freestar.config.orignalChannel=t),n.forEach((function(e){const{placementName:t,slotId:n,targeting:i}=e,s=document.getElementById(n),r=sa({name:t}),a=na(r);s&&s.id&&r&&a&&googletag.cmd.push((function(){const e=googletag.defineSlot(r.dfpId,a,r.name).addService(googletag.pubads());i&&Object.keys(i).forEach((t=>{e.setTargeting(t,i[t])})),googletag.pubads().enableSingleRequest(),googletag.enableServices(),googletag.display(s.id),googletag.pubads().refresh([e])}))}))}function Ao(e){void 0!==e?(Array.isArray(e)||(e=[e]),e.forEach((e=>{let t=zn({elementId:e});t&&googletag.destroySlots([t])}))):googletag.cmd.push((function(){googletag.destroySlots()}))}function ko(){}function xo(){}const To=["tcloaded","useractioncomplete"];let Co=!1,Ro=0;const Oo=e=>{const t={gdpr:!1,usp:{uspString:"1---"}};J()?(e=>{_o()?window.top.__uspapi("getUSPData",1,((t,n)=>n&&t.uspString?e(t.uspString):e(null))):e(null)})((n=>{n&&(t.usp={uspString:n}),e(t)})):yo()?(e=>{vo()?window.__tcfapi("getTCData",2,((t,n)=>n&&t.tcString?e(t.tcString):e(null))):e(null)})((n=>{n&&(t.gdpr={tcString:n}),e(t)})):e(t)};const Po=function(e){let{data:t}=e;const{eventStatus:n}=t;if(To.includes(n)){const{purpose:e,vendor:n}=t,i=e?e.consents:void 0,s=n?n.consents:void 0;return function(e){let{consents:t}=e;freestar.consentManagement.consentData={consents:{1:t?t[1]:void 0,10:t?t[10]:void 0}}}({consents:i}),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return!(!e||!n)&&n.every((t=>!!e[t]))}(i,1,10)&&function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return!(!e||!n)&&n.every((t=>!!e[t]))}(s,850)}};function No(e){let{isTCF:t}=e;if(void 0===freestar.fsdata.comscore||!1!==freestar.fsdata.comscore){window._comscore=window._comscore||[];const e={c1:"2",c2:"23384447"};t||(e.cs_ucfr=""),_comscore.push(e),Tn("https://sb.scorecardresearch.com/beacon.js")}}const Do=function(e){return Ro++,50===Ro?(clearTimeout(freestar.timers.tcfapi),freestar.timers.tcfapi=null,void No({isTCF:!1})):Ro<50&&!window.top.__tcfapi?(freestar.timers||(freestar.timers={}),void(freestar.timers.tcfapi=setTimeout((()=>Do(e)),500))):(freestar.timers&&freestar.timers.tcfapi&&(clearTimeout(freestar.timers.tcfapi),freestar.timers.tcfapi=null),void window.top.__tcfapi("addEventListener",2,(e=>(t,n)=>{if("cmpuishown"===t.eventStatus)return;const i=Po({data:t});No({isTCF:!0}),n?!Co&&i?(Co=!0,e()):So(i,window.freestar):freestar.log(1,"Error: TCF Callback Failed")})(e)))};const Lo="FREESTAR",Mo="FS_SOURCEPOINT_PUBFIG",Bo=(e,t,n)=>{const i=e===Mo,s=e===Lo,r=Boolean(window.top.__tcfapi),a=Boolean(window.top.__uspapi),o=J(t)&&!a,d=yo(t)&&!r;i&&(o||d)?Io(t,n):s&&(o||d)?function(e){const t=freestar.fsdata.quantcastDomain;if(t){var n="https://cmp.inmobi.com".concat("/choice/","wZt3yQfgdwnz-","/",t,"/choice.js?tag_version=V2"),i=0;Tn(n,e),function(){for(var e,t="__tcfapiLocator",n=[],i=window;i;){try{if(i.frames[t]){e=i;break}}catch(e){}if(i===window.top)break;i=i.parent}e||(function e(){var n=i.document,s=!!i.frames[t];if(!s)if(n.body){var r=n.createElement("iframe");r.style.cssText="display:none",r.name=t,n.body.appendChild(r)}else setTimeout(e,5);return!s}(),i.top.__tcfapi=function(){var e,t=arguments;if(!t.length)return n;if("setGdprApplies"===t[0])t.length>3&&2===t[2]&&"boolean"==typeof t[3]&&(e=t[3],"function"==typeof t[2]&&t[2]("set",!0));else if("ping"===t[0]){var i={gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"};"function"==typeof t[2]&&t[2](i)}else"init"===t[0]&&"object"==typeof t[3]&&(t[3]=Object.assign(t[3],{tag_version:"V2"})),n.push(t)},i.top.addEventListener("message",(function(e){var t="string"==typeof e.data,n={};try{n=t?JSON.parse(e.data):e.data}catch(e){}var i=n.__tcfapiCall;i&&window.top.__tcfapi(i.command,i.version,(function(n,s){var r={__tcfapiReturn:{returnValue:n,success:s,callId:i.callId}};t&&(r=JSON.stringify(r)),e&&e.source&&e.source.postMessage&&e.source.postMessage(r,"*")}),i.parameter)}),!1))}();var s=function(){var e=arguments;typeof window.top.__uspapi!==s&&setTimeout((function(){void 0!==window.top.__uspapi&&window.top.__uspapi.apply(window.top.__uspapi,e)}),500)};if(void 0===window.top.__uspapi){window.top.__uspapi=s;var r=setInterval((function(){i++,window.top.__uspapi===s&&i<3?console.warn("USP is not accessible"):clearInterval(r)}),6e3)}}else freestar.log(10,"loadQuantcast","Could not get quantcastDomain from fsdata, quantcast will not be loaded!")}(n):n(),function(e,t,n){const i=t||n,s={cmpType:e,tcfapi:t,uspapi:n};freestar?.analyticsQueue?.push(new nn({eventName:"PRIVACY_COMPLIANCE",eventType:`SITE_HAS_CMP=${i}`,data:s})),freestar.log(0,`PRIVACY_COMPLIANCE SITE_HAS_CMP=${i} ${JSON.stringify(s)}`)}(e,r,a)};function Fo(e){!function(){if(window.freestar.config.disabledProducts)for(const e in window.freestar.config.disabledProducts)Object.prototype.hasOwnProperty.call(window.freestar.config.disabledProducts,e)&&(void 0===window.freestar.config.products[e]?console.error(`Freestar product name: ${e} does not exist.`):window.freestar.config.products[e].disabled=window.freestar.config.disabledProducts[e])}(),A.indexOf(freestar.locData.iso)>-1?Do(e):(freestar.log(0,"Outside GDPR Zone"),e())}class Uo extends mo{constructor(e){let{player:t,placement:n,bids:i,uuid:s,videoAd:r}=e;super({player:t,uuid:s,placement:n}),this.videoAd=r,this.bids=i,this.consentData=null,Oo((e=>{this.consentData=e})),this.init()}init(){this.updateAdTagURL(),this.renderAd()}updateAdTagURL(){this.adTagUrl=`https://tv.springserve.com/rt/${this.videoAd.videoId}?w=400&h=225&url=${encodeURIComponent(location.href)}&cb=${Math.random()}&consent=${this.consentData&&this.consentData.gdpr?this.consentData.gdpr.tcString:""}&gdpr=${this.consentData&&this.consentData.gdpr?1:0}&us_privacy=${this.consentData&&this.consentData.usp?this.consentData.usp.uspString:""}&schain=1.0,1!${g},${window.freestar.fsdata.companyId},1,,,,`+this.getFloorBasedOnBids()+this.getAPSBids()+this.getGPID()}getGPID(){return this.placement.dfpId&&this.placement.name?`&gpid=${this.placement.dfpId}/${this.placement.name}`:""}getFloorBasedOnBids(){return this.bids.pbjsBids&&0!==this.bids.pbjsBids.length?`&bid_floor=${this.bids.pbjsBids[0].cpm}`:""}getAPSBids(){if(!this.bids.apsBids||this.bids.apsBids.length<=0)return"";const e=this.bids.apsBids[0];return"&amznbid="+e.amznbid+"&amzniid="+e.amzniid}}const $o={session:"session",page:"page"},zo={productOption:"productOption",placementSessionCap:"placementSessionCap",placementPageCap:"placementPageCap"};class qo{constructor(e){let{win:t=window,placement:n,product:i,callback:s,pageLevelCapPathOption:r=zo.placementPageCap,sessionLevelCapPathOption:a=zo.placementSessionCap}=e;this.win=t,this.placement=n,this.product=i,this.productKey=i+"Options",this.pageLevelCapPathOption=r,this.sessionLevelCapPathOption=a,this.key=`fs.${this.product}.sessionfrequencycap`,this.callback=s,this.pageLevelData={},this.sessionLevelData={},this.init()}init(){this.win.freestar?.frequencyLibraryV2||(this.win.freestar.frequencyLibraryV2={}),this.setCapData(),this.win.freestar.frequencyLibraryV2[this.placement.name]=this}resetIteration(){let{level:e=$o.page}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e===$o.page?this.pageLevelData.iteration=0:(this.sessionLevelData.iteration=0,sessionStorage.setItem(this.key,"0"))}incrementIteration(){this.pageLevelData.iteration++,this.sessionLevelData.iteration++,sessionStorage.setItem(this.key,this.sessionLevelData.iteration.toString())}subtractIteration(){this.win.freestar.log(1,"Frequency Cap: iteration will remove this attempt as an iteration. Setting new sessionStorage item value."),this.pageLevelData.iteration>0&&this.pageLevelData.iteration--,this.sessionLevelData.iteration>0&&(this.sessionLevelData.iteration--,sessionStorage.setItem(this.key,this.sessionLevelData.iteration.toString()))}getCapPath(e){return{[zo.productOption]:this.placement?.[this.productKey]?.cap,[zo.placementSessionCap]:this.placement?.sessionFrequencyCap,[zo.placementPageCap]:this.placement?.pageViewFrequencyCap}[e]}getCapValue(e){return e&&e>0?e:-1}setCapData(){this.pageLevelData={cap:this.getCapValue(this.getCapPath(this.pageLevelCapPathOption)),iteration:this.getIteration({level:$o.page})},this.sessionLevelData={iteration:this.getIteration({level:$o.session}),cap:this.getCapValue(this.getCapPath(this.sessionLevelCapPathOption))}}getIteration(){let{level:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e===$o.session){const e=sessionStorage.getItem(this.key);return Number(e)||0}if(e===$o.page)return this.pageLevelData.iteration||0}hasExceededCap(e){const{iteration:t,cap:n}=e;return n>0&&t>=n}isProductAllowed(){const e=this.hasExceededCap(this.sessionLevelData),t=this.hasExceededCap(this.pageLevelData);if(e||t){const t=e?"session":"page",n=e?this.sessionLevelData:this.pageLevelData;return this.win.freestar.log(1,`Frequency Cap: iteration of ${n.iteration} is higher than cap of ${n.cap}. ${this.product} will not run again until the next ${t}.`),!1}return this.win.freestar.log(1,`Frequency Cap: iteration of ${Math.max(this.sessionLevelData.iteration+1,this.pageLevelData.iteration+1)} is lower than or equal to the cap. Continue with ${this.product}.`),!0}}const jo={BR:{bottom:10,right:10},BL:{bottom:10,left:10},TR:{top:10,right:10},TL:{top:10,left:10},mobile:{top:10,left:"50%",transform:"translateX(-50%)"}},Vo="SMALL",Ho="LARGE",Go="CUSTOM",Wo=e=>{let{adLocation:t="BR",isMobile:n=!1,topSpacing:i,bottomSpacing:s}=e;const r=["TR","TL"].includes(t)&&n?jo.mobile:jo[t];return r?Object.entries(r).reduce(((e,t)=>{let[n,r]=t;return"top"===n&&"number"==typeof r&&i&&(r+=i),"bottom"===n&&"number"==typeof r&&s&&(r+=s),e+`${n}: ${(e=>"number"==typeof e?`${e}px`:e)(r)};`}),""):""},Yo=function(){let e,{width:t=0,maxWidth:n=null,widthOnMaxExceeded:i=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=t;return n&&t>n?(s=i||n,e=Qo(n)):e=Qo(s),[s,e]},Qo=e=>Math.round(9*e/16),Ko={[Vo]:()=>[312,176],[Ho]:()=>[400,225],[Go]:Yo},Jo={[Vo]:()=>["45%",300],[Ho]:()=>["100%",400],[Go]:Yo},Xo={[Vo]:()=>[300,200],[Ho]:()=>[400,300],[Go]:Yo},Zo={[Vo]:()=>[300,200],[Ho]:()=>[400,300],[Go]:Yo};class ed extends ho{static adType="INCONTENT";constructor(e){let{params:t,doc:n=document,win:i=window}=e;super({params:t}),this._loggingLevel=1,this._name="InContentVideoAd";const{callback:s,videoAd:r}=this.params;if(s&&"function"!=typeof s)throw new Error("Callback must be a function");this.callback=s,this.videoAd=r,this._document=n,this._window=i,this._stylesheetId=`fs-player-${this.uuid}`,this._containerId=`fs-player-container-${this.uuid}`,this.placement=this._createVideoPlacement(r),this.adUnit=this._createAdUnit(this.placement);const{timeToWaitBetweenVideos:a=5}=this.videoAd;this._delayBetweenAdsMs=1e3*a,this._nextAdTimeoutId=null,this.init()}init(){if(this.initFrequencyCap(),!this.frequencyCapManager.isProductAllowed())return this.callback(null,{uuid:this.uuid});if(!this.targetElement)return this._window.freestar.log(this._loggingLevel,`${this._name}: Target element "${this.videoAd.name}" not found.`),void this.callback?.(`Target element "${this.videoAd.name}" not found.`,{uuid:this.uuid});this._validateVideoAd()&&(this.addHTML(),this.addCSS(),this._window.fsprebid.addAdUnits([this.adUnit]),this._requestFirstBid(),this._window.freestar.log(this._loggingLevel,`InContentVideoPlayer: Initialized for "${this.videoAd.name}"`))}initFrequencyCap(){const{videoAd:e}=this.params,{vendor:t,adType:n}=e;this.frequencyCapManager=new qo({placement:e,product:`${t}_${n}`,win:this._window})}get targetElement(){const{parentElement:e,classIndex:t,name:n}=this.videoAd;if(e){const n=t>-1?t:0;return this._document.querySelectorAll(e)[n]}return this._document.getElementById(n)}get playerContainerElement(){return this._document.getElementById(this._containerId)}addHTML(){if(!this.playerContainerElement){const e=kn({type:"div",id:this._containerId});this.targetElement.appendChild(e)}}_removeHTML(){this.playerContainerElement?.remove()}_addVideoElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.playerContainerElement;if(!e)return;let t=this._document.getElementById(this._playerId);t||(t=kn({type:"video",id:this._playerId,classList:["video-js","vjs-16-9","vjs-default-skin"],attributes:[{muted:!0},{playsinline:!0}]}),e.appendChild(t))}addCSS(){const{width:e,height:t}=this._getVideoPlayerDimensions();let n=!1,i=this._document.getElementById(this._stylesheetId);i||(i=kn({type:"style",id:this._stylesheetId}),n=!0),i.textContent=`\n            #${this._containerId} {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n\n                width: ${e};\n                min-height: ${t};\n\n                margin: 0 auto;\n                border-radius: 10px;\n\n                position: relative;\n\n                border-radius: 10px;\n                border: 0px;\n                overflow: hidden;\n            }\n\n            #${this._containerId}:after {\n                content: 'ADVERTISEMENT';\n\n                display: block;\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translateX(-50%);\n                z-index: 1;\n\n                font-family: sans-serif;\n                font-size: 0.8rem;\n                color: #646464;\n            }\n        `,n&&this._document.head.appendChild(i)}_getVideoPlayerDimensions(){const e=this._window.freestar.deviceInfo.device.type===He?Jo:Ko,t=e[this.videoAd.playerSize]||e[Ho],[n,i]=t({width:this.videoAd.width});return{width:"number"==typeof n?`${n}px`:n,height:"number"==typeof i?`${i}px`:i}}renderAd(e){this._addVideoElement(),this.addPlayer(),this.bindEvents(),this._window.freestar.debug&&this._window.freestar.log(this._loggingLevel,`${this._name}: Rendering Ad for "${this.videoAd.name}"`),this.bids=e,this.renderer=new Uo({player:this.player,bids:e,placement:this.placement,videoAd:this.videoAd}),this.onRender?.()}completeAd(){if(this.player){if(this.player.dispose(),this.player=null,this.renderer=null,this._window.freestar.debug&&this._window.freestar.log(this._loggingLevel,`${this._name}: Video Ad "${this.videoAd.name}" completed.`),this.frequencyCapManager.incrementIteration(),!this.frequencyCapManager.isProductAllowed())return this.callback(null,{uuid:this.uuid});this._scheduleNextAd(),this.onCompleted?.()}}handleEndedEvent(){this.completeAd()}handleAdsReadyEvent(){this.player.play()}handleAdsErrorEvent(){const{pbjsBids:e}=this.bids??{},[t]=e||[];this.renderer instanceof Uo&&t?.cpm>=1?this.renderer=new go({player:this.player,adTagUrl:t.vastUrl}):this.completeAd()}handleAllAdsCompleteEvent(){this.completeAd()}remove(){this.player?.dispose(),this._removeHTML(),this._window.clearTimeout(this._nextAdTimeoutId),this._window.fsprebid.removeAdUnit(this.adUnit.code)}_scheduleNextAd=(()=>{var e=this;return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e._delayBetweenAdsMs;e._nextAdTimeoutId&&e._window.clearTimeout(e._nextAdTimeoutId),e._window.freestar.debug&&e._window.freestar.log(e._loggingLevel,`${e._name}: Scheduling next Ad in ${t}ms for "${e.videoAd.name}"`),e._nextAdTimeoutId=e._window.setTimeout((()=>{e._requestBids()}),t)}})();_requestBids(){this.request=new po({aps:this.videoAd.amazonActive,apsSlot:this.videoAd.amazonApsSlot||null,pbjs:!0,pbjsCode:this.adUnit.code,cb:this._handleBidResponse})}_requestFirstBid(){this.videoAd.delayTime?this._scheduleNextAd(1e3*this.videoAd.delayTime):this._requestBids()}_handleBidResponse=(()=>{var e=this;return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.renderAd(t)}})();_createVideoPlacement(e){const{name:t,prebidStoredRequestId:n}=e,i=this._getPlayerSize();return{name:t,bidders:[{bidder:"appnexus",params:{placementId:32347997}}],sizes:i,ignoreSiteBidders:!0,sizeMappings:[{size:i,viewport:{size:[0,0]},mediaTypes:["video"]},{size:i,viewport:{size:[768,0]},mediaTypes:["video"]}],storedRequestId:n}}_getPlayerSize(){const{width:e,playerSize:t}=this.videoAd,n=this._window.freestar.deviceInfo.device.type===He?Zo:Xo;return[(n[t]??n[Ho])({width:e})]}_createAdUnit(e){const t=In(e);return t.mediaTypes.video={...t.mediaTypes.video,context:"outstream",renderer:{url:`${b}/videos/blank1s-20231016.mp4`,render:()=>{}}},this._window.fsprebid.addAdUnits([t]),t}_validateVideoAd(){const{adType:e,vendor:t}=this.videoAd;return e===this.constructor.adType&&"FREESTAR_OUTSTREAM_PLAYER"===t||(this._window.freestar.log(this._loggingLevel,`${this._name}: Invalid ad type or vendor for "${this.videoAd.name}".`),this.callback?.(`Invalid ad type or vendor for "${this.videoAd.name}".`,{uuid:this.uuid}),!1)}}const td={[Ve]:{[Vo]:()=>["312px","176px"],[Ho]:()=>["400px","225px"],[Go]:Yo},[He]:{[Vo]:()=>["45%","112px"],[Ho]:()=>["100%","175px"],[Go]:e=>Yo({...e,maxWidth:300,widthOnMaxExceeded:"100%"})}};let nd=!1,id=!1;class sd extends ho{constructor(e){let{params:t}=e;super({params:t}),this.params=t;const{callback:n,videoAd:i,placement:s}=this.params;this.callback=n,this.placement=s,this.videoAd=i,this.videoPlacement=(e=>{const{name:t,sizeMappings:n}=Ne(e),i={name:t,bidders:[{bidder:"appnexus",params:{placementId:32347997}},{bidder:"pubmatic",params:{adSlot:"Freestar_FOP_RON_Outstream",publisherId:156696,siteId:1260033}}],sizes:[[400,300]],sizeMappings:n};return i.name=i.name+"_outstream",i.ignoreSiteBidders=!0,i.sizeMappings=i.sizeMappings.map((e=>(e.mediaTypes=["video"],e.playerSize&&"LARGE"===e.playerSize&&(e.size=[[400,300]]),e.playerSize&&"SMALL"===e.playerSize&&(e.size=[[300,200]]),e))),i._storedRequestId="6d0caa66-2299-488d-a87a-1a82fcea7862",i})(this.placement),this.prebidAdUnit=this.addPrebidAdUnit(),this.pbjsConfigs={original:{ortb2:{...fsprebid.getConfig("ortb2")},s2sConfig:{...fsprebid.getConfig("s2sConfig")}},outstream:{ortb2:{...fsprebid.getConfig("ortb2")},s2sConfig:{...fsprebid.getConfig("s2sConfig")}}},this.pbjsConfigs.outstream.ortb2.ext.prebid.storedrequest||(this.pbjsConfigs.outstream.ortb2.ext.prebid.storedrequest={}),this.pbjsConfigs.outstream.ortb2.ext.prebid.storedrequest.id="6d0caa66-2299-488d-a87a-1a82fcea7862",this.pbjsConfigs.outstream.s2sConfig.bidders=["appnexus"],this.init()}init(){id||(id=!0,this.sendEvent({type:"videoTagLoaded",value:{player:lo,placementId:this.placement.name}})),this.sendEvent({type:"videoPlayerLoaded",value:{player:lo,placementId:this.placement.name}}),this.initFrequencyCap(),this.frequencyCapManager.isProductAllowed()&&(this.addCSS(),this.addHTML(),this.addPlayer(),this.bindEvents(),nd||(fsprebid.onEvent(zt,(e=>{e.adUnitCodes.includes(this.prebidAdUnit.code)&&this.updatePrebidConfig("original")})),nd=!0),this.updatePrebidConfig(),this.requestBids())}addPrebidAdUnit(){const e=In(this.videoPlacement);return e.mediaTypes.video.context="outstream",window.fsprebid.addAdUnits([e]),e}initFrequencyCap(){const{videoAd:e}=this.params,{vendor:t,adType:n}=e;this.frequencyCapManager=new qo({placement:e,product:`${t}_${n}`})}getDeviceType(){return freestar.deviceInfo.device.type!==He?Ve:He}getVideoPlayerDimensions(){const e=this.getDeviceType(),t=this.videoAd?.playerSize,n=this.videoAd.width,i=td[e]||td[Ve],s=i[t]||i[Ho],[r,a]=s({width:n});return{width:"number"==typeof r?`${r}px`:r,height:"number"==typeof a?`${a}px`:a}}addHTML(){const e=kn({type:"div",id:"fs-player-container",classList:["fs-hide"]});e.innerHTML=`\n            <div class='fs-player-close' aria-labe='Close Player'>\n                <button class='fs-close-button'>&nbsp;</button>\n            </div>\n            <div class='fs-player-container-shim'>\n                <video id='fsPlayer_${this.uuid}' muted playsinline class='video-js vjs-16-9 vjs-default-skin'></video>\n            </div>\n        `,document.body.appendChild(e),e.querySelector("button").addEventListener("click",(()=>{this.remove({params:{userEnded:!0}})}))}addCSS(){const e=kn({type:"style",id:"fs-video-player"}),{width:t,height:n}=this.getVideoPlayerDimensions(),i="B"===this.videoAd.videoAdhesionPosition.split("")[0]?"bottom":"top",s="R"===this.videoAd.videoAdhesionPosition.split("")[1]?"right":"left";e.textContent=`\n            #fs-player-container {\n                position: fixed;\n                border: 1px solid black;\n                border-radius: 5px;\n                overflow: visible;\n                background-color: black;\n                z-index: 2147483647;\n                ${i}: 0;\n                ${s}: 0;\n                width: ${t};\n                height: ${n};\n                transition: ${s} .5s;\n            }\n            .fs-player-close {\n                position: absolute;\n                top: -13px;\n                right: 5px;\n                width: 20px;\n                height: 20px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                z-index: 2147483647;\n            }\n            .fs-player-close button {\n                top: inherit !important;\n                right: inherit !important;\n            }\n            #fs-player-container.fs-hide {\n                visibility: hidden;\n            }\n            #fs-player-container.fs-hide * {\n                visibility: hidden;\n            }\n        `,this.getDeviceType()===Ve?e.textContent+=`\n                #fs-player-container {\n                    box-shadow: 0px 0px 15px 0px rgba(0,0,0,0.75);\n                    ${i}: 10px;\n                }\n                #fs-player-container.fs-hide {\n                    ${s}: -${t};\n                }\n                #fs-player-container.fs-show {\n                    ${s}: 10px;\n                }\n            `:e.textContent+="\n                .fs-player-container-shim {\n                    margin: 0 auto;\n                    max-width: 300px;\n                }\n            ",document.head.appendChild(e)}updatePrebidConfig(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"outstream",t=fsprebid.getConfig("s2sConfig"),n=fsprebid.getConfig("ortb2");if("outstream"===e)t.bidders=["appnexus","pubmatic"],n.ext.prebid.storedrequest.id="6d0caa66-2299-488d-a87a-1a82fcea7862";else t.bidders=this.pbjsConfigs.original.s2sConfig.bidders,n.ext.prebid.storedrequest.id=this.pbjsConfigs.original.ortb2.ext.prebid.storedrequest.id;window.fsprebid.mergeConfig({s2sConfig:t,ortb2:n})}requestBids(){this.request=new po({aps:this.videoAd.amazonActive,apsSlot:this.videoAd.amazonApsSlot||null,pbjs:!0,pbjsCode:this.prebidAdUnit.code,cb:this.handleBidResponse.bind(this)})}handleBidResponse(e){this.sendPbjsBidsEvent(),this.renderAd({data:e})}sendPbjsBidsEvent(){this.request.pbjsBids?.forEach((e=>{this.sendEvent({type:"videoBidRequest",value:{placementId:this.placement.name,player:lo,bids:[e]}})}))}renderAd(e){let{data:t}=e;this.bids=t,this.renderer=new Uo({player:this.player,bids:this.bids,placement:this.placement,videoAd:this.videoAd})}handleAdsReadyEvent(){this.player.play()}handleAdsErrorEvent(){const{pbjsBids:e=[]}=this.bids;this.renderer instanceof Uo&&e&&0!==e.length&&e[0].cpm>=1?this.renderer=new go({player:this.player,adTagUrl:this.bids.pbjsBids[0].vastUrl}):this.remove({error:!1})}handleImpressionEvent(e){let{event:t}=e;if(this.show(),Ha({bidder:ao,requestTimestamp:Date.now(),videoAd:this.videoAd,playerType:this.renderer instanceof Uo?"springserve":"prebid"}),this.renderer instanceof go){const e={...this.request.pbjsBids[0]};e.videoAdserverTargeting=[e.adserverTargeting],delete e.adserverTargeting,this.sendEvent({type:"videoBidImpression",value:{player:lo,placementId:this.placement.name,...e}})}const{adSystem:n,creativeAdId:i,creativeId:s,duration:r,universalAdIds:a,vastMediaHeight:o,vastMediaWidth:d}=t.ad.data;this.sendEvent({type:"videoAdImpression",value:{player:lo,placementId:this.placement.name,adSystem:n,creativeAdId:i,creativeId:s,duration:r,universalAdIds:a,vastMediaHeight:o,vastMediaWidth:d}})}handleAllAdsCompleteEvent(){this.frequencyCapManager.incrementIteration(),this.hide(),this.remove({})}show(){const e=document.getElementById("fs-player-container");e&&(e.classList.remove("fs-hide"),e.classList.add("fs-show"))}hide(){const e=document.getElementById("fs-player-container");e&&(e.classList.add("fs-hide"),e.classList.remove("fs-show"))}remove(e){let{error:t=!1,executeCallback:n=!0}=e;this.hide(),fsprebid.removeAdUnit(this.prebidAdUnit.code);const i=document.getElementById("fs-player-container");i&&i.remove();const s=document.getElementById("fs-video-player");s&&s.remove(),this.frequencyCapManager.isProductAllowed()&&this.callback&&n&&this.callback(t,{ended:!0})}}class rd extends ed{static adType="FLOATING";constructor(e){let{params:t,doc:n=document,win:i=window}=e;super({params:t,doc:n,win:i}),this._name="FloatingVideoAd"}get targetElement(){const{parentElement:e,classIndex:t,name:n}=this.videoAd;if(e){const n=t>-1?t:0;return this._document.querySelectorAll(e)[n]}const i=this._document.getElementById(n);return i||this._document.body}addCloseButton(){if(!this.playerContainerElement)return;const e=kn({type:"div",classList:["fs-player-close"],attributes:[{"aria-label":"Close Player"}]}),t=kn({type:"button",classList:["fs-close-button"]});t.innerHTML="&nbsp;",t.addEventListener("click",(()=>this.callback(null,{uuid:this.uuid}))),e.appendChild(t),this.playerContainerElement.appendChild(e)}addHTML(){super.addHTML(),this.addCloseButton()}addCSS(){const{width:e,height:t}=this._getVideoPlayerDimensions();let n=!1,i=this._document.getElementById(this._stylesheetId);i||(i=kn({type:"style",id:this._stylesheetId}),n=!0),i.textContent=`\n            #${this._containerId} {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n\n                width: ${e};\n                min-height: ${t};\n\n                margin: 0 auto;\n                border-radius: 10px;\n                border: 0px;\n\n                position: fixed;\n                z-index: 9999;\n                ${this._adPosition}\n            }\n\n            #${this._containerId} .fs-player-close {\n                visibility: hidden;\n\n                position: absolute;\n                ${["TL","TR"].includes(this._adLocation)?"bottom":"top"}: -13px;\n                right: 5px;\n\n                z-index: 10000;\n            }\n\n            #${this._containerId} .fs-player-close button {\n                top: inherit !important;\n                right: inherit !important;\n            }\n        `,n&&this._document.head.appendChild(i)}get _adPosition(){const{headerHeight:e}=this.videoAd,{bottomSpacing:t}=this.params||{},n=(this._window.freestar.deviceInfo.device.type||Ve)===He;return Wo({adLocation:this._adLocation,isMobile:n,topSpacing:e,bottomSpacing:t})}get _adLocation(){return this.videoAd.adLocation||"BR"}_setCloseButtonVisibility(e){const t=this.playerContainerElement.querySelector(".fs-player-close");t&&(t.style.visibility=e?"visible":"hidden")}onRender(){this._setCloseButtonVisibility(!0)}onCompleted(){this._setCloseButtonVisibility(!1)}}const ad={root:null,rootMargin:"0px",threshold:.5},od="fs-in-content",dd="fs-floating";class ld extends ed{static adType="INCONTENT_TO_FLOATING";constructor(e){super(e),this._name="InContentToFloatingVideoAd",this._observer=null,this._isInFloatingMode=!1,this._isLockedInContent=!1,this._attachIntersectionObserver()}addHTML(){if(!this.playerContainerElement){const e=Aa({classList:["fs-close-button"]});e.addEventListener("click",(()=>this._handleClose()));const t=kn({type:"div",id:this._containerId,children:[kn({type:"div",classList:["fs-player-close"],attributes:[{"aria-label":"Close Player"}],children:[e]})]}),n=kn({type:"div",id:`${this._containerId}-placeholder`,children:[t]});this.targetElement.appendChild(n)}}addCSS(){const{width:e,height:t}=this._getVideoPlayerDimensions(),n=this._window.freestar.deviceInfo?.device?.type===He,{headerHeight:i}=this.videoAd,{bottomSpacing:s}=this.params||{};let r=!1,a=this._document.getElementById(this._stylesheetId);a||(a=kn({type:"style",id:this._stylesheetId}),r=!0),a.textContent=`\n                #${this._containerId}-placeholder {\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n\n                    width: ${e};\n                    min-height: ${t};\n\n                    margin: 0 auto;\n                    border-radius: 10px;\n\n                    position: relative;\n\n                    overflow: hidden;\n                }\n\n                #${this._containerId}-placeholder:after {\n                    content: 'ADVERTISEMENT';\n\n                    display: block;\n\n                    position: absolute;\n                    top: 50%;\n                    left: 50%;\n                    z-index: 1;\n                    transform: translateX(-50%);\n\n                    font-family: sans-serif;\n                    font-size: 0.8rem;\n                    color: #646464;\n                }\n\n                #${this._containerId} {\n                    width: ${e};\n                    min-height: ${t};\n\n                    border-radius: 10px;\n                    border: 0px;\n                }\n\n                .${od} {\n                    position: relative;\n                }\n\n                .${dd} {\n                    position: fixed;\n                    z-index: 9999;\n\n                    ${Wo({adLocation:this._adLocation,isMobile:n,topSpacing:i,bottomSpacing:s})}\n                }\n\n                #${this._containerId} .fs-player-close {\n                    visibility: hidden;\n\n                    position: absolute;\n                    ${["TL","TR"].includes(this._adLocation)?"bottom":"top"}: -13px;\n                    right: 5px;\n\n                    z-index: 10000;\n                }\n\n                #${this._containerId} .fs-player-close button {\n                    top: inherit !important;\n                    right: inherit !important;\n                }\n            `,r&&this._document.head.appendChild(a)}_setCloseButtonVisibility(e){const t=this.playerContainerElement.querySelector(".fs-player-close");t&&(t.style.visibility=e?"visible":"hidden")}_removeHTML(){const e=this._document.getElementById(`${this._containerId}-placeholder`);e?.remove()}remove(){super.remove(),this._observer?.disconnect(),this._observer=null}_updateStyles(){if(!this.playerContainerElement)return;const{classList:e}=this.playerContainerElement;if(this._isInFloatingMode&&!this._isLockedInContent)return e.add(dd),void e.remove(od);e.remove(dd),e.add(od)}get _adLocation(){return this.videoAd.adLocation||"BR"}_handleClose(){this._isLockedInContent=!0,this._updateStyles()}_attachIntersectionObserver(){this._observer=new IntersectionObserver(this._onIntersection,ad),this._observer.observe(this.targetElement)}_onIntersection=e=>{e.forEach((e=>{const t=!e.isIntersecting;t!==this._isInFloatingMode&&(this._isInFloatingMode=t,this._updateStyles())}))};onRender(){this._setCloseButtonVisibility(!0)}onCompleted(){this._setCloseButtonVisibility(!1)}}class cd{videoPlayers={};_stickyFooterVideo;constructor(e){let{freestar:t,eventBus:n,dispensaryData:i,fopVideoManager:s}=e;this._freestar=t,this._dispensaryData=i,this._videoManager=s,this._videoManager.addPlayers({OUTSTREAM:sd,INCONTENT:ed,FLOATING:rd,INCONTENT_TO_FLOATING:ld}),n.subscribe(Cs,(e=>{let{payload:{stickyFooterHeight:t}}=e;this._updateBottomSpacingInAllPlayers(t)}))}_updateBottomSpacingInAllPlayers(e){Object.values(this.videoPlayers).forEach((t=>{t.updateBottomSpacing(e)}))}remove(e){let{uuid:t=null,name:n=null}=e;t&&this.videoPlayers[t]&&(this.videoPlayers[t].remove(),delete this.videoPlayers[t]),n&&Object.keys(this.videoPlayers).forEach((e=>{this.videoPlayers[e].videoAd.name===n&&this.videoPlayers[e].remove({executeCallback:!1})}))}add=async e=>{if(ji({name:"video"}))return;const t=this._dispensaryData.fsdata.videoAds.find((t=>t.name===e));if(!t)return;const{vendor:n,device:i,name:s,videoSelect:r,adType:a}=t;if(n&&i&&this._isVideoAllowed({device:i,videoSelect:r})){if(freestar.log({title:bi},`${s} eligible to run with device type ${freestar.deviceInfo.device.type} and is a ${n} video.`),"FREESTAR_OUTSTREAM_PLAYER"===n){const e=(e,t)=>{t?.uuid&&this.remove({uuid:t.uuid})},n=await this._videoManager.add({params:{videoAd:t,callback:e},type:a});this.videoPlayers[n.uuid]=n;const i=Os();return void n.updateBottomSpacing(i)}const e={connatixInit:so,primisInit:io,connatixplayspaceInit:ro,stnInit:Xa},i=`${n.split("_").join("").toLowerCase()}Init`;e[i]&&e[i](t)}};init=(()=>{var e=this;return function(){let{isAfterLoadingPage:t=!1,failSafeStart:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e._dispensaryData.fsdata.videoAds&&e._dispensaryData.fsdata.videoAds.length&&(performance.mark("video-initialization-start"),e._dispensaryData.fsdata.videoAds.forEach((i=>{i&&(i.videoAdStarted||"VIDEO_ADHESION_FLOATING"!==i.adType&&(!n&&(!t&&i.delayVideoAd||t&&!i.delayVideoAd)||(e._freestar.log(1,`VIDEO: Checking to see if ${i.name} should run`),i.onCallVideo?e._freestar.log(1,"VIDEO: Video is on call and will not run until the freestar.newVideo method is ran"):(e._freestar.log(1,`VIDEO: ${i.name} is being created!`),e.add(i.name)),i.videoAdStarted=!0)))})),performance.mark("video-initialization-end"))}})();get stickyFooterVideoInstance(){return this._stickyFooterVideo||(this._stickyFooterVideo=new Ja({freestar:this._freestar,freestarOutstreamVideo:e=>{let{videoAd:t,callback:n,placement:i}=e;const s={videoAd:t,callback:n,placement:i};this._videoManager.add({params:s,type:"OUTSTREAM"}).then((e=>{this.videoPlayers[e.uuid]=e}))}})),this._stickyFooterVideo}_isVideoAllowed=e=>{let{device:t=Ve,videoSelect:n}=e;return this._videoDeviceCheck({videoDeviceType:t.toLowerCase()})||"ALL_DEVICES"===t&&this._videoAllowed({videoSelect:n})};_videoAllowed=e=>{let{videoSelect:t}=e;return!(t&&t.length&&(!t?.length||null===document.getElementById(t)))};_videoDeviceCheck=e=>{let{videoDeviceType:t}=e;return"all_devices"===t||(freestar.deviceInfo.device.type===t||freestar.deviceInfo.device.type===Ge&&t===Ve)}}r.class(cd,{token:Ht.VIDEO,dependencies:["freestar",Ht.EVENT_BUS,Ht.DISPENSARY_DATA,Ht.FOP_VIDEO_MANAGER],defaultAlias:"video"});class ud{injectedCSS={common:!1,heights:{}};init=()=>{performance.mark("slidingUnit-initialization-start");const e=freestar.fsdata.placements.filter((e=>this._isSlidingUnit({placement:e})));e.length&&e.forEach((e=>{this.attachSlidingUnit({adUnit:e})})),performance.mark("slidingUnit-initialization-end")};_isSlidingUnit(e){let{placement:t}=e;return f({placement:t,type:l.SLIDING_UNIT_OPTIONS})&&!f({placement:t,type:l.DYNAMIC_AD_OPTIONS})}_anyAncestorsHaveOverflow(e){let{element:t,overflowChecks:n=[]}=e;const i=t.parentElement;if(i){aa({element:i})?n.push(1):(n.push(0),this._anyAncestorsHaveOverflow({element:i,overflowChecks:n}))}return Math.max(...n)>0}attachSlidingUnit(e){let{adUnit:t,slotId:n=null}=e;const{height:i,topPadding:s,type:r}=h({placement:t,type:"slidingUnitOptions"}),a=freestar.deviceInfo.device.type===r?.toLowerCase();if(ji({name:"slidingUnit"})||!a)return!1;const o=n||t.name,d=document.getElementById(o);if(d){if(this._anyAncestorsHaveOverflow({element:d.parentElement}))return console.error("Sliding unit initialization failed: An ancestor DOM element contains an overflow rule."),!1;this._injectStyle({height:i,topPadding:s});(e=>{let{wrapper:t,node:n}=e;t.innerHTML=n.outerHTML,n.parentNode.insertBefore(t,n),n.remove()})({wrapper:kn({classList:["fs-su-ad"]}),node:d})}else console.error(`Sliding unit initialization failed: No ${d} DOM element found in page.`)}_injectStyle(e){let{height:t,topPadding:n=null}=e;this.injectedCSS.common||(this.injectedCSS.common=!0,ta(`\n            .fs-su-ad > div {\n                top: 0;\n                position: sticky;\n                padding-top: ${n||0}px;\n            }\n        `)),this.injectedCSS.heights[`height-${t}`]||(this.injectedCSS.heights[`height-${t}`]=!0,ta(`\n            .fs-su-ad {\n                position: relative;\n                height: ${1.5*t}px;\n            }\n        `))}}r.class(ud,{token:"SlidingUnit",defaultAlias:"slidingUnit"});const fd=["teads"];class hd{constructor(){this.scrollingAds=[],this.totalScrollHeight=0}init=()=>{freestar.fsdata.placements.forEach((e=>{this.isSlidingUnit({placement:e})&&this.attachSlidingUnit({adUnit:e})}))};_isBlockedByBidder(e){const{bids:t=[]}=fsprebid.getBidResponsesForAdUnitCode(e)||{};return t.some((e=>{let{bidder:t,status:n}=e;return fd.includes(t)&&"rendered"===n}))}handleIntersection(e){e.forEach((function(e){const{boundingClientRect:t,target:n}=e,i=n.children[0],s=i.children[0];if(!s)return;const r=this.scrollingAds.find((e=>e.id===s.id));if(!e.isIntersecting||r&&this._isBlockedByBidder(r.id))return void("fixed"===i.style.position&&xn(i,{position:"",top:""}));if(!r||!s)return;const{top:a}=s.getBoundingClientRect(),o=s.offsetHeight,{top:d}=i.getBoundingClientRect();let{top:l,bottom:c}=t;l+=document.documentElement.scrollTop,c=c+document.documentElement.scrollTop-o,freestar.debug&&this.debug({target:n,top:l,bottom:c});const u=Math.floor(a-d);let f=Math.max(document.documentElement.scrollTop+r.headerHeight,0);xn(i,f>l+2*u&&f<c?{position:"fixed",top:r.headerHeight-u+"px",marginTop:"0px"}:f>c?{position:"",top:"",marginTop:r.maxHeight-o+"px"}:{position:"",top:"",marginTop:"0px"})}),this)}debug(e){let{target:t,top:n,bottom:i}=e;const s=t.id,r=CSS.escape(s);[...document.querySelectorAll(`.${r}.fs-sau`)].forEach((e=>e.parentElement.removeChild(e)));const a=kn({type:"style",classList:["fs-sau"]});a.textContent=`\n        .${r}.fs-sau-marker {\n            height: 2px;\n            width: 100%;\n            background-color: rgba(0,0,0,0.5);\n            position: absolute;\n            left: 0;\n            z-index: 1000;\n        }\n        .${r}.fs-sau-marker.fs-sau-top {\n            top: ${n}px;\n        }\n        .${r}.fs-sau-marker.fs-sau-bottom {\n            top: ${i}px;\n        }\n        `,document.head.appendChild(a);let o=kn({type:"div",classList:[s,"fs-sau","fs-sau-marker","fs-sau-top"]});document.body.appendChild(o),o=kn({type:"div",classList:[s,"fs-sau","fs-sau-marker","fs-sau-bottom"]}),document.body.appendChild(o)}isSlidingUnit(e){let{placement:t}=e;return!!t.sizeMappings&&t.sizeMappings.some((e=>e.stickyAdEnabled))}attachSlidingUnit(e){let{adUnit:t,slotId:n=null}=e;if(!this.isSlidingUnit({placement:t}))return;const i=document.getElementById(`${n||t.name}`),{adScrollHeight:s,headerHeight:r=0,stickyAdEnabled:a=0,size:o,stickyAdBackgroundRgba:d}=this.getPlacementStickyAdDetailsByScreenResolution(t),l=n||i?.getAttribute("id"),c=`${l}_container`,u=i?.parentNode?.getAttribute("id")===c;if(i&&a&&!u&&0!==s){const{freestarAd:e}=i.dataset;e&&i.removeAttribute("data-freestar-ad");const t=kn({type:"div"});t.setAttribute("id",c);const n=o?.[0]?.[0];t.classList.add("sliding-ad-container"),xn(t,{"min-width":n?`${n}px`:"100%",width:"100%",height:`${s}px`,overflow:"hidden",justifyContent:"center",display:"inline-flex",...d&&{backgroundColor:d}});const a=kn({type:"div",id:`${l}_sliding-ad-shim`});i.parentNode.insertBefore(t,i),a.appendChild(i),t.appendChild(a),this.scrollingAds.push({id:l,maxHeight:s,headerHeight:r});new IntersectionObserver(this.handleIntersection.bind(this),{rootMargin:`-${r}px 0px 0px 0px`,threshold:this.buildThresholdList(s/2)}).observe(t)}}buildThresholdList(e){let t=[];for(let n=5;n<=e;n++){let i=n/e;t.push(i)}return t.push(0),t}getPlacementStickyAdDetailsByScreenResolution(e){let t=!1;return e.sizeMappings.some((e=>{if(Rr()>=e.viewport.size[0]){const{adScrollHeight:n,headerHeight:i,stickyAdEnabled:s,size:r,stickyAdBackgroundRgba:a=null}=e;return t={adScrollHeight:n,headerHeight:i,stickyAdEnabled:s,size:r,stickyAdBackgroundRgba:a},!0}})),t}}r.class(hd,{token:"StickyAd",defaultAlias:"stickyAd"});class pd{pushdownElementClassName="fs-pushdown";pushdownElementStickyClassName=`${this.pushdownElementClassName}-sticky`;constructor(e){this.placement=e,this.options=h({placement:e,type:l.PUSHDOWN_OPTIONS}),this.clsEnabled=Me()||this.options.clsEnabled,this.clsElement=this.clsElementFetch(),this.pushdownElement=this.pushdownElementFetch(),this.closeButton=void 0,this.removedSticky=!1,this.optCookieName="fs.pushdown.optout",this.initStickyTimeRemove=!1,this.initStickyType=!1}clsElementFetch(){return!(!Me()&&!this.options.clsEnabled)&&document.getElementById(this.placement.name+"-pushdown-cls")}pushdownElementFetch(){let e=document.getElementById(this.placement.name);e||(e=document.createElement("div"),e.id=this.placement.name,this.pushdownElement=e),e.style.backgroundColor=this.placement.pushdownOptions.backgroundRgba?this.placement.pushdownOptions.backgroundRgba:"rgba(247,247,247,.9)",this.options.zIndex&&this.options.zIndex>0&&(e.style.zIndex=this.options.zIndex),e.setAttribute("align","center");const t=document.getElementsByClassName(this.pushdownElementClassName)[0];if(this.clsElement)if(t)t.appendChild(e);else{let t=document.createElement("div");t.classList.add("wrapper-"+this.placement.name),t.classList.add(this.pushdownElementClassName),t.style.left="-9999px",t.style.visibility="hidden",t.appendChild(e),this.clsElement.appendChild(t)}if(!this.clsEnabled&&(this.options.isBodyZero&&(n=document.body.getElementsByTagName("*")[0],i=this.pushdownElement,s=this.placement,i&&n&&s&&(document.body.insertBefore(i,n),document.body.getElementsByTagName("*")[0].id,s.name)),this.options.domElement&&this.options.domElement.length>0)){const e=document.querySelectorAll(this.options.domElement)[this.options.domElementIndex&&this.options.domElementIndex>0?this.options.domElementIndex:0];this.pushdownDomWorker(e)}var n,i,s;return this.options.customCode&&this.options.customCode.length>1&&ta(this.options.customCode),e}pushdownDomWorker(e){e&&e.parentElement&&(this.pushdownElement.className=this.pushdownElementClassName,e.parentElement.insertBefore(this.pushdownElement,e))}valid(){return this.clsEnabled&&!this.clsElement?(freestar.log(1,`Pushdown: CLS Enabled and CLS Element ${this.placement.name+"-pushdown-cls"} is not found. Exiting Pushdown!`),!1):this.clsEnabled&&this.clsElement?(freestar.log(1,`Pushdown: CLS Enabled and CLS Element ${this.placement.name+"-pushdown-cls"} was found. Continuing with Pushdown.`),!0):(freestar.log(1,"Pushdown: CLS Not Enabled. Continuing with Pushdown."),!0)}userHasOptedOut(){return at({name:this.optCookieName})?(freestar.log(1,"Pushdown: Cordial is active and the user has opted out."),!0):(freestar.log(1,"Pushdown: Coridal is either not active or the user has not opted out. The Pushdown process may continue."),!1)}remove(){this.pushdownElement&&this.pushdownElement.parentElement&&(this.pushdownElement.parentElement.removeChild(this.pushdownElement),this.pushdownElement=void 0),this.clsEnabled&&this.clsElement&&this.clsElement.parentNode&&(this.clsElement.parentNode.removeChild(this.clsElement),this.clsElement=void 0)}addCloseButton(){this.pushdownElement.querySelector("#fs-pushdown-close-button")||(this.closeButton=Aa(),this.closeButton.setAttribute("id","fs-pushdown-close-button"),this.closeButton.className=this.closeButton.className+=" fs-close-button fs-close-button-pushdown"),this.pushdownElement.appendChild(this.closeButton),this.closeButton.addEventListener("click",function(){!0===this.options.cordial&&rt({name:this.optCookieName,value:!0});const e=["fs-pushdown-close-button",freestar.pushdownControl.placement.name];freestar.pushdownControl.clsEnabled&&freestar.pushdownControl.clsElement&&e.push(freestar.pushdownControl.clsElement.id),e.forEach((e=>{try{const t=document.getElementById(e);t&&t.parentNode.removeChild(t)}catch(e){freestar.log(1,`Error: ${e}`)}}))}.bind(this))}stickyType(){this.pushdownElement&&this.placement&&!this.removedSticky&&(this.clsEnabled&&this.clsElement?(this.clsElement.classList.remove(this.pushdownElementClassName),this.clsElement.classList.add(this.pushdownElementStickyClassName)):this.pushdownElement.className=this.placement.pushdownOptions.isSticky?this.pushdownElementStickyClassName:this.pushdownElementClassName)}stickyTimeRemove(){if(this.pushdownElement&&this.options.timer&&this.options.timer>1){let e=0;const t=setInterval((()=>{document.hasFocus()&&function(e){let t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,n=e.getBoundingClientRect().top+Math.trunc(e.scrollHeight/2);return n>0&&n<=t}(this.pushdownElement)&&(e+=1,e>=this.options.timer&&(this.clsEnabled&&this.clsElement?(this.clsElement.classList.remove(this.pushdownElementStickyClassName),this.clsElement.classList.add(this.pushdownElementClassName),this.clsElement.style.position="relative"):this.pushdownElement.style.position="relative",this.pushdownElement.className=this.pushdownElementClassName,this.removedSticky=!0,clearInterval(t)))}),1e3)}}postGamResponse(e){let{event:t}=e;if(this.isPushdown(t)){if(t.isEmpty)return;this.clsElement&&(this.pushdownElement.parentNode.style.left="0",this.pushdownElement.parentNode.style.visibility="visible"),this.initStickyType||(this.initStickyType=!0,this.stickyType()),this.initStickyTimeRemove||(this.initStickyTimeRemove=!0,this.stickyTimeRemove()),this.addCloseButton()}}applyControlsToNativeRender(){this.clsElement&&(this.pushdownElement.parentNode.style.left="0",this.pushdownElement.parentNode.style.visibility="visible"),this.initStickyType||(this.initStickyType=!0,this.stickyType()),this.initStickyTimeRemove||(this.initStickyTimeRemove=!0,this.stickyTimeRemove()),this.addCloseButton()}isPushdown(e){return!(!e||!e.slot)&&this.placement.name===e.slot.getSlotElementId()}}const md="Pushdown: ";function gd(e,t){if(performance.mark("pushdown-initialization-start"),ji({name:"pushdown"})||!e||!e.pushdownOptions)return void window.freestar.log(1,md+"pushdown is either disabled or options not found. Exiting!");const n=new pd(e);if(n.valid()&&!n.userHasOptedOut()){freestar.pushdownControl=n;const i=ra({placement:n.placement,slotId:e.slotId});t&&i?t(null,i):t&&!i?t(!0):i&&(Di({adUnits:i.bidObject}),ri([i.bidObject.code],[i.slot]))}performance.mark("pushdown-initialization-end")}class bd{constructor(e){let{fsdata:t}=e;this._fsdata=t}add=e=>function(e){window.freestar.log(1,md+`Selected ${e} in method newPushdown!`);const t=sa({name:e});t?(window.freestar.log(1,md+`Found ${e} in method newPushdown.`),gd(t)):window.freestar.log(1,md+`Did not find ${e} in method newPushdown!`)}(e);delete=e=>function(e){window.freestar.log(1,md+"Request to delete pushdown");const t=document.getElementById(e);t&&(t.parentElement.removeChild(t),window.freestar.deleteAdSlots(e))}(e);init=(()=>{var e=this;return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};const n=[],i=[];e._fsdata.placements.forEach((function(e){if(f({placement:e,type:l.PUSHDOWN_OPTIONS})){const{micro:t,isOnCall:s,isPushdownUnit:r}=h({placement:e,type:l.PUSHDOWN_OPTIONS});r&&!s&&(t?n.push(e):i.push(e))}}));let s=!0;if(n.length)for(let e=0;e<n.length;e++){const{trigger:i,isOnCall:r,isPushdownUnit:a,isBodyZero:o}=h({placement:n[e],type:l.PUSHDOWN_OPTIONS});if(!r&&a&&document.getElementById(i)){gd(n[e],t),s=!1;break}}s&&i[0]&&gd(i[0],t),performance.mark("pushdown-initialization-end")}})()}r.class(bd,{token:"Pushdown",dependencies:[Ht.FS_DATA],defaultAlias:"pushdown"});const yd="fs-sticky-rail-item",vd="fs-sticky-rail-items-container",wd="fs-sticky-rail-outer-container",Id="fs-sticky-rail-styles",_d={root:null,rootMargin:"60% 0px 60% 0px"};class Sd{constructor(e){let{win:t=window,placement:n,index:i}=e;this._win=t,this._placement=n,this._index=i,this._container=null,this._observer=null,this.init()}init(){this._container=this._createContainer(),this._attachToIntersectObserver()}destroy(){this._observer&&(this._observer.disconnect(),this._observer=null),this._container.remove(),this._container=null,qn({elementId:this.id}),this._win.fsprebid.removeAdUnit([this.id])}get container(){return this._container}get id(){return`${this._placement.name}_${this._index}`}_createContainer(){return kn({type:"div",classList:[yd],children:[kn({type:"div",id:this.id,attributes:[{"data-ad-unit":this._placement.name}]})]})}_handleIntersection=e=>{e.forEach((e=>{e.isIntersecting&&(ts([{slotId:this.id,placementName:this._placement.name}]),this._observer.unobserve(this._container))}))};_attachToIntersectObserver(){this._observer=new IntersectionObserver(this._handleIntersection,_d),this._observer.observe(this._container)}}class Ed{constructor(e){let{placement:t,win:n=window,freestar:i=window.freestar}=e;this._win=n,this._freestar=i,this._placement=t,this._container=null,this._itemsContainer=null,this._outerContainer=null,this._itemHeight=0,this._itemsContainerHeight=0,this.items=[]}init(){this._container=this._getContainer(),this._container?(this._createContainers(),this._itemHeight=this._getItemHeight(),this._addStyles(),this._debug(),this._updateItemsContainerHeight(),this._createInitialItems(),this._attachResizeObserver()):this._freestar.log(90,"Sticky Rail: No container found.")}destroy(){this._resizeObserver.disconnect(),this.items.forEach((e=>{e.destroy()})),this.items=[],this._outerContainer.remove(),this._outerContainer=null}get _config(){return this._placement.stickyRailOptions}_getContainer(){const{container:e}=this._config;return this._win.document.querySelector(e)}_createContainers(){this._itemsContainer=kn({type:"div",classList:[vd]}),this._outerContainer=kn({type:"div",classList:[wd],children:[this._itemsContainer]}),this._container.appendChild(this._outerContainer)}_addStyles(){if(this._win.document.getElementById(Id))return;const e=this._config.paddingTop||0;ta(`\n            .${wd} {\n                position: relative;\n            }\n\n            .${vd} {\n                position: absolute;\n\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n\n                width: 100%;\n            }\n\n            .${yd} {\n                width: 100%;\n                min-height: 250px;\n\n                position: relative;\n\n                display: flex;\n                flex-direction: column;\n                justify-content: flex-start;\n                align-items: center;\n                flex-grow: 1;\n\n                padding: 20px 0;\n            }\n\n            .${yd} > div {\n                position: sticky !important;\n                top: ${e}px;\n            }\n        `,{id:Id})}_debug(){if(!this._freestar.debug)return;this._win.document.getElementById(`${Id}-debug`)||ta(`\n            .${vd} {\n                border: 1px solid red;\n                background-color: rgba(255, 0, 0, 0.1);\n            }\n\n            .${vd}:before {\n                content: "Sticky Rail Container";\n                display: block;\n            }\n\n            .${yd} {\n                border: 1px solid blue;\n                background-color: rgba(0, 0, 255, 0.1);\n            }\n\n            .${yd}:before {\n                content: "Sticky Rail Item";\n                display: block;\n            }\n        `,{id:`${Id}-debug`})}_updateItemsContainerHeight(){const{bottom:e}=this._container.getBoundingClientRect(),{top:t}=this._outerContainer.getBoundingClientRect();this._itemsContainerHeight=e-t,this._itemsContainer.style.height=`${this._itemsContainerHeight}px`}_getItemHeight(){const{scrollHeight:e}=this._config||{},{innerHeight:t}=this._win,n=Math.ceil(2*t);return e&&!isNaN(e)?e:n}_createItems(e){let{count:t}=e;Array.from({length:t}).forEach((()=>{const e=new Sd({placement:this._placement,index:this.items.length});this._itemsContainer.appendChild(e.container),this.items.push(e)}))}_removeItems(e){let{count:t}=e;if(t<1||this.items.length<t)return;this.items.splice(this.items.length-t,t).forEach((e=>{e.destroy()}))}_getPossibleItemsCount(){return this._itemsContainerHeight<=this._itemHeight?1:Math.floor(this._itemsContainerHeight/this._itemHeight)}_createInitialItems(){const e=this._getPossibleItemsCount();this._createItems({count:e})}_handleContainerResize=Z((()=>{this._updateItemsContainerHeight();const e=this._getPossibleItemsCount();if(e===this.items.length)return;if(e<this.items.length){const t=this.items.length-e;return void this._removeItems({count:t})}const t=e-this.items.length;this._createItems({count:t})}),200);_attachResizeObserver(){this._resizeObserver=new ResizeObserver(this._handleContainerResize),this._resizeObserver.observe(this._container)}}class Ad{constructor(e){let{win:t=window,freestar:n}=e;this._win=t,this._freestar=n,this._runningPlacements=new Map}init=()=>{if(ji({name:"stickyRail"}))return;const{placements:e=[]}=this._freestar.fsdata||{};e.forEach((e=>{const{isOnCall:t}=this._getConfig(e);this._isStickyRailPlacement(e)&&!t&&this._createContainer(e)}))};create=e=>{const{placements:t=[]}=this._freestar.fsdata||{},n=t.find((t=>this._isStickyRailPlacement(t)&&t.name===e));n&&this._createContainer(n)};destroy=e=>{const t=this._runningPlacements.get(e);t&&(t.destroy(),this._runningPlacements.delete(e))};_isStickyRailPlacement(e){const{active:t,container:n}=this._getConfig(e)||{};return Boolean(t&&n)}_createContainer(e){if(this._runningPlacements.has(e.name))return void console.warn(`Sticky Rail: ${e.name} is already running.`);const t=new Ed({placement:e,win:this._win,freestar:this._freestar});return t.init(),this._runningPlacements.set(e.name,t),t}_getConfig(e){return e.stickyRailOptions||{}}}r.class(Ad,{token:"StickyRail",dependencies:[{token:Ht.WINDOW,alias:"win"},{token:Ht.FREESTAR}]});const kd={},xd=function(e,t){if(freestar.log({title:gi},"called",e.name),ji({name:"dynamicAds"}))return!1;let n=freestar.config.dynamicAdChannel;if(!e)return!1;if(kd[e.name]?Date.now()-kd[e.name].called<=750&&freestar.log({title:gi},e.name,"THROTTLING"):kd[e.name]={called:Date.now()},n){let t=freestar.config.channel;e.dfpId.indexOf("{{channel}}")>-1&&(t="{{channel}}"),e.dfpId=e.dfpId.replace(t,n),freestar.log({title:gi}," In dynamic ads Setting the dfp id to:"+e.dfpId)}this.placement=e,this.daHelper=t,this.options=t.options,this.isPixels=!1;let i=1,s=!0;if(this.validAdRequestCount=0,!this.placement.stickyAdOptions.stickyAdEnabled&&this.placement.sizes&&Array.isArray(this.placement.sizes)&&this.placement.sizes.length){const e=document.getElementById("style_"+this.placement.name),t=e||kn({type:"style",id:"style_"+this.placement.name});t.innerHTML=`\n            div[name='${this.placement.name}']:not(div[id*='_slot']):not(div._fs-sf-ad) {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                min-height: ${this.placement.sizes.slice(-1)[0][1]}px !important;\n            }\n        `;const n=document.querySelector("script");if(n&&n.parentNode)n.parentNode.insertBefore(t,n);else{const e=document.head||document;e.insertBefore(t,e.firstChild)}}const r=setInterval((()=>{if(this.parent=document.querySelector(this.options.parentElement),this.children=this.parent?[...document.querySelectorAll(this.options.parentElement+" > "+this.options.childElement)].filter((e=>!e.classList.contains("fs-dynamic"))):"",1==i&&freestar.log({title:gi},this.placement.name,"Searching for required parent/child nodes"),i>8&&(freestar.log({title:gi},this.placement.name,"ERROR: could not get required parent/child nodes"),clearInterval(r)),i+=1,this.children&&this.parent){clearInterval(r),freestar.log({title:gi},e.validAdSizes,this.children,this.parent),this.validIO=!1,this.timeout=window.freestar.fsdata.timeout<e.timeout?window.freestar.fsdata.timeout:e.timeout||window.freestar.fsdata.timeout,this.className=this.options.className||"fs-dynamic",this.slotId=e.name,this.dfpId=e.dfpId,this.pbjsObject=In(e),this.placement=e,this.blockList=this.options.elementBlocklist||[],this.scrollDistance=this.daHelper.fetchScrollDistance(e);try{IntersectionObserver&&(this.validIO=!0)}catch(e){freestar.log(1,`Error: ${e}`)}e.validAdSizes&&this.init()}}),250);this.init=function(){performance.mark("dynamicAds-initialization-start"),this.appendSlotContainers(),(!this.validIO||this.options.ioDisabled||freestar.fsdata.dynamicIODisabled)&&window.addEventListener("scroll",function(e){this.fillEmtpySlots(e)}.bind(this)),performance.mark("dynamicAds-initialization-end")},this.isValidAdLimit=e=>"number"==typeof e&&e>0,this.hasSurpassedAdLimit=e=>this.isValidAdLimit(e)&&this.validAdRequestCount>=e,this.allowedAttempt=e=>{let{i:t,startNth:n,everyNElements:i,skippedElement:s}=e;return t>n&&t%i==0&&(0!==t||s)},this.appendSlotContainers=function(){let e=0,t=!1;const n=this.children.length,{startNth:i=0,everyNElements:s=1,adLimit:r=null}=this.options;for(let a=0;a<n;a++)if(!this.hasSurpassedAdLimit(r)&&this.allowedAttempt({i:a,startNth:i,everyNElements:s,skippedElement:t})){let n=this.children[a],i=!0;const r=n.getAttribute("fsad");if((n.classList.contains("fs-dynamic")||n.previousElementSibling&&n.previousElementSibling.classList&&n.previousElementSibling.classList.contains("fs-dynamic"))&&(i=!1),n.previousElementSibling&&n.previousElementSibling.nodeName&&a>0&&this.blockList&&this.blockList.indexOf(n.previousElementSibling.nodeName)>-1){i=!1;const e=this.children[a+=1];s>1&&e&&-1===this.blockList.indexOf(e.previousElementSibling.nodeName)&&(i=!0,n=e)}!r&&i?(t=!1,e++,n.setAttribute("data-inc",e.toString()),this.slotFactory(e,a)):"no"===r&&(t=!0)}},this.slotFactory=function(t,n){if(Me()&&s){if(this.children[n].getBoundingClientRect().top<window.innerHeight)return void freestar.log(49,"DynamicAds",e.name,t,"Page Speed Optimization is in effect & targeted element is in view, exiting...");s=!1}const i=this.slotId+t;freestar.dynamicSlots.push(i);const r=kn({type:"div",id:i,classList:["fs-dynamic"],attributes:[{"data-slot":"waiting"},{"data-freestar-ad":Wr({placement:e})},{name:e.name}]}),a=kn({type:"div",id:i+"_slot"});r.append(a),hn({placementName:e.name,slotId:i}),Ni(i);const o=this.options.insertBefore?this.children[n]:this.children[n].nextSibling;this.children[n].parentNode.insertBefore(r,o),this.validAdRequestCount+=1,this.validIO&&this.options.ioDisabled||!freestar.fsdata.dynamicIODisabled?this.scrollDistance?this.daHelper.createIntersectionObserver(i,r,this.scrollDistance):this.daHelper.loadDynamicAd({placement:e,slotId:a.id}):this.isSlotActive(r)},this.fillEmtpySlots=function(e){let t=window.document.querySelectorAll('[data-slot="waiting"]');!t.length&&e&&window.removeEventListener("scroll",e);for(let e=0;e<t.length;e++)this.isSlotActive(t[e])},this.isSlotActive=function(e){const t=e.scrollHeight,n=window.innerHeight&&document.documentElement.clientHeight?Math.min(window.innerHeight,document.documentElement.clientHeight):window.innerHeight||document.documentElement.clientHeight,i=e.getBoundingClientRect().top+t-800;return i>=-300&&i<=n&&this.fillSlot(e),i>n},this.fillSlot=function(e){const t=sa({name:e.getAttribute("name")});if(null!=t){let n=this.pbjsObject;e.setAttribute("data-slot","fetched"),n.code=e.id,googletag.cmd.push((()=>{let i=n.sizes||[];n.fluidAd&&!i.includes("fluid")&&i.push("fluid"),qn({elementId:e.id}),Qi(Hn({placement:t,sizes:i,id:e.id}),e.id,null,{fs_ad_product:es(t)}),n=In(t),n.code=e.id,freestar.requests.que.push(n),Ui()}))}}};class Td{constructor(e,t,n){this.observers={},this.options=e,this.isPixels=!1,this.stickyAdManager=t,this.slidingUnitAdsManager=n}loadDynamicAd(e){let{placement:t,slotId:n}=e;f({placement:t,type:l.SLIDING_UNIT_OPTIONS})&&i(this.slidingUnitAdsManager.attachSlidingUnit)({adUnit:t,slotId:n}),t.stickyAdOptions&&t.stickyAdOptions.stickyAdEnabled&&i(this.stickyAdManager.attachSlidingUnit)({adUnit:t,slotId:n.endsWith("_slot")?n.slice(0,-5):n}),freestar.log({title:"Dynamic Ad Helper"},`New ad slots invoked for ${t.name} via intersection observer`),freestar.newAdSlots([{placementName:t.name,slotId:n,skipSAU:!0}])}intersectionCallback(e){e.forEach((e=>{if(e.isIntersecting){const t=e.target.id;if(!t)return;let n=document.getElementById(t);const i=n.getAttribute("name");if(!i)return;if("complete"===n.getAttribute("data-slot"))return void this.observers[t].unobserve(e.target);const s=sa({name:i});if(!s||!s.name)return;n.setAttribute("data-slot","complete"),this.observers[t].unobserve(e.target),n.querySelector(`[id*='${n.id}_slot']`)&&(n=n.querySelector(`[id*='${n.id}_slot']`)),this.loadDynamicAd({placement:s,slotId:n.id})}}))}fetchScrollDistance(e){if("viewport"===this.options.source){if(null!=this.options.heightPercentage&&this.options.heightPercentage>=0)return this.options.heightPercentage;if(null!=this.options.scrollDistance)return this.isPixels=!0,this.options.scrollDistance}if(e.selectedSize&&e.selectedSize.dynamicAdsHeightPercentage>-1)return e.selectedSize.dynamicAdsHeightPercentage;this.isPixels=!0;const t=this.options.scrollDistance||freestar.fsdata.dynamicAdsScrollDistance;return t>=0&&t}createIntersectionObserver(e,t,n){const i=new IntersectionObserver(this.intersectionCallback.bind(this),{rootMargin:`${n}${this.isPixels?"px":"%"}`});i.observe(t),this.observers[e]=i}}class Cd{constructor(e,t){this.placement=e,this.daHelper=t,this.slotId=e.name,this.segmentHeight=0,this.scrollDistance=this.daHelper.fetchScrollDistance(e),this.currentDocumentHeight=0,this.slotIncrement=0,this.disallowedElements=[".fs-dynamic",...this.daHelper.options.da2ElementBlocklist]}slotFactory(e,t){if(!this.placement.sizes||0===this.placement.sizes.length)return;const n=this.slotId+e,i=kn({type:"div",id:n,classList:["fs-dynamic"],attributes:[{"data-slot":"waiting"},{"data-freestar-ad":Wr({placement:this.placement})},{name:this.placement.name},{style:`min-height:${this.placement.sizes[0][1]}px;`}]}),s=kn({type:"div",id:n+"_slot"});i.append(s),t.parentNode.insertBefore(i,t),this.scrollDistance?this.daHelper.createIntersectionObserver(n,i,this.scrollDistance):this.daHelper.loadDynamicAd({placement:this.placement,slotId:n})}segment(){const e=this.getTotalHeight();let t=null;const n=[];for(let i=this.currentDocumentHeight+this.segmentHeight;i<=e;i+=this.segmentHeight){const e=i-this.segmentHeight/2;let s=this.getValidElementInSegment(e);s&&(this.slotIncrement++,n.push([this.slotIncrement,s]),t=i)}if(n.forEach((e=>{let[t,n]=e;return this.slotFactory(t,n)})),null!==t){const e=this.currentTargetElements.findIndex((e=>e.offsetTop>t)),n=-1===e?1/0:e;this.currentTargetElements.splice(0,n),this.currentDocumentHeight=t}}getTotalHeight(){return document.documentElement.scrollHeight}getDensityForHeight(e,t){const n=e.filter((e=>e.viewportHeight<=t)),[{density:i=0}={}]=n.sort(((e,t)=>t.viewportHeight-e.viewportHeight));return i>0?i:1}getValidElementInSegment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentTargetElements;if(0===t.length)return;const n=!t[0].previousElementSibling&&t[0].getBoundingClientRect?t[0].getBoundingClientRect().top:0;return t.find((t=>{const i=t.offsetTop+t.offsetHeight;return i>=e-this.segmentHeight/2&&i<=e+this.segmentHeight/2&&i+n>e-10-this.segmentHeight/2&&this.isAllowedElement(t.previousElementSibling)&&this.isAllowedElement(t.previousElementSibling?.children[0])&&this.isAllowedElement(t.parentElement)}))}init(){if(ji({name:"dynamicAds"}))return;freestar.log({title:"Dynamic Ads V2"},"Called",this.placement.name);const e=this.daHelper.options.da2ViewportsDensities,t=window.innerHeight,n=this.getDensityForHeight(e,t),{visibleTargetElements:i,invisibleTargetElements:s}=this.getTargetElements();this.currentTargetElements=i,this.invisibleTargetElements=s,this.segmentHeight=Math.floor(t/n),this.segment(),this.watchInvisibleTargetElements(this.invisibleTargetElements),this.addMutationObserver(),this.debug()}debug(){if(!freestar.debug)return;[...document.querySelectorAll(".fs-dav2-debug")].forEach((e=>e.parentElement.removeChild(e)));const e=document.createElement("style");e.className="fs-dav2-debug",this.disallowedElements.forEach((t=>{const n=t.split(" ").pop();e.textContent=`\n            .fs-dynamic + ${n} {\n                position: relative;\n            }\n            .fs-dynamic + ${n}:before {\n                content: '';\n                border: 2px dotted lightgreen;\n                position: absolute;\n                width: 102%;\n                height: 102%;\n                top: -1%;\n                left: -1%;\n                background-color: rgba(144,238,144,0.15);\n            }\n            `})),e.textContent+="\n            .fs-dav2-debug.fs-dav2-page-marker {\n                pointer-events:none; \n                position:absolute;\n                width: 100%;\n                height: 2px;\n                background-color: lightblue;\n                margin: 0 auto; \n                display: block;\n                z-index:100;\n            }\n            .fs-dav2-debug.fs-dav2-page-marker:after {\n                content: 'END OF PAGE';\n                font-size: 10px;\n                position: absolute;\n                top: -4px;\n                left: 3px;\n            }\n            .fs-dav2-debug.fs-dav2-segment-marker {\n                pointer-events:none; \n                position: absolute; \n                width: 100%;\n            }\n            .fs-dav2-debug.fs-dav2-target-marker {\n                pointer-events:none; \n                position:absolute;\n                width: 100%;\n                height: 15px;\n                background-color: rgb(0 195 137 / 50%);\n                margin: 0 auto; \n                display: block;\n            }\n            .fs-dav2-debug.fs-dav2-target-marker:after {\n                content: 'TARGET AREA';\n                font-size: 10px;\n                position: absolute;\n                top: 2.5px;\n                left: 3px;\n            }\n        ",document.head.appendChild(e);const t=this.getTotalHeight();for(let e=window.innerHeight;e<=t;e+=window.innerHeight){const t=document.createElement("div");t.className="fs-dav2-debug fs-dav2-page-marker",t.style=`top: ${e-3}px;`,document.body.appendChild(t)}for(let e=0;e<=t;e+=this.segmentHeight){const t=document.createElement("div");t.className="fs-dav2-debug fs-dav2-segment-marker",t.style=`top: ${e}px; height: ${this.segmentHeight}px;`;const n=document.createElement("div");n.className="fs-dav2-debug fs-dav2-target-marker",n.style=`top: ${this.segmentHeight/2}px;`,t.appendChild(n),document.body.appendChild(t)}}addMutationObserver(){new MutationObserver((e=>{e=e.filter((e=>"childList"===e.type&&e.addedNodes));let t=!1;e.forEach((e=>{let{addedNodes:n}=e;if(n=[...n].filter((e=>e instanceof Element)),0!==n.length){let e=[];n.forEach((t=>{let n=[...t.querySelectorAll(this.daHelper.options.da2ElementTarget)];0!==n.length&&(e=e.concat(n)),t.matches(this.daHelper.options.da2ElementTarget)&&e.push(t)})),0!==e.length&&(this.currentTargetElements.push(...e),t=!0)}})),t&&(this.segment(),this.debug())})).observe(document.body,{attributes:!1,childList:!0,characterData:!1,subtree:!0})}targetElementsVisibilityHandler=e=>{let t=!1;e.forEach((e=>{this.isVisible(e.target)&&(this.currentTargetElements.push(e.target),this.invisibleElementsObserver.unobserve(e.target),this.invisibleTargetElements=this.invisibleTargetElements.filter((t=>t!==e.target)),t=!0)})),t&&(this.segment(),this.debug())};watchInvisibleTargetElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.invisibleElementsObserver=new ResizeObserver(this.targetElementsVisibilityHandler),e.forEach((e=>this.invisibleElementsObserver.observe(e)))}isVisible(e){return Boolean(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}isAllowedElement(e){return!e||!this.disallowedElements.some((t=>e.matches(t.toLowerCase())))}getTargetElements(){return Array.from(document.querySelectorAll(this.daHelper.options.da2ElementTarget)).reduce(((e,t)=>(e[this.isVisible(t)?"visibleTargetElements":"invisibleTargetElements"].push(t),e)),{invisibleTargetElements:[],visibleTargetElements:[]})}}let Rd=!1;function Od(){if(window.innerWidth>2500||ji({name:"googleInterstitial"}))return!1;const e=window.freestar.fsdata.placements.find((e=>xt(e)));e&&(performance.mark("interstitial-initialization-start"),window.freestar.googleInterstitialPlacement={placement:e},window.googletag.cmd.push((()=>{const t=Vn({dfpId:e.dfpId,elementId:window.googletag.enums.OutOfPageFormat.INTERSTITIAL});t&&(Un({slot:t,key:"fs_ad_product",value:"googleInterstitial"}),window.googletag.pubads().refresh([t]),cn({placementName:e.name,slotId:t.getSlotElementId()}))})),performance.mark("interstitial-initialization-end"))}r.object({token:"DynamicAds",value:xd}),r.function((function(e){let{freestar:t,slidingUnit:n={},stickyAd:i={}}=e;t.fsdata.placements.forEach((e=>{const s=Vi(e),r=h({placement:e,type:l.DYNAMIC_AD_OPTIONS_V2});if(s.active){t.log({title:gi},"Calling",e.name);const r=new Td(s,n,i);new xd(e,r)}else if(r.dynamicAd2){t.log({title:gi},"Calling",e.name);const s=new Td(r,n,i);new Cd(e,s).init()}}))}),{token:"initDynamicAds",dependencies:["freestar",{token:"SlidingUnit",optional:!0},{token:"StickyAd",optional:!0}]}),r.function((function(e){let{freestar:t,slidingUnit:n={},stickyAd:i={}}=e;if(Rd)return;Rd=!0,t.log(49,"newDynamicContent called",Date.now()),t.fsdata.placements.forEach((e=>{const s=Vi(e);if(s.active){t.log({title:gi},"Calling",e.name);const r=new Td(s,n,i);new xd(e,r)}}));let s=setTimeout((function(){t.log(49,"newDynamicContentCalled cleared",Date.now()),Rd=!1,clearTimeout(s)}),1e3)}),{token:"newDynamicContent",dependencies:["freestar",{token:"SlidingUnit",optional:!0},{token:"StickyAd",optional:!0}]});class Pd{constructor(e){let{freestar:t}=e;this._freestar=t}init(){Od()}postRender(e){let{event:t,elementId:n}=e;!function(e){let{event:t}=e;Tt({event:t})&&Promise.all([a.instance.resolve(Ht.ANALYTICS),a.instance.resolve("DfpResponseAnalyticsEventFactory")]).then((e=>{let[n,i]=e;n.track(i.create({slotId:window.freestar.googleInterstitialPlacement.placement.name,placementId:window.freestar.googleInterstitialPlacement.placement.name,DfpId:t.slot.getAdUnitPath(),advertiserId:window.freestar.googleInterstitialPlacement.event.advertiserId,campaignId:window.freestar.googleInterstitialPlacement.event.campaignId,isEmpty:window.freestar.googleInterstitialPlacement.event.isEmpty,lineItemId:window.freestar.googleInterstitialPlacement.event.lineItemId,serviceName:window.freestar.googleInterstitialPlacement.event.serviceName,size:JSON.stringify(window.freestar.googleInterstitialPlacement.event.size),sourceAgnosticCreativeId:window.freestar.googleInterstitialPlacement.event.sourceAgnosticCreativeId,sourceAgnosticLineItemId:window.freestar.googleInterstitialPlacement.event.sourceAgnosticLineItemId,complete:!1})),delete window.freestar.googleInterstitialPlacement.event}))}({event:t,elementId:n})}}r.class(Pd,{token:"Interstitial",dependencies:["freestar"],defaultAlias:"interstitial"});const Nd="SUPERFLEX V3.1.1",Dd={title:Nd,styles:"background: black; color: white; border-radius: 3px; padding: 3px"},Ld={level:99,title:Nd,styles:"background: lightblue; color: black; border-radius: 3px; padding: 3px"},Md=[[468,60],[320,50],[320,100],[300,250],[300,50],[300,100]],Bd=[[970,250],[970,90],[728,90],[336,280],[300,600],[300,250]],Fd=["onemobile","teads"];function Ud(e){let{placement:t}=e,{sizes:n}=t;t?.stickyFooterOptions?.active&&(n=n.filter((e=>970!==e[0])));const i=Bd.map((e=>e.join("x")));return n=n.filter((e=>Array.isArray(e)&&i.includes(e.join("x")))).sort(((e,t)=>t[1]-e[1])).shift(),n}function $d(e){let{bids:t}=e;return Array.isArray(t)&&0!==t.length?t.filter((e=>"superflex"!==e.bidderCode&&!Fd.includes(e.bidderCode)&&(!e.status||"rendered"!==e.status&&"targetingSet"!==e.status)&&function(e){let{size:t}=e;return Md.map((e=>e.join("x"))).includes(t)}({size:e.size}))).sort(((e,t)=>t.cpm-e.cpm||t.width-e.width||t.height-e.height)):[]}function zd(e){let{remainingSpace:t=null,largestPossibleDimension:n,adDimensions:i,targetDimension:s}=e;const r="width"===s?0:1;let a=Math.floor(t/i[r]);if("height"===s){const e=Bd.sort(((e,t)=>e[1]-t[1])).reverse().find((e=>e[1]<=n[r]));250===e[r]&&(i[r]>=50&&i[r]<100&&a>2&&(a=2),i[r]>=100&&a>1&&(a=1)),280===e[r]&&(i[r]>=50&&i[r]<100&&a>2&&(a=2),i[r]>=100&&a>1&&(a=1)),600===e[r]&&(i[r]>=50&&i[r]<250&&a>3&&(a=3),i[r]>=250&&a>1&&(a=1))}return a}class qd{constructor(e){let{freestar:t,logger:n}=e;this.freestar=t,this.fsprebid=window.fsprebid||{},this.googletag=window.googletag||{},this.logs=n}update(e){let{placements:t}=e;this.placements=t.filter((e=>{let t=!0;if(e.sizeMappings.forEach((e=>{e.size.forEach((e=>{var n;n=e,Array.isArray(n)&&n.length>1&&35843===n[0]&&(t=!1)}))})),t)return e})),this.active=!ji({name:"superflex"})&&0!==t.length;const{blocklist:n=[]}=JSON.parse(ze({key:"fs.superflex"}))||{};this.blocklist=n}checkLineItems(e){e.needed.filter((e=>"TRAFFICKED"===e.demandSourceType||"DIRECT"===e.demandSourceType)).forEach((e=>{e.slots.filter((e=>this.placements.some((t=>t.name===e))&&!this.blocklist.includes(e))).forEach((e=>{this.blocklist.push(e),qe({key:"fs.superflex",value:{blocklist:this.blocklist},type:$e.object})}))}))}getPlacementsNames(){return this.placements?this.placements.map((e=>e.name)):[]}isSuperflex(e){let{placement:t}=e;return!(!t||!this.getPlacementsNames().includes(t.name))&&!!(t&&t.sizeMappings&&function(e){let t=0;for(let n=0;n<e.length;n++){let i=e[n];i.viewport.size[0]>t&&Rr()>=i.viewport.size[0]&&(t=i.viewport.size[0])}return!!e.find((e=>e.viewport.size[0]===t)).superflex}(t.sizeMappings))}removeCSS(e){let{elementId:t}=e;const n=document.getElementById(t);n&&(n.innerHTML=""),document.getElementById(`_fs-sf-${n.className.split("fs-sf-")[1]}-stylesheet`)&&document.getElementById(`_fs-sf-${n.className.split("fs-sf-")[1]}-stylesheet`).remove(),n.className.split(" ").forEach((e=>{-1!==e.indexOf("fs-sf")&&n.classList.remove(e)}))}refresh(e){let{elementId:t,placement:n}=e;this.removeCSS({elementId:t});const i=Yr(),s=freestar.refreshLibrary[t];s&&(freestar.refreshLibrary[t]=s,freestar.refreshLibrary[t].timesRefreshed+=1),freestar.newAdSlots([{slotId:t,placementName:n.name,targeting:{"fs-sf-uuid":i,fsrefresh:freestar.refreshLibrary[n.name]?freestar.refreshLibrary[n.name].timesRefreshed:0}}])}auctionEndCallback(e){const{adUnits:t}=e;t.forEach((e=>{const{code:t}=e;if(-1!==e.code.indexOf("_fs-sf-"))return;if(-1!==e.code.indexOf("browsi"))return;if(!(e=window.freestar.adUnitManager.getAdUnitByPrebidCode(t)))return this.logs.add(`Prebid Auction End Event for ${t}`),this.logs.add("Adunit not found"),void this.logs.show(Dd);const{placement:n,prebid:i,slot:s}=e;if(!this.isSuperflex({placement:n}))return;if(this.logs.add(`Prebid Auction End Event for ${t}`),this.logs.add("Placement is Superflex"),!1===this.shouldRun({placement:n}))return this.logs.add(`There is an active sponsorship for ${n.name}`),void this.logs.show(Dd);const r=i.bids.filter((e=>-1!==Fd.indexOf(e.bidder)));if(0!==r.length)return this.logs.add(`Placement contains invalid bidder(s): ${[...new Set(r.map((e=>e.bidder)))].join(", ")}`),void this.logs.show(Dd);let a=this.fsprebid.getBidResponsesForAdUnitCode(t);if(0===a.bids.length)return this.logs.add("Did not receive any bids"),void this.logs.show(Dd);a=a.bids,this.logs.add(`Received ${a.length} bid(s)`);const o=$d({bids:a});if(0===o.length)return this.logs.add("Did not receive any valid bids"),void this.logs.show(Dd);this.logs.add(`Received ${o.length} valid bid(s)`);const d=o[0],l=function(e){let{bids:t}=e;return 0===t.length?[]:t.sort(((e,t)=>t.width-e.width||t.height-e.height))[0]}({bids:a});if(d.adId===l.adId)return this.logs.add("topValidBidByCPM is the same ad as topBidBySize"),void this.logs.show(Dd);if(d.width===l.width&&d.height===l.height)return this.logs.add("topValidBidByCPM is the same dimensions as topBidBySize"),void this.logs.show(Dd);this.logs.add(`topValidBidByCPM: ${d.adId} $${d.cpm} (${d.width}x${d.height})`),this.logs.add(`topBidBySize: ${l.adId} $${l.cpm} (${l.width}x${l.height})`);const c=Ud({placement:n}),u=c[0]>c[1]?"width":"height",f=c["width"===u?0:1]-d[u];if(f<d[u])return this.logs.add(`There is not enough space (${f}px) left to render additional ads`),void this.logs.show(Dd);this.logs.add(`There is ${f}px of space remaining`);const h=zd({remainingSpace:f,largestPossibleDimension:c,adDimensions:[d.width,d.height],targetDimension:u});if(h<1)return;if(this.logs.add(`There is space for ${h} more ad(s)`),l.cpm>=d.cpm*(h+1))return this.logs.add(`topBidBySize CPM is greater than the combined potential CPM of ${h+1} ${d.width}x${d.height} ads ($${l.cpm} vs. $${d.cpm*(h+1)})`),void this.logs.show(Dd);this.logs.add(`topBidBySize CPM is less than the combined potential CPM of ${h+1} ${d.width}x${d.height} ads ($${l.cpm} vs. $${d.cpm*(h+1)})`);const p=s.getTargeting("fs-sf-uuid")[0]||Yr(),m=kn({type:"div",id:`_fs-sf-${n.name}-0`,attributes:[{name:n.name}]}),g=document.getElementById(s.getSlotElementId());g.classList.add(`fs-sf-${p}`);const b=kn({type:"style",id:`_fs-sf-${n.name}-stylesheet`});b.textContent+=`\n                    .fs-sf-${p} {\n                        display: flex !important;\n                        align-items: center !important;\n                        justify-content: space-evenly !important;\n                    }\n                    .fs-sf-${p} .__fs-ancillary {\n                        max-width: ${d.width}px;\n                    }\n                `,"width"===u&&(b.textContent+=`\n                        .fs-sf-${p} {\n                            width: ${c[0]}px !important;\n                            flex-direction: row !important;\n                            margin: 0 auto;\n                        }\n                    `),"height"===u&&(b.textContent+=`\n                        .fs-sf-${p} {\n                            height: ${c[1]}px !important;\n                            flex-direction: column;\n                        }\n                    `),g.innerHTML="",g.appendChild(m),this.googletag.destroySlots([s]),this.fsprebid.removeAdUnit(i.code),a.forEach((e=>{e.adId!==d.adId&&(e.adUnitCode=Yr())}));const y=Hn({placement:n,sizes:[d.width,d.height],id:m.id,slotConfig:{targeting:Object.assign(this.fsprebid.getAdserverTargetingForAdUnitCode(i.code),{"fs-sf-uuid":p,"fs-sf-index":"0",fsrefresh:freestar.refreshLibrary[n.name]?freestar.refreshLibrary[n.name].timesRefreshed:0})}});this.logs.add(`Created an ad for topValidBidByCPM ${m.id}`);const v=[],w=[];for(let e=1;e<=h;e++){const t=kn({type:"div",id:`_fs-sf-${n.name}-${e}`,classList:["_fs-sf-ad"],attributes:[{name:n.name}]});g.appendChild(t),v.push(Hn({placement:n,sizes:[d.width,d.height],id:t.id,slotConfig:{targeting:{"fs-sf-uuid":p,"fs-sf-index":`${e}`,fsrefresh:freestar.refreshLibrary[n.name]?freestar.refreshLibrary[n.name].timesRefreshed:0}}}));const i=Ne(n);i.name=`_fs-sf-${n.name}-${e}`,i.sizes=[[d.width,d.height]],i.sizeMappings=i.sizeMappings.map((e=>(e.size=[[d.width,d.height]],e))),i.bidders=i.bidders.filter((e=>-1===Fd.indexOf(e.bidder)));const r=In(i);r.mediaTypes.banner.sizes=[[d.width,d.height]],w.push(r),freestar.currentStickyFooter&&"function"==typeof freestar.currentStickyFooter.isSticky&&!freestar.currentStickyFooter.isSticky({slot:s})&&(Vs()||Gs())&&(b.textContent+=`\n                        #_fs-sf-${n.name}-${e}:not(:has(.__fs-ancillary)) {\n                            padding-bottom: 17px;\n                        }\n                    `),this.logs.add(`Created an additional ad ${t.id}`)}if(document.head.appendChild(b),this.googletag.pubads().refresh([y]),Di({adUnits:w}),ri(w.map((e=>e.code)),v),!freestar.refreshLibrary[s.getSlotElementId()]){const e=setTimeout((()=>{clearTimeout(e),freestar.refreshLibraryCreator(s.getSlotElementId())}),1e3)}this.logs.show(Ld)}))}slotRequestedCallback(e){const{slot:t}=e;if(-1!==t.getSlotElementId().indexOf("_fs-sf-"))return;const n=window.freestar.adUnitManager.getAdUnitBySlotElementId(t.getSlotElementId());if(!n)return;const{placement:i}=n;if(this.isSuperflex({placement:i})&&0===t.getTargeting("fs-sf-uuid").length){const e=Yr();t.setTargeting("fs-sf-uuid",e)}}waitForIFrameElm(e){const t=setTimeout((()=>{clearTimeout(t),this.slotRenderEndedCallback(e)}),250)}slotRenderEndedCallback(e){const{slot:t}=e;if(-1!==t.getSlotElementId().indexOf("_fs-sf-"))return;if(-1!==t.getSlotElementId().indexOf("browsi"))return;const n=window.freestar.adUnitManager.getAdUnitBySlotElementId(t.getSlotElementId());if(!n)return this.logs.add(`Slot Render Ended Event for ${t.getSlotElementId()}`),this.logs.add("Adunit not found"),void this.logs.show(Dd);const{placement:i}=n;if(!this.isSuperflex({placement:i}))return;if(this.logs.add(`Slot Render Ended Event for ${i.name}`),!1===this.shouldRun({placement:i}))return this.logs.add(`There is an active sponsorship for ${i.name}`),void this.logs.show(Dd);const{enabledSuperflexBlocklist:s,gamSuperflexBlocklist:r}=freestar.fsdata;if(s){if(!["advertiserId","lineItemId","creativeId","campaignId"].every((t=>-1===r.indexOf(e[t]))))return this.logs.add("Slot contains matching entry on blocklist, exiting"),void this.logs.show(Dd)}const a=document.getElementById(t.getSlotElementId());if(!a)return this.logs.add("Element not found, exiting"),void this.logs.show(Dd);const o=a.querySelector('div[id*="google_ads_iframe_"]');if(!o)return this.logs.add("Element not found, exiting"),void this.logs.show(Dd);if(o.classList.contains("_fs-sf-ad"))return;this.logs.add("Placement is Superflex");const d=Ud({placement:i});this.logs.add(`Largest possible size is ${d[0]}x${d[1]}`);const l=d[0]-d[1]>100?"width":"height",c=a.querySelector('iframe[id*="google_ads_iframe_"]'),u=function(e){if(!e)return{width:1,height:1};if(e.contentDocument&&e.contentDocument.body){const{clientWidth:t,clientHeight:n}=e.contentDocument.body;if(t>1&&n>1)return{width:t,height:n}}return e.getBoundingClientRect()}(c);if(u.width<=1||u.height<=1)return this.logs.add("Element size not found, exiting"),void this.logs.show(Dd);u.width>300&&u.width<320&&(u.width=300),u.width>320&&u.width<468&&(u.width=320),u.width>468&&u.width<728&&(u.width=468),u.width>728&&u.width<970&&(u.width=970),u.height>50&&u.height<60&&(u.height=50),u.height>60&&u.height<90&&(u.height=60),u.height>90&&u.height<100&&(u.height=90),u.height>100&&u.height<250&&(u.height=100),u.height>250&&u.height<600&&(u.height=250),u.height>600&&(u.height=600),this.logs.add(`Size of ad rendered is ${u.width}x${u.height}`);const f=d["width"===l?0:1]-u[l];if(f<c[l])return this.logs.add(`There is not enough space (${f}px) left to render additional ads`),void this.logs.show(Dd);this.logs.add(`There is ${f}px of space remaining`);const h=zd({remainingSpace:f,largestPossibleDimension:d,adDimensions:[u.width,u.height],targetDimension:l});if(h<1)return;this.logs.add(`There is space for ${h} more ad(s)`);const p=t.getTargeting("fs-sf-uuid")[0];a.classList.add(`fs-sf-${p}`);const m=kn({type:"style",id:`_fs-sf-${i.name}-stylesheet`});"width"===l&&(m.textContent+=`\n                .fs-sf-${p} {\n                    width: ${d[0]}px;\n                    display: flex;\n                    align-items: center !important;\n                    justify-content: space-evenly !important;\n                    flex-direction: row !important;\n                    flex-wrap: nowrap;\n                    margin: 0 auto;\n                }\n                .fs-sf-${p}>div[id*="google_ads_iframe_"] {\n                    width: ${u.width}px;\n                    height: auto !important;\n                }\n            `),"height"===l&&(m.textContent+=`\n                .fs-sf-${p} {\n                    height: ${d[1]}px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: space-evenly;\n                    flex-direction: column;\n                }\n            `);const g=[],b=[];for(let e=1;e<=h;e++){const n=kn({type:"div",id:`_fs-sf-${i.name}-${e}`,classList:["_fs-sf-ad"],attributes:[{name:i.name}]});a.appendChild(n),b.push(Hn({placement:i,sizes:[[u.width,u.height]],id:n.id,slotConfig:{targeting:{"fs-sf-uuid":p,"fs-sf-index":`${e}`,fsrefresh:freestar.refreshLibrary[i.name]?freestar.refreshLibrary[i.name].timesRefreshed:0}}}));const s=JSON.parse(JSON.stringify(i));s.name=`_fs-sf-${i.name}-${e}`,s.sizes=[[u.width,u.height]],s.sizeMappings=s.sizeMappings.map((e=>(e.size=[[u.width,u.height]],e))),s.bidders=s.bidders.filter((e=>-1===Fd.indexOf(e.bidder)));const r=In(s);r.mediaTypes.banner.sizes=[[u.width,u.height]],g.push(r),freestar.currentStickyFooter&&"function"==typeof freestar.currentStickyFooter.isSticky&&!freestar.currentStickyFooter.isSticky({slot:t})&&(Vs()||Gs())&&(m.textContent+=`\n                    #_fs-sf-${i.name}-${e}:not(:has(.__fs-ancillary)) {\n                        padding-bottom: 17px;\n                    }\n                `),"width"===l&&(m.textContent+=`\n                    #_fs-sf-${i.name}-${e}>div[id*="google_ads_iframe_"] {\n                        width: ${u.width}px;\n                    }\n                `),this.logs.add(`Created an additional ad ${n.id}`)}document.head.appendChild(m),Di({adUnits:g}),ri(g.map((e=>e.code)),b),this.logs.show(Ld)}shouldRun(e){let{placement:t}=e;return-1===this.blocklist.indexOf(t.name)}registerSuperflexCallbacks(){const e=!B("sfv3-gam-only"),t=!B("sfv3-prebid-only");e&&this.fsprebid.onEvent(zt,this.auctionEndCallback.bind(this)),this.googletag.pubads().addEventListener(Ut,this.slotRequestedCallback.bind(this)),t&&this.googletag.pubads().addEventListener(Ft,this.waitForIFrameElm.bind(this))}}r.class(class{constructor(e){let{freestar:t}=e;this.manager=new qd({freestar:t,logger:new pt}),this.freestar=t}init(){this.manager.update({placements:this.freestar.fsdata.placements.filter((e=>e.sizeMappings.some((e=>!0===e.superflex))))}),this.manager.active&&this.manager.registerSuperflexCallbacks(),this.freestar.superflex={checkLineItems:this.checkLineItems,refresh:this.refresh,isSuperflex:this.isSuperflex,removeCSS:this.removeCSS}}checkLineItems=e=>this.manager.checkLineItems(e);isSuperflex=e=>this.manager.isSuperflex(e);refresh=e=>this.manager.refresh(e);removeCSS=e=>this.manager.removeCSS(e)},{token:"Superflex",dependencies:["freestar"],defaultAlias:"superflex"});const jd=["teads"];class Vd{constructor(e){let{freestar:t,placements:n,win:i}=e;this._freestar=t,this._win=i,this.placements=n,this.uuid=this.placements[0].carouselOptions.uuid,this.init()}init(){const e=Math.floor(this._win.innerHeight*this.placements[0].carouselOptions.boundingBoxPercentage);this.scrollBoundingDimensions={top:Math.floor((this._win.innerHeight-e)/2)-100,height:e}}addDebug(){const e=kn({type:"style",id:`_fs-carousel-${this.uuid}-debug-stylesheet`});e.textContent=`\n            ._fs-carousel-debug[name="_fs-carousel-${this.uuid}"] {\n                position: fixed;\n                width: 100%; \n                height: ${this.scrollBoundingDimensions.height}px;\n                top: ${this.scrollBoundingDimensions.top}px;\n                border: 1px solid black;\n            }\n        `,this._win.document.head.appendChild(e);const t=kn({type:"div",classList:["_fs-carousel-debug"]});t.setAttribute("name",`_fs-carousel-${this.uuid}`),this._win.document.body.appendChild(t)}addCSS(){const e=kn({type:"style",id:`_fs-carousel-${this.uuid}-stylesheet`});e.textContent=this.getCSS(),this._win.document.head.appendChild(e)}getCSS(){return`\n            ._fs-carousel-container[name="_fs-carousel-${this.uuid}"] {\n                position: relative;\n                width: 100%; \n                height: 277px !important;\n                overflow: hidden;\n            }\n            ._fs-carousel-container[name="_fs-carousel-${this.uuid}"] ._fs-carousel-wrapper {\n                position: absolute;\n                left: 0px;\n                left: var(--left);\n                width: ${310*(this.placements[0].carouselOptions.numberOfChildren+1)}px; \n                display: flex; \n                justify-content: space-between;\n            }\n            ._fs-carousel-container[name="_fs-carousel-${this.uuid}"] ._fs-carousel-child {\n                all: initial;\n                width: 300px;\n                height: 277px;\n            }\n        `}addHTML(){const e=this.uuid;this.elm=this._win.document.querySelector(`div[name="_fs-carousel-${e}"]`),this.elm.classList.add("_fs-carousel-container");const t=kn({type:"div",classList:["_fs-carousel-wrapper"]});for(let e of this.placements){const n=kn({type:"div",id:e.name,attributes:[{name:e.name}],classList:["_fs-carousel","_fs-carousel-child"]});t.appendChild(n)}this.elm.appendChild(t),this._bindIntersectionObserver()}_bindIntersectionObserver(){let{elm:e=this.elm}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.observer=new IntersectionObserver(this._intersectionCallback.bind(this),{rootMargin:`-${this.scrollBoundingDimensions.top}px 0px -${this._win.innerHeight-(this.scrollBoundingDimensions.top+this.scrollBoundingDimensions.height)}px 0px`,threshold:this._buildThresholdList(this._win.innerHeight/2)}),this.observer.observe(e)}_mapRange(e){let{value:t,inRange:n,outRange:i}=e;const[s,r]=n,[a,o]=i,d=a+(t-s)*(o-a)/(r-s);return d>o?o:d<a?a:d}_buildThresholdList(e){let t=[];for(let n=5;n<=e;n++){let i=n/e;t.push(i)}return t.push(0),t}_getScrollingDirection(e){let{last:t,current:n}=e,i=null;return t>n&&(i="UP"),t<n&&(i="DOWN"),i}_scrollCallback(){this.lastScrollYValue||(this.lastScrollYValue=this._win.scrollY),this.startingScrollYValue||(this.startingScrollYValue=this._win.scrollY);const e=this._getScrollingDirection({last:this.lastScrollYValue,current:this._win.scrollY});if(this.lastScrollYValue=this._win.scrollY,!e)return;"DOWN"===e&&this.lastScrollYValue>=this.startingScrollYValue+this.scrollBoundingDimensions.height&&(clearInterval(this.scrollTimer),this._bindIntersectionObserver()),"UP"===e&&this.lastScrollYValue>=this.startingScrollYValue&&(clearInterval(this.scrollTimer),this._bindIntersectionObserver());const t=this._mapRange({value:this.lastScrollYValue-this.startingScrollYValue,inRange:[1,this.scrollBoundingDimensions.height],outRange:[1,300*this.placements[0].carouselOptions.numberOfChildren]}),n=t>=0?-1*t:0;this.elm.style.setProperty("--left",`${n}px`)}_intersectionCallback(e){for(let t of e)(t.isIntersecting||t.isVisible)&&(this.observer.unobserve(t.target),this.scrollTimer=setInterval(this._scrollCallback.bind(this),100))}}class Hd{constructor(e){let{freestar:t,window:n}=e;this._freestar=t,this._win=n}init=(()=>{var e=this;return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};if(!(e=>{let{freestar:t}=e;return"mobile"===t?.deviceInfo?.device?.type})({freestar:e._freestar}))return;if(!(()=>{const e=JSON.parse(ze({key:`fs.${Hi}`}))||{};if(!Wi.blockedSiteIDs.includes(freestar.fsdata.siteId)&&void 0===e.inTest){const t=Wi.percentage;Math.random()<t?(e.inTest=!0,e.control=Math.random<=.5):e.inTest=!1,qe({key:`fs.${Hi}`,value:e,type:$e.object})}return e.inTest&&1===e.side&&freestar.log(Gi,"Session is participating in test..."),B(`fs-use-${Hi}`)||e.inTest})())return;e.callback=t,e.contorl=Yi(),e.placements=(e=>{let{win:t,fsdata:n}=e,i=[];const{placements:s}=n,r=new Map;return s.forEach((e=>{const n=document.getElementById(e.name);if(!n)return;if(n.offsetTop<t.innerHeight)return;const s=e.sizes.map((function(){let[e,t]=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return`${e}x${t}`}));s.includes("300x250")&&(r.set(e.name,n.offsetHeight),i.push(e))})),i.sort(((e,t)=>r.get(e.name)-r.get(t.name))),i=i.slice(0,1),i})({win:e._win,fsdata:e._freestar.fsdata}),e.placements.forEach((t=>{const n=(e=>{let{placement:t,path:n}=e;const i=Yr();let{sizeMappings:s}=t;Yi()||(s=s.map((e=>(e.size=[[300,250]],e))));const r=[],a=Yi()?1:2;for(let e=0;e<a+1;e++){const a=Object.assign(Ne(t),{name:Yi()?t.name:`${n}-carousel-${i}-${e}`,sizeMappings:s,carouselOptions:{active:!Yi(),uuid:i,boundingBoxPercentage:.5,onCall:!1,numberOfChildren:2}});a.sizeMappings=a.sizeMappings.map((e=>(e.superflex=!1,e))),a.bidders=a.bidders.filter((e=>!jd.includes(e.bidder))),r.push(a)}return r})({placement:Ne(t),path:e._freestar.fsdata.path});if((e=>{let{fsdata:t,source:n,update:i}=e;const{placements:s}=t,r=s.findIndex((e=>e.name===n.name));-1!==r&&(s[r]=i)})({fsdata:e._freestar.fsdata,source:t,update:n[0]}),Yi())return;e._freestar.fsdata.placements=e._freestar.fsdata.placements.concat(n.slice(1,10));const i=document.getElementById(t.name);i.innerHTML="",i.classList.remove(t.name),i.setAttribute("id",`_fs-carousel-${n[0].carouselOptions.uuid}`),i.setAttribute("name",`_fs-carousel-${n[0].carouselOptions.uuid}`)}));const n=e._freestar.fsdata.placements.reduce(((e,t)=>t?.carouselOptions?.active?(e[t.carouselOptions.uuid]||(e[t.carouselOptions.uuid]=[]),e[t.carouselOptions.uuid].push(t),e):e),{});if(!Yi()){e.carousels=Object.keys(n).map((t=>new Vd({freestar:e._freestar,win:e._win,placements:n[t]}))),e.addCSSAndHTML();for(let t of e.carousels)for(let n of t.placements){const t=ra({placement:n,slotId:n.name});e.callback(null,t)}e._freestar.carousels={addDebug:()=>{e.carousels.forEach((e=>e.addDebug()))}}}}})();addCSSAndHTML(){const e=kn({type:"style",id:"_fs-carousels-stylesheet"});this.carousels.forEach((t=>{e.textContent+=t.getCSS()})),document.head.appendChild(e),this.carousels.forEach((e=>{e.addHTML()}))}}r.class(Hd,{token:"Carousel",dependencies:[Ht.FREESTAR,Ht.WINDOW],defaultAlias:"carousel"});const Gd={title:"IN-IMAGE V1.0.0",styles:"background: black; color: white; border-radius: 3px; padding: 3px"},Wd="iimg",Yd=`fs.${Wd}`,Qd={percentage:.01,blockedSiteIDs:[]},Kd={name:"freestar_display_ad_1",dfpId:"/15184186/freestar",version:0,adRefreshRate:60,ignoreSiteBidders:!1,ignoreSiteRefresh:!1,fluidAd:!1,lazyAd:!1,outOfPage:!1,floorDesktop:0,floorMobile:0,superflex:!1,position:0,archived:!1,multiplex:!1,stickyFooterOptions:{add:!1,adhesionAdd:!1,adhesionRemove:!1,cordial:!1,session:-1,isOnCall:!1,singleUse:!1,active:!1,remove:!1,video:!1,videoPattern:"DISPLAY_INIT_DISPLAY_CONSECUTIVE",cap:-1,zindex:null},sideWallOptions:{add:!1,isOnCall:!1,automaticTopOverride:!1,orientation:0,select:"",targetElement:"",topMargin:0,type:0,zindex:null},pushdownOptions:{cordial:!1,customCode:"",domElement:"",domElementIndex:-1,isBodyZero:!1,isOnCall:!1,micro:!1,isPushdownUnit:!1,isSticky:!1,stickyCombo:!1,stickyTop:!1,stickyBottom:!1,trigger:"",timer:-1,clsEnabled:!1,zindex:-1,zIndex:-1},dynamicAdOptions:{childElement:"",elementBlocklist:[],everyNElements:1,ioDisabled:!1,active:!1,parentElement:"",scrollDistance:800,startNth:0,insertBefore:!1},dynamicAdOptionsV2:{dynamicAd2:!1,da2ElementBlocklist:[],da2ViewportsDensities:[]},revolvingRailOptions:{active:!1,isOnCall:!1,container:"",padddingTop:0},stickyRailOptions:{active:!1,isOnCall:!1},topAdhesionOptions:{active:!1,distanceToRemove:0,time:0},interstitialOptions:{active:!1,type:"NO_INTERSTITIAL",timeToDisplay:0,networkId:"",messsage:"",cap:-1,interstitialPageViewsBefore:1},slidingUnitOptions:{active:!1,type:"NO_SLIDING_UNIT",height:0,topPadding:0},standAloneVideoOptions:{active:!1,videoId:"",backfillDisplayAd:!1},styleOptions:{backgroundColor:""},adQualityOptions:{disabled:!0},stickyAdOptions:{stickyAdEnabled:!1},networks:[],sizeMappings:[{size:[[320,50],[300,50]],viewport:{size:[0,0]},mediaTypes:["banner","video"],videoEnabled:!1,lazyLoadViewportHeight:0,videoAdhesionPosition:"DEFAULT_VIDEO_ADHESION_POSITION",stickyFooterOutstreamVideoPattern:"DISPLAY_INIT_DISPLAY_CONSECUTIVE",superflex:!1,elementTargetedConfig:{active:!1,parentElement:"",childElement:"",everyNElements:1,startNth:0,insertBefore:!1,scrollDistance:800,ioDisabled:!1}}],freestarBrandingDisabled:!0},Jd=()=>{const e=JSON.parse(ze({key:Yd}))||{};if(!Qd.blockedSiteIDs.includes(freestar.fsdata.siteId)&&void 0===e.inTest){const t=Qd.percentage,n=Math.random();e.inTest=n<t,qe({key:Yd,value:e,type:$e.object})}return e.inTest&&freestar.log(Gd,"Session is participating in test..."),B(`fs-use-${Wd}`)||e.inTest};class Xd{constructor(e){let{img:t,win:n,placement:i}=e;this.img=t,this.win=n,this.placement=i,this.uuid=this.placement.name.replace(`fs-${Wd}-`,""),this.dimensions=this.img.getBoundingClientRect(),this.init()}init(){this.addCSS(),this.addHTML()}addCSS(){const e=kn({type:"style",id:`fs-${Wd}-style-${this.uuid}`});e.textContent=`\n            img[src='${this.img.src}'] {\n                margin-top: 75px !important;\n                margin-bottom: 75px !important;\n            }\n            div.${this.placement.name}-overlay {\n                position: absolute;\n                width: ${this.dimensions.width}px;\n                height: ${this.dimensions.height+150}px;\n                top: ${this.dimensions.top+this.win.scrollY}px;\n                left: ${this.dimensions.left}px;\n                display: flex;\n                justify-content: center;\n            }\n            div.${this.placement.name}-shim>div {\n                top: 0;\n                position: sticky !important;\n            }\n        `,document.head.appendChild(e)}addHTML(){const e=kn({type:"div",name:this.placement.name,classList:[`${this.placement.name}-overlay`]}),t=kn({type:"div",classList:[`${this.placement.name}-shim`]}),n=kn({type:"div",id:this.placement.name,name:this.placement.name,classList:[`${this.placement.name}-ad`]});t.appendChild(n),e.appendChild(t),document.body.appendChild(e)}}class Zd{constructor(e){let{fsdata:t,window:n}=e;this.fsdata=t,this.win=n}init=(()=>{var e=this;return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};e.win.innerWidth>400||Jd()&&(e.callback=t,e.placements=e.fsdata.placements.filter((e=>e?.inImageOptions?.active)).map((t=>{const n=document.querySelector(`img._fs-${t.name}-img`);return new Xd({placement:t,img:n,win:e.win})})))}})();prepopulatePlacements=()=>{Jd()&&[...document.querySelectorAll(" img")].filter((e=>e.offsetHeight>=.4*this.win.innerHeight&&e.getBoundingClientRect().top>=this.win.innerHeight)).forEach(((e,t)=>{const n=function(){let{uuid:e=Yr()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(Ne(Kd),{name:`fs-${Wd}-${e}`,inImageOptions:{active:!0,uuid:e}})}({img:e,uuid:t});e.classList.add(`_fs-${n.name}-img`),this.fsdata.placements.push(n)}))}}r.class(Zd,{token:"InImage",dependencies:[Ht.FS_DATA,Ht.WINDOW],defaultAlias:"inImage"});r.class(class{scriptsLoaded=!1;videoPlayersMap={DISPLAY:bo};addPlayers(e){this.videoPlayersMap={...this.videoPlayersMap,...e}}async add(e){let{params:t,type:n="OUTSTREAM"}=e;this.scriptsLoaded||await this._loadScripts();const i=this.videoPlayersMap[n];if(i)return new i({params:t})}async _loadScripts(){[kn({type:"link",attributes:[{rel:"stylesheet"},{href:"https://vjs.zencdn.net/7.20.2/video-js.css"}]}),kn({type:"link",attributes:[{rel:"stylesheet"},{href:"https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-ads/6.9.0/videojs-contrib-ads.css"}]}),kn({type:"link",attributes:[{rel:"stylesheet"},{href:"https://cdnjs.cloudflare.com/ajax/libs/videojs-ima/1.11.0/videojs.ima.css"}]})].forEach((e=>{document.head.appendChild(e)})),await Cn("https://vjs.zencdn.net/7.20.2/video.min.js"),await Cn("https://imasdk.googleapis.com/js/sdkloader/ima3.js"),await Cn("https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-ads/6.9.0/videojs-contrib-ads.js"),await Cn("https://cdnjs.cloudflare.com/ajax/libs/videojs-ima/1.11.0/videojs.ima.js"),this.scriptsLoaded=!0,Ga({bidder:ao,placementId:"",tagUrl:""})}},{token:Ht.FOP_VIDEO_MANAGER});var el={exports:{}};var tl,nl={exports:{}},il=dr(Object.freeze({__proto__:null,default:{}}));function sl(){return tl||(tl=1,function(e,t){var n;e.exports=(n=n||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==ar&&ar.crypto&&(n=ar.crypto),!n)try{n=il}catch(e){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},a=r.lib={},o=a.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},d=a.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,s=e.sigBytes;if(this.clamp(),i%4)for(var r=0;r<s;r++){var a=n[r>>>2]>>>24-r%4*8&255;t[i+r>>>2]|=a<<24-(i+r)%4*8}else for(var o=0;o<s;o+=4)t[i+o>>>2]=n[o>>>2];return this.sigBytes+=s,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new d.init(t,e)}}),l=r.enc={},c=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],s=0;s<n;s++){var r=t[s>>>2]>>>24-s%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new d.init(n,t/2)}},u=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],s=0;s<n;s++){var r=t[s>>>2]>>>24-s%4*8&255;i.push(String.fromCharCode(r))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new d.init(n,t)}},f=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},h=a.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,i=this._data,s=i.words,r=i.sigBytes,a=this.blockSize,o=r/(4*a),l=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*a,c=e.min(4*l,r);if(l){for(var u=0;u<l;u+=a)this._doProcessBlock(s,u);n=s.splice(0,l),i.sigBytes-=c}return new d.init(n,c)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=h.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}});var p=r.algo={};return r}(Math),n)}(nl)),nl.exports}!function(e,t){var n;e.exports=(n=sl(),function(e){var t=n,i=t.lib,s=i.WordArray,r=i.Hasher,a=t.algo,o=[],d=[];!function(){function t(t){for(var n=e.sqrt(t),i=2;i<=n;i++)if(!(t%i))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var i=2,s=0;s<64;)t(i)&&(s<8&&(o[s]=n(e.pow(i,.5))),d[s]=n(e.pow(i,1/3)),s++),i++}();var l=[],c=a.SHA256=r.extend({_doReset:function(){this._hash=new s.init(o.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],s=n[1],r=n[2],a=n[3],o=n[4],c=n[5],u=n[6],f=n[7],h=0;h<64;h++){if(h<16)l[h]=0|e[t+h];else{var p=l[h-15],m=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=l[h-2],b=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;l[h]=m+l[h-7]+b+l[h-16]}var y=i&s^i&r^s&r,v=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),w=f+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&c^~o&u)+d[h]+l[h];f=u,u=c,c=o,o=a+w|0,a=r,r=s,s=i,i=w+(v+y)|0}n[0]=n[0]+i|0,n[1]=n[1]+s|0,n[2]=n[2]+r|0,n[3]=n[3]+a|0,n[4]=n[4]+o|0,n[5]=n[5]+c|0,n[6]=n[6]+u|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,s=8*t.sigBytes;return n[s>>>5]|=128<<24-s%32,n[14+(s+64>>>9<<4)]=e.floor(i/4294967296),n[15+(s+64>>>9<<4)]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=r._createHelper(c),t.HmacSHA256=r._createHmacHelper(c)}(Math),n.SHA256)}(el);var rl=or(el.exports),al={exports:{}};!function(e,t){var n;e.exports=(n=sl(),function(){var e=n,t=e.lib,i=t.WordArray,s=t.Hasher,r=e.algo,a=[],o=r.SHA1=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],s=n[1],r=n[2],o=n[3],d=n[4],l=0;l<80;l++){if(l<16)a[l]=0|e[t+l];else{var c=a[l-3]^a[l-8]^a[l-14]^a[l-16];a[l]=c<<1|c>>>31}var u=(i<<5|i>>>27)+d+a[l];u+=l<20?1518500249+(s&r|~s&o):l<40?1859775393+(s^r^o):l<60?(s&r|s&o|r&o)-1894007588:(s^r^o)-899497514,d=o,o=r,r=s<<30|s>>>2,s=i,i=u}n[0]=n[0]+i|0,n[1]=n[1]+s|0,n[2]=n[2]+r|0,n[3]=n[3]+o|0,n[4]=n[4]+d|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(i+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=s._createHelper(o),e.HmacSHA1=s._createHmacHelper(o)}(),n.SHA1)}(al);var ol=or(al.exports),dl={exports:{}};!function(e,t){var n;e.exports=(n=sl(),function(e){var t=n,i=t.lib,s=i.WordArray,r=i.Hasher,a=t.algo,o=[];!function(){for(var t=0;t<64;t++)o[t]=4294967296*e.abs(e.sin(t+1))|0}();var d=a.MD5=r.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,s=e[i];e[i]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var r=this._hash.words,a=e[t+0],d=e[t+1],h=e[t+2],p=e[t+3],m=e[t+4],g=e[t+5],b=e[t+6],y=e[t+7],v=e[t+8],w=e[t+9],I=e[t+10],_=e[t+11],S=e[t+12],E=e[t+13],A=e[t+14],k=e[t+15],x=r[0],T=r[1],C=r[2],R=r[3];x=l(x,T,C,R,a,7,o[0]),R=l(R,x,T,C,d,12,o[1]),C=l(C,R,x,T,h,17,o[2]),T=l(T,C,R,x,p,22,o[3]),x=l(x,T,C,R,m,7,o[4]),R=l(R,x,T,C,g,12,o[5]),C=l(C,R,x,T,b,17,o[6]),T=l(T,C,R,x,y,22,o[7]),x=l(x,T,C,R,v,7,o[8]),R=l(R,x,T,C,w,12,o[9]),C=l(C,R,x,T,I,17,o[10]),T=l(T,C,R,x,_,22,o[11]),x=l(x,T,C,R,S,7,o[12]),R=l(R,x,T,C,E,12,o[13]),C=l(C,R,x,T,A,17,o[14]),x=c(x,T=l(T,C,R,x,k,22,o[15]),C,R,d,5,o[16]),R=c(R,x,T,C,b,9,o[17]),C=c(C,R,x,T,_,14,o[18]),T=c(T,C,R,x,a,20,o[19]),x=c(x,T,C,R,g,5,o[20]),R=c(R,x,T,C,I,9,o[21]),C=c(C,R,x,T,k,14,o[22]),T=c(T,C,R,x,m,20,o[23]),x=c(x,T,C,R,w,5,o[24]),R=c(R,x,T,C,A,9,o[25]),C=c(C,R,x,T,p,14,o[26]),T=c(T,C,R,x,v,20,o[27]),x=c(x,T,C,R,E,5,o[28]),R=c(R,x,T,C,h,9,o[29]),C=c(C,R,x,T,y,14,o[30]),x=u(x,T=c(T,C,R,x,S,20,o[31]),C,R,g,4,o[32]),R=u(R,x,T,C,v,11,o[33]),C=u(C,R,x,T,_,16,o[34]),T=u(T,C,R,x,A,23,o[35]),x=u(x,T,C,R,d,4,o[36]),R=u(R,x,T,C,m,11,o[37]),C=u(C,R,x,T,y,16,o[38]),T=u(T,C,R,x,I,23,o[39]),x=u(x,T,C,R,E,4,o[40]),R=u(R,x,T,C,a,11,o[41]),C=u(C,R,x,T,p,16,o[42]),T=u(T,C,R,x,b,23,o[43]),x=u(x,T,C,R,w,4,o[44]),R=u(R,x,T,C,S,11,o[45]),C=u(C,R,x,T,k,16,o[46]),x=f(x,T=u(T,C,R,x,h,23,o[47]),C,R,a,6,o[48]),R=f(R,x,T,C,y,10,o[49]),C=f(C,R,x,T,A,15,o[50]),T=f(T,C,R,x,g,21,o[51]),x=f(x,T,C,R,S,6,o[52]),R=f(R,x,T,C,p,10,o[53]),C=f(C,R,x,T,I,15,o[54]),T=f(T,C,R,x,d,21,o[55]),x=f(x,T,C,R,v,6,o[56]),R=f(R,x,T,C,k,10,o[57]),C=f(C,R,x,T,b,15,o[58]),T=f(T,C,R,x,E,21,o[59]),x=f(x,T,C,R,m,6,o[60]),R=f(R,x,T,C,_,10,o[61]),C=f(C,R,x,T,h,15,o[62]),T=f(T,C,R,x,w,21,o[63]),r[0]=r[0]+x|0,r[1]=r[1]+T|0,r[2]=r[2]+C|0,r[3]=r[3]+R|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,s=8*t.sigBytes;n[s>>>5]|=128<<24-s%32;var r=e.floor(i/4294967296),a=i;n[15+(s+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n[14+(s+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var o=this._hash,d=o.words,l=0;l<4;l++){var c=d[l];d[l]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return o},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,i,s,r,a){var o=e+(t&n|~t&i)+s+a;return(o<<r|o>>>32-r)+t}function c(e,t,n,i,s,r,a){var o=e+(t&i|n&~i)+s+a;return(o<<r|o>>>32-r)+t}function u(e,t,n,i,s,r,a){var o=e+(t^n^i)+s+a;return(o<<r|o>>>32-r)+t}function f(e,t,n,i,s,r,a){var o=e+(n^(t|~i))+s+a;return(o<<r|o>>>32-r)+t}t.MD5=r._createHelper(d),t.HmacMD5=r._createHmacHelper(d)}(Math),n.MD5)}(dl);var ll=or(dl.exports);function cl(e){const t=window.freestar?.locData?.iso;return!!t&&(e.disallowedGeos&&e.disallowedGeos.length?!e.disallowedGeos.includes(t):!e.allowedGeos||!e.allowedGeos.length||e.allowedGeos.includes(t))}const ul=new class{constructor(e){let{freestar:t={}}=e;t.fsdata&&(this.active=this.shouldRun(),window.freestar.fsdata.atsEnabledV2&&(this.version=2))}shouldRun(){const e=freestar.locData&&freestar.locData.iso;if(!e)return freestar.log(10,"LiveRamp ATS does not run for users without location data."),!1;const t=window.freestar.fsdata.identityProviders.find((e=>"identityLink"===e.slug));return t&&cl(t)?window.freestar.fsdata.atsEnabledV2:(freestar.log(10,`LiveRamp ATS does not run for users in ${e}.`),!1)}start(){if(this.active)if(window.ats){const e=ats.setAdditionalData,t=this.getConfigV2();this.launch({callbackFunc:e,obj:t})}else this.load()}getConfigV2(){let e={};const t=rc();return t&&(e={id:Object.values(t),type:"emailHashes"}),e}load(){const e=`https://launchpad-wrapper.privacymanager.io/${freestar.fsdata.atsV2ConfigUUID}/launchpad-liveramp.js`,t=()=>{if(window.ats&&window.ats.setAdditionalData){const e=window.ats.setAdditionalData;let t;return 2===this.version&&(t=this.getConfigV2()),this.launch({callbackFunc:e,obj:t}),!0}return!1};Tn(e,(()=>{if(!t()){const e=setInterval((()=>{t()&&clearInterval(e)}),10)}}))}launch(e){let{callbackFunc:t,obj:n}=e;0!==Object.keys(n).length&&t(n)}}({freestar:window.freestar}),fl="disabled",hl="test",pl={criteo:{itfPosition:0,itfTestPercent:.95,enabled:void 0},uid2:{itfPosition:1,itfTestPercent:.95,enabled:void 0},fabrickId:{itfPosition:2,itfTestPercent:.95,enabled:void 0},hadronId:{itfPosition:3,itfTestPercent:.95,enabled:void 0},id5Id:{itfPosition:4,itfTestPercent:.95,enabled:void 0},pairId:{itfPosition:5,itfTestPercent:.95,enabled:void 0},"33acrossId":{itfPosition:6,itfTestPercent:.95,enabled:void 0},sharedId:{itfPosition:7,itfTestPercent:.95,enabled:void 0},connectid:{itfPosition:8,itfTestPercent:.95,enabled:void 0},identityLink:{itfPosition:9,itfTestPercent:.95,enabled:void 0},liveIntentId:{itfPosition:11,itfTestPercent:.95,enabled:void 0},unifiedId:{itfPosition:12,itfTestPercent:.95,enabled:void 0},intentIqId:{itfPosition:13,itfTestPercent:.95,enabled:void 0},carbon:{itfPosition:14,itfTestPercent:.95,enabled:void 0},airgrid:{itfPosition:15,itfTestPercent:.95,enabled:void 0},linkedInAdsId:{itfPosition:16,itfTestPercent:.95,enabled:void 0},symitri:{itfPosition:17,itfTestPercent:.95,enabled:void 0}},ml="uid2",gl="emailHash",bl=["serverPublicKey","subscriptionId"],yl="intentIqId",vl="fs.iiq.ab.segment",wl="testGroup",Il="carbon",_l="4d97a662ad",Sl="airgrid",El="PV483g",Al="FpZbsa",kl="cdeffa51-8532-473f-8ba0-200d751fd73e",xl="https://pb-rtd.ccgateway.net",Tl="https://pb-ing.ccgateway.net",Cl={PARENT_ID:"parentId",ENDPOINT:"endpoint",ANALYTICS_ENDPOINT:"analyticsEndpoint"},Rl="hadronId",Ol=474,Pl={audience:{active:!0,pushGpt:!0,limit:-1},context:{active:!0,pushGpt:!0,limit:-1},customTaxonomy:{active:!0,pushGpt:!0,limit:-1}},Nl="symitri",Dl="freestar.dap.symitri.net",Ll="x1",Ml="hashedid",Bl=708,Fl="https://prodfreestarapp.azurewebsites.net/v1/impression",Ul=[Sl,Il,Nl],$l=`${b}/intentIQ/20240821/IIQUniversalID.js`;const zl=new class{constructor(e){let{freestar:t={}}=e;t.fsdata&&(this.active=this.shouldRun())}isAnalyticsEnabled(){return null!==window.freestar.fsdata.atsAnalyticsEnabled&&void 0!==window.freestar.fsdata.atsAnalyticsEnabled?window.freestar.fsdata.atsAnalyticsEnabled:window.freestar.fsdata.atsEnabledV2}shouldRun(){const e=freestar.locData&&freestar.locData.iso;if(!e)return freestar.log(10,"LiveRamp ATS does not run for users without location data."),!1;const t=window.freestar.fsdata.identityProviders.find((e=>"identityLink"===e.slug));return t&&cl(t)?this.isAnalyticsEnabled():(freestar.log(10,`LiveRamp ATS does not run for users in ${e}.`),!1)}init(){if(!this.active)return;const e=window.freestar.fsdata.identityProviders.find((e=>2===e.id))?window.freestar.fsdata.identityProviders.find((e=>2===e.id)).params.pid:106;fsprebid.enableAnalytics([{provider:"atsAnalytics",options:{pid:e}}])}}({freestar:window.freestar});class ql{static EMAIL_EXTENSION_SYMBOL="+";static EMAIL_DOT=".";static GMAIL_DOMAIN="gmail.com";static normalizeEmail(e){if(!e||!e.length)return;const t=e.trim().toLowerCase();if(t.indexOf(" ")>0)return;const n=this.splitEmailIntoAddressAndDomain(t);if(!n)return;const{address:i,domain:s}=n,r=this.isGmail(s),a=this.normalizeAddressPart(i,r,r);return a?`${a}@${s}`:void 0}static bytesToBase64(e){const t=Array.from(e,(e=>String.fromCodePoint(e))).join("");return btoa(t)}static hashUID2(e){const t=new Uint8Array(e.match(/[\da-f]{2}/gi).map((function(e){return parseInt(e,16)})));return this.bytesToBase64(new Uint8Array(t))}static splitEmailIntoAddressAndDomain(e){const t=e.split("@");if(2===t.length&&!t.some((e=>""===e)))return{address:t[0],domain:t[1]}}static isGmail(e){return e===this.GMAIL_DOMAIN}static dropExtension(e){return e.split(this.EMAIL_EXTENSION_SYMBOL)[0]}static normalizeAddressPart(e,t,n){let i=e;var s,r,a;return t&&(s=i,r=this.EMAIL_DOT,a="",i=s.split(r).join(a)),n&&(i=this.dropExtension(i)),i}}function jl(e){return e&&void 0!==e.sha256}function Vl(e){const t=window.freestar.fsdata.identityProviders&&window.freestar.fsdata.identityProviders.find((e=>"fabrickId"===e.slug));if(t&&cl(t)&&jl(e)){return{name:"fabrickId",params:{...t.params,e:e.sha256},storage:t.storage}}return{}}function Hl(e){const t=window.freestar.fsdata.identityProviders&&window.freestar.fsdata.identityProviders.findIndex((e=>"connectid"===e.slug));if(jl(e)&&-1!==t){const n=window.freestar.fsdata.identityProviders[t];if(n)return{name:n.slug,params:{...n.params,he:e.sha256},storage:n.storage}}return{}}function Gl(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=window.freestar.fsdata.identityProviders&&window.freestar.fsdata.identityProviders.filter((e=>"id5Id"===e.slug)).map((e=>e.params.partner)).at(0);if(jl(e)&&t){const n={1:e.sha256},i=Object.keys(n).map((e=>e+"="+n[e])).join("&");return{name:"id5Id",params:{partner:t,pd:btoa(i)}}}return{}}function Wl(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=window.freestar.fsdata.identityProviders&&window.freestar.fsdata.identityProviders.find((e=>"liveIntentId"===e.slug));if(e&&void 0!==e.sha1&&t){return{name:"liveIntentId",params:{...t.params,emailHash:e.sha1}}}return{}}function Yl(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=(window.freestar.fsdata.identityProviders||[]).find((e=>e.slug===ml));return t&&t.params&&bl.every((e=>!!t.params[e]))&&function(e){return e&&void 0!==e.md5}(e)?{name:ml,params:{...t.params,[gl]:ql.hashUID2(e.sha256)},storage:t.storage}:{}}function Ql(e){0!==Object.keys(e).length&&fsprebid.que.push((function(){let t=fsprebid.getConfig("userSync");t.userIds=t.userIds||[];let n=t.userIds.find((t=>t.name.toLowerCase()===e.name.toLowerCase()));if(n){let i=t.userIds.filter((t=>t.name!==e.name));t.userIds=[...i,Object.assign(n,e)],fsprebid.setConfig({userSync:t})}}))}function Kl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;i&&i!==fl&&(e.isProviderEnabled(n,"amazon")&&function(e,t){if(jl(e)&&window.freestar.fsdata.networks.find((e=>"amazon"===e.slug))){const n=()=>{window.apstag.updateId({optOut:t,hashedRecords:[{type:"email",record:e.sha256}]})};if(window.apstag&&window.apstag.updateId)n();else{const e=setInterval((()=>{window.apstag&&window.apstag.updateId&&(clearInterval(e),n())}),10)}}}(t,s),e.isProviderEnabled(n,"identityLink")&&(window.addEventListener("pairIdEnvelopePresent",(async()=>{fsprebid.que.push((function(){fsprebid.refreshUserIds()}))})),window.addEventListener("lrEnvelopePresent",(async()=>{fsprebid.que.push((function(){fsprebid.refreshUserIds()}))})),ul.start(),zl.init()),e.isProviderEnabled(n,"fabrickId")&&Ql(Vl(t)),e.isProviderEnabled(n,"connectid")&&Ql(Hl(t)),e.isProviderEnabled(n,"id5Id")&&Ql(Gl(t)),e.isProviderEnabled(n,"liveIntentId")&&Ql(Wl(t)),e.isProviderEnabled(n,ml)&&Ql(Yl(t)),fsprebid.que.push((function(){fsprebid.refreshUserIds()})))}function Jl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;jl(t)&&n!==fl&&function(e){if(-1!==window.freestar.fsdata.networks.findIndex((e=>"amazon"===e.slug))){const t=()=>{window.apstag.renewId({hashedRecords:[{type:"email",record:e.sha256}]})};if(window.apstag&&window.apstag.renewId)t();else{const e=setInterval((()=>{window.apstag&&window.apstag.renewId&&(clearInterval(e),t())}),10)}}}(t)}function Xl(e,t){return e.find((e=>e?.slug===t))}const Zl=(e,t)=>{const n=ec(e,"partnerId");return null==n||Number.isNaN(n)?t:"number"==typeof n||Number.isNaN(Number(n))?n:Number(n)};function ec(e,t){if(e.params=e.params||{},null!=e.params[t]&&""!==e.params[t])return e.params[t]}function tc(e,t,n){return ec(e,t)||n}function nc(){let e=arguments.length>1?arguments[1]:void 0;const t=Xl(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],Il);if(!t||!oc.isProviderEnabled(oc.providersRules,Il)||!cl(t))return;const n=tc(t,Cl.PARENT_ID,_l);if(!n)return;const i=tc(t,Cl.ENDPOINT,xl),s=tc(t,Cl.ANALYTICS_ENDPOINT,Tl);e.realTimeData=Qn(e);const r={name:Il,waitForIt:!0,params:{parentId:n,endpoint:i,features:Pl}};e.realTimeData.dataProviders.push(r),function(e,t){window.fsprebid.enableAnalytics({provider:Il,options:{parentId:e,endpoint:t}})}(n,s)}function ic(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;nc(e,t),function(){let e=arguments.length>1?arguments[1]:void 0;const t=Xl(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],Rl);if(t){e.realTimeData=Qn(e);const n=Zl(t,"partnerId")||Ol;n&&e.realTimeData.dataProviders.push({name:"hadron",waitForIt:!0,params:{partnerId:n}})}}(e,t),function(){let e=arguments.length>1?arguments[1]:void 0;const t=Xl(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],Sl);if(t&&oc.isProviderEnabled(oc.providersRules,"airgrid")){e.realTimeData=Qn(e);const n=ec(t,"accountId")||El,i=ec(t,"publisherId")||Al,s=ec(t,"apiKey")||kl,r={name:Sl,waitForIt:!0,params:{apiKey:s,accountId:n,publisherId:i}},a=ec(t,"bidders");a&&(r.params.bidders=function(e){return e?.split(",").map((e=>e.trim()))}(a)),e.realTimeData.dataProviders.push(r)}}(e,t),function(){let e=arguments.length>1?arguments[1]:void 0;const t=Xl(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],Nl),n=rc();if(!t||!oc.isProviderEnabled(oc.providersRules,Nl)||!cl(t))return;e.realTimeData=Qn(e);const i=ec(t,"apiHostname")||Dl,s=ec(t,"apiVersion")||Ll,r=ec(t,"segtax")||Bl,a=ec(t,"pixelUrl")||Fl,o={name:Nl,waitForIt:!0,params:{apiHostname:i,apiVersion:s,domain:window.freestar.fsdata.domain,segtax:r,pixelUrl:a}};n?.sha256&&(o.params.identityType=Ml,o.params.identityValue=n.sha256),e.realTimeData.dataProviders.push(o)}(e,t)}const sc="fs.ident",rc=()=>{const e=ze({key:sc,type:$e.object.type});return!!Object.keys(e).length&&e};function ac(e,t){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((()=>window.googletag.pubads().setTargeting(e,t)))}const oc=new class{targeting="----------------------------------------";ITF_GROUP_KEY="fs.itf.group";ITF_PROVIDERS_KEY="fs.itf.targeting";GAM_ITF_KEY="fsitf";providersRules=[];prebidNonRTDProviders=[];testGroup=void 0;hashedEmailsPassed=!1;identityData=void 0;messageSent=!1;itf_y=null;itf_n=null;constructor(){this.itf_y=B("itf_y"),this.itf_n=B("itf_n"),this.identityData=rc(),this.testGroup=this.getIdentityTestGroup(),this.getSessionProviders(this.testGroup);const{identityProviders:e}=window.freestar&&window.freestar.fsdata||[];this.prebidNonRTDProviders=this.prebidIdentityPartnersFetch(e,this.providersRules,this.testGroup),this.logIdentityProviders(e&&e.length?`Eligible providers: ${e.map((e=>e.slug))}`:"No Eligible Providers"),Jl(this.providersRules,this.identityData,this.testGroup),this.targeting=this.createTargeting(this.providersRules,e,this.targeting,this.testGroup),this.logIdentityProviders("Targeting:",this.targeting),this.setTargetingGAM(this.targeting),this.sendEventMessages(this.providersRules)}getSessionProviders(e){let t=ze({key:this.ITF_PROVIDERS_KEY,type:$e.string.type});try{this.providersRules=JSON.parse(atob(t))}catch(t){this.providersRules=this.getProvidersRulesByTestGroup(e)}this.updateProvidersRulesByUrlParams()}updateTargeting(e,t){return U(t.enabled)&&((e=e.split(""))[t.itfPosition]=t.enabled?"Y":"N",e=e.join("")),e}getPrebidNonRTDProviders(){return this.prebidNonRTDProviders}createTargeting(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!this.itf_y&&!this.itf_n&&i===fl)return"0";let s=t.filter((e=>"slug"in e)).map((e=>e.slug.toLowerCase()));return Object.entries(e).filter((e=>{let[t]=e;return s.includes(t.toLowerCase())})).forEach((e=>{let[,t]=e;n=this.updateTargeting(n,t)})),n}setTargetingGAM(e){ac(this.GAM_ITF_KEY,e),this.setLiveIntentGamKey(e)}getIdentityTestGroup(){let e=ze({key:this.ITF_GROUP_KEY,type:$e.string.type});return e||(e=Math.random()<=.99?hl:fl),qe({key:this.ITF_GROUP_KEY,value:e,type:$e.string}),e}itfTestLambda=function(e,t){return Math.random()<=t.itfTestPercent};getProvidersRulesByTestGroup(e){let t={};return e===hl&&(t=this.setEnabledRules(pl,this.itfTestLambda)),e===fl&&(t=this.setEnabledRules(pl,!1)),qe({key:this.ITF_PROVIDERS_KEY,value:btoa(JSON.stringify(t)),type:$e.string}),t}setEnabledRules(e,t){let n={};return Object.entries(e).forEach((e=>{let[i,s]=e;const r="function"==typeof t?t(i,s):t;n[i]=Object.assign({},s,{enabled:r})})),n}prebidIdentityPartnersFetch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.itf_y||this.itf_n||n!==fl?e.filter((e=>"intentIqId"!==e.slug)).filter((e=>!Ul.includes(e.slug))).filter((e=>this.isProviderEnabled(t,e.slug))).filter((e=>cl(e))).map((e=>{const{slug:t,params:n,storage:i}=e;let s={name:t};switch(0!==Object.keys(n||{}).length&&(s.params=n),0!==Object.keys(i||{}).length&&(s.storage=i),t){case"uid2":if(this.identityData&&this.identityData.sha256&&!this.hashedEmailsPassed){this.hashedEmailsPassed=!0;const e=function(e,t){switch(e){case"fabrickId":return Vl(t);case"connectid":return Hl(t);case"id5Id":return Gl(t);case"liveIntentId":return Wl(t);case ml:return Yl(t);default:return{}}}(t,this.identityData);s.params={...s.params,...e.params}}break;case"merkleId":s.params=Object.assign(s.params,{sv_domain:window.location.hostname});break;case"pairId":if(s.params&&s.params.liveramp){let e=X("liveramp",s.params);s.params=Object.assign(s.params,{liveramp:e})}break;case"liveIntentId":if(s.params&&s.params.requestedAttributesOverrides){let e=X("requestedAttributesOverrides",s.params);"object"!=typeof e||Array.isArray(e)||null===e||Object.keys(e).forEach((t=>{e[t]=["nonId","uid2","medianet","magnite","bidswitch","pubmatic","openx","sovrn","index","thetradedesk"].includes(t)&&"true"===e[t]})),s.params=Object.assign(s.params,{requestedAttributesOverrides:e})}}return s})):[]}addOptOut(e){let{selector:t="#freestarOptOutLink",element:n=!1}=e;if(!n&&!document.querySelector(t))return!1;n||(n=document.querySelector(t)),n.onclick=function(e){e.preventDefault(),this.showModal()}}isIdentified(){return rc()}removeIdentity(){rc()&&(je({key:sc}),Kl(this,!1,this.providersRules,this.testGroup,!1))}async setIdentity(e){let{email:t=!1,hashes:n=!1}=e,i=this.isIdentified();if(!i&&t&&(e=>{let{email:t}=e;return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)})({email:t})&&(t=ql.normalizeEmail(t),n={sha256:rl(t).toString(),sha1:ol(t).toString(),md5:ll(t).toString()},qe({key:sc,value:n,type:$e.object})),i)try{n=JSON.parse(ze({key:sc,type:$e.object}))}catch(e){console.log("We could not read the identity properly",e)}else if(n){if(!(40===n.sha1?.length&&64===n.sha256?.length&&32===n.md5?.length))return console.warn("Invalid hashes",n),!1;qe({key:sc,value:n,type:$e.object})}return this.hashedEmailsPassed||(this.hashedEmailsPassed=!0,Kl(this,n,this.providersRules,this.testGroup,!1)),this.sendEventMessages(this.providersRules),!0}showModal(){ta("\n@import url('https://fonts.googleapis.com/css2?family=Varela+Round&display=swap');\n\n.__fs-modal__overlay {\n    position: absolute;\n    z-index: 10000;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    background-color: rgba(255,255,255,0.75);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n.__fs-modal {\n    font-family: 'Varela Round', sans-serif !important;\n    font-size: 16px;\n    width: 45vw;\n    border-radius: 5px;\n    background-color: white;\n    box-shadow: 0 10px 25px 0 rgb(0 195 137 / 50%);\n    border: 1px solid rgb(0 195 137);\n}\n.__fs-modal__content {\n    margin: 1rem;\n    padding: 1rem;\n    height: calc(100% - 2rem);\n}\n.__fs-modal__header {\n    width: 100%;\n    text-align: left;\n    font-size: 2rem;\n}\nh2.__fs-modal__header {\n    border-bottom: 3px solid rgb(0 195 137);\n    margin-bottom: 1rem;\n}\nh3.__fs-modal__header {\n    font-size: 1.5rem;\n}\n.__fs-modal__description {\n    width: 100%;\n    font-size: 1rem;\n    margin-bottom: .75rem;\n}\n.__fs-modal__content span {\n    width: 100%;\n    font-size: 1.25rem;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n.__fs-modal__content span input,\n.__fs-modal__content span button {\n    width: 100%;\n    font-size: 1.25em;\n    padding: .25rem;\n}\n.__fs-modal__content span button {\n    border: 0;\n    border-radius: 5px;\n    background-color: rgb(0 195 137);\n    color: white;\n    font-family: 'Varela Round', sans-serif !important;\n}\n@media only screen and (min-device-width : 320px) and (max-device-width : 768px) {\n    .__fs-modal {\n         width: 100vw;\n         border-radius: 0;\n         background-color: white;\n         box-shadow: initial;\n         border: 0;\n         position: fixed;\n         top: 0;\n         bottom: 0;\n    }\n}\n");let e=document.body,t=kn({classList:["__fs-modal__overlay"]});t.innerHTML='\n<div class="__fs-modal">\n    <form class="__fs-modal__content">\n        <h2 class="__fs-modal__header">Welcome!</h2>\n        <p class="__fs-modal__description">Our trusted advertising partners using the UID identifier and/or encrypted email addresses  are committed to delivering relevant advertising that also respects your choice.  Advertising enables access to your favorite content across the internet.</p>\n        <h3 class="__fs-modal__header">Opt-Out</h3>\n        <p class="__fs-modal__description">Your choice to Opt-Out will indicate to trusted advertising partners that you no longer wish to receive targeted advertising based on your UID/email.  The scope of this Opt-Out is limited to this site which use UID/email.  For choice with respect to advertising based on cookies, please visit https://optout.aboutads.info.  To opt out of UID across all sites please visit <a href="https://transparentadvertising.org/" target="_blank">https://transparentadvertising.org/</a></p>\n        <p class="__fs-modal__description">Note: this choice may limit your ability to access ad supported content.  You may be asked to Opt-In again in the future to access such content.</p>\n        <span>\n            <button type="submit" id="__fs-model__submit">OPT OUT</button>&nbsp;\n            <button id="__fs-model__cancel">CANCEL</button>\n        </span>\n    </form>\n</div>\n',e.appendChild(t);let n=document.getElementById("__fs-model__submit"),i=document.getElementById("__fs-model__cancel");n.onclick=e=>{e.preventDefault(),this.removeIdentity(),t.remove(),te({name:"identityModalOptOut",detail:!0})},i.onclick=e=>{e.preventDefault(),t.remove(),te({name:"identityModalClosed",detail:!0})}}isProviderEnabled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return!e[t]||e[t]&&!1!==e[t].enabled}hadronInit(){const e=Xl(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],"hadronId"),t=this.isProviderEnabled(this.providersRules,"hadronId");if(e&&t){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?function(e,t,n,i,s,r,a){e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r]({config:{dm:!0}});const o=t.createElement(n);t.async=!0,o.src="https://cdn.hadronid.net/hadron.js?url="+encodeURIComponent(e.location.href)+"&ref="+encodeURIComponent(t.referrer)+"&_it=freestar&partner_id="+s+"&ha="+r;const d=t.getElementsByTagName(n)[0];d.parentNode.insertBefore(o,d)}(window,document,"script",0,e,"_hadron"):window.freestar.log(20,"Hadron ID not configured.")}(ec(e,"partnerId")||Ol)}}setCriteoConfig(){const e=rc(),t=this.isProviderEnabled(this.providersRules,"criteo");if(e&&t){const t={bidders:["criteo"],config:{ortb2:{user:{ext:{data:{eids:[{source:window.location.hostname,uids:[{id:e.md5,atype:3,ext:{stype:"hemmd5"}},{id:e.sha256,atype:3,ext:{stype:"hemsha256"}},{id:e.sha1,atype:3,ext:{stype:"hemsha1"}}]}]}}}}}};window.fsprebid.setBidderConfig(t)}}setLiveIntentGamKey(e){if("0"===e)return;const t=pl.liveIntentId.itfPosition||-1,n=e.length>0&&e[t];["Y","N"].includes(n)&&ac("fs_liveintent",n)}sendEventMessages(e){let t={};e&&"object"==typeof e&&!Array.isArray(e)&&(t=Object.keys(e).reduce(((t,n)=>(e[n].enabled?t.available.push(n):t.unavailable.push(n),t)),{available:[],unavailable:[]}));const n=t&&(t.available&&t.available.length||t.available&&t.unavailable.length);!this.messageSent&&this.isIdentified()&&n&&a.instance.resolve(Ht.ANALYTICS).then((e=>{e.track(new nn({eventType:"IDENTITY",eventName:"HASHED_EMAIL_PROVIDERS",data:t})),this.messageSent=!0}))}updateProvidersRulesByUrlParams(){if(this.itf_y&&this.logIdentityProviders("itf_y parameter found",this.itf_y),this.itf_n&&this.logIdentityProviders("itf_n parameter found",this.itf_n),this.itf_y||this.itf_n){const e=this.itf_y?this.itf_y.split(","):[],t=this.itf_n?this.itf_n.split(","):[];this.logIdentityProviders("Provider Rules before update",this.providersRules),this.providersRules=Object.keys(this.providersRules).reduce(((n,i)=>(e.includes(i)?(this.logIdentityProviders("Enabling identity provider:",i),n[i]={...this.providersRules[i],enabled:!0}):t.includes(i)&&(this.logIdentityProviders("Disabling identity provider:",i),n[i]={...this.providersRules[i],enabled:!1}),n)),this.providersRules),this.logIdentityProviders("Provider Rules after update",this.providersRules)}}logIdentityProviders(){if(this.itf_y||this.itf_n){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];freestar.log&&"function"==typeof freestar.log&&freestar.log({title:"Identity Manager"},...t)}}};function dc(e){const{adUnitCode:t,bidderCode:n}=e;t&&(freestar.bidsWon[t]=function(e){return{bidder:nt(e.bidder),creativeId:e.creativeId,cpm:e.cpm,mediaType:e.mediaType,evaluated:!1,ad:e.ad,time:Date.now()}}(e));const i=freestar.dynamicSlotLibrary[t];if(function(e,t){"gumgum"===nt(e.bidderCode)&&(freestar.refreshLibrary[t]={refreshTime:ma(t),refreshCounter:1,viewPercentage:100,disableRefresh:!1,stickyOriginalSlot:zn({elementId:e.adUnitCode})})}(e,i),freestar.currentStickyFooter&&"function"==typeof freestar.currentStickyFooter.prebidEvaluation){const i="gumgum"===nt(n)&&t===freestar.currentStickyFooter.placement.name;freestar.currentStickyFooter.prebidEvaluation(e,i),setTimeout((()=>{"yieldmo"===e.bidderCode&&freestar.currentStickyFooter.handleYieldmoHighImpact(e)}),1e3)}}const lc="Bid Adjustment Log : ";class cc{constructor(){this.ext={fs_company:window.freestar.fsdata&&window.freestar.fsdata.companyId||"unknown"}}}class uc{constructor(){this.data=[{name:`www.${g}`,ext:{taxonomyname:"iab_content_taxonomy"},segment:["v2ContentCategory","v2ContentSource","v2ContentMediaFormat","v2ContentChannel","v2ContentType","v2ContentLanguage","v2ContentSourceGeo"].reduce(((e,t)=>window.freestar.fsdata[t]?[...e,...window.freestar.fsdata[t]]:e),[])}]}}class fc{constructor(){this.fs_optimized=this.getIsOptimized(window.freestar),this.fs_site=window.freestar.fsdata&&window.freestar.fsdata.siteId||"unknown"}getIsOptimized(e){let{config:t={}}=e;return!(!t||!t.pageSpeedOptimized)&&t.pageSpeedOptimized}}class hc{constructor(){this.data=new fc}}class pc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.name=window.freestar.fsdata.path||"",this.domain=window.freestar.fsdata.domain||"",this.cat=window.freestar.fsdata.categories||[],this.sectioncat=window.freestar.fsdata.categories||[],this.pagecat=window.freestar.fsdata.categories||[],this.page=window.location.href||"",this.mobile=e===He?1:0,this.ref=document.referrer||"",this.content=new uc,this.ext=new hc,this.publisher=new cc}}class mc{constructor(){this.id=window.freestar.msg.fpc||""}isValid(){return this.id&&this.id.length&&this.id!==N}}class gc{clean(){for(const e in this)"string"==typeof this[e]&&0===this[e].length&&delete this[e]}}class bc extends gc{constructor(){super(),this.region=this.getRegion(),this.city=this.getCity(),this.country=this.getCountry(),this.ext={},this.clean()}getLocObj(){return!!window.freestar.locData&&window.freestar.locData}getRegion(){return void 0!==this.region?this.region:this.getLocObj().state||""}getCity(){return void 0!==this.city?this.city:this.getLocObj().city||""}validateCountryISO(e){return 2===e.length&&e}getCountry(){return void 0!==this.country&&this.validateCountryISO(this.country)?this.country:this.getLocObj().iso&&this.validateCountryISO(this.getLocObj().iso)?this.getLocObj().iso:""}}class yc{constructor(){this.types={unknown:0,mobile:1,desktop:2,ctv:3,phone:4,tablet:5,connectedDevice:6,"set-top-box":7}}getType(){if(window.freestar.deviceInfo&&window.freestar.deviceInfo.device){const{type:e="unknown"}=window.freestar.deviceInfo.device;if(e&&this.types[e])return this.types[e]}return this.types.unknown}}class vc{constructor(){this.ua=this.fetchFromDeviceInfo("ua"),this.geo=new bc({}),this.dnt=this.getUserDNTStatus(),this.devicetype=(new yc).getType(),this.make=this.getMobileDeviceInfo("vendor"),this.model=this.getMobileDeviceInfo("model"),this.os=this.getOSInfo("name"),this.osv=this.getOSInfo("version")}getUserDNTStatus(){return window.freestar.msg.fpc===N?1:0}getOSInfo(e){return this.fetchFromDeviceInfo("os")[e]||""}fetchFromDeviceInfo(e){return window.freestar&&window.freestar.deviceInfo&&window.freestar.deviceInfo[e]?window.freestar.deviceInfo[e]:""}getMobileDeviceInfo(e){return this.fetchFromDeviceInfo("device")[e]||""}}class wc{constructor(){window.freestar.fsdata.topLevelStoredRequestId&&(this.storedrequest={id:window.freestar.fsdata.topLevelStoredRequestId})}}class Ic{constructor(){this.prebid=new wc}}class _c{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=window.freestar.config.ortb2||{};this.site=this.merge(t.site,new pc(e)),this.user=this.merge(t.user,new mc),this.device=this.merge(t.device,new vc),this.geo=this.merge(t.geo,new bc),this.ext=this.merge(t.ext,new Ic)}merge(){return br(arguments.length>1?arguments[1]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}const Sc={maxTopicCaller:3,bidders:[{bidder:"pubmatic",iframeURL:"https://ads.pubmatic.com/AdServer/js/topics/topics_frame.html",expiry:7},{bidder:"openx",iframeURL:"https://pa.openx.net/topics_frame.html",expiry:7}]};function Ec(e){if(e?.adUnitCode){let t=null,n=!1;try{t=freestar.refreshLibrary?.[e.adUnitCode]?.dataRefreshId}catch(e){freestar.log(1,`Error: ${e}`)}if(t){let e=0;const i=RegExp(t,"g");return freestar.refreshSlots.forEach(((t,s)=>{i.test(t.refreshId)&&(e=s,n=!0)})),freestar.refreshSlots.splice(e,1),n}return n}return!1}const Ac={};let kc=[],xc=null;function Tc(e){let{bidder:t,cpm:n,siteAdjustment:i,networkAdjustment:s,placement:r,bid:a}=e;!function(e){let{bidder:t,cpm:n,siteAdjustment:i,networkAdjustment:s}=e;(i||s&&freestar.adjustments.isLogged)&&(freestar.log(lc,"bidder : ",t),freestar.log(lc,"cpm : ",JSON.stringify(n)),i&&freestar.log(lc,"siteAdjustment : ",i),s&&freestar.log(lc,"networkAdjustment : ",s))}({bidder:t,cpm:n,siteAdjustment:i,networkAdjustment:s,placement:r,bid:a});let o=n;const d=B("manipulate-cpm"),l=B("manipulate-bidder");if(d&&l&&t===l)return d;if(d)return d;function c(e){let{adj:t,value:n}=e;const i=Number(n*((100-t)/100)).toFixed(8);return parseFloat(i)}if(s&&s>0&&(o=c({adj:s,value:o})),i&&i>0&&(o=c({adj:i,value:o})),t&&r&&r.networks&&r.networks.length){const e=function(e){let{bidder:t,placement:n}=e;const i=n.networks.filter((function(e){if(t===e.slug&&e.placementLevelBidAdjustment&&e.placementLevelBidAdjustment>0)return e}))[0];return i?i.placementLevelBidAdjustment:0}({bidder:t,placement:r});e&&e>0&&(o=c({adj:e,value:o}))}return function(e){let{cpm:t,siteAdjustment:n,networkAdjustment:i,bid:s}=e;(t&&n||i)&&(freestar.adjustments.isLogged&&freestar.log(lc,"final cpm value : ",t),s.rawCpm=s.cpm,s.adjustedCpm=t,freestar.adjustments.bids.push(Ne(s)))}({cpm:o,siteAdjustment:i,networkAdjustment:s,bid:a}),o}Ac.initiate=()=>{var e=window.fsprebid||{};return e.que=e.que||[],e.retries=0,e};let Cc={};function Rc(e){let{network:t}=e;const{id:n}=t;let i=t.networkBidAdjustment||0;if(freestar.networkMap&&n){const e=freestar.networkMap[n];i=e&&e.bidAdjustment&&Number(e.bidAdjustment)&&e.bidAdjustment>0?e.bidAdjustment:t.networkBidAdjustment||0}return i}function Oc(e){Cc[e.slug]||(Cc[e.slug]={bidCpmAdjustment:function(t,n){const i=sa({name:pn({slotId:n.adUnitCode})}),s=Tc({bidder:e.slug,cpm:t,siteAdjustment:e.bidAdjustment,networkAdjustment:Rc({network:e}),placement:i,bid:n});return s||t}})}Ac.setNetworks=()=>{xc=new wn,fsprebid.que.push((function(){fsprebid.onEvent(jt,(e=>dc(e)))})),freestar.fsdata.networks.forEach((e=>{Bi(e),Oc(e)}));freestar.fsdata.placements.filter((e=>e.networks.length)).forEach((function(e){e.networks.forEach((e=>{Bi(e),Oc(e)}))}))},Ac.getBidderSettings=()=>{const e=En({freestar:freestar});Cc.standard={alwaysUseBid:!1,adserverTargeting:[{key:e.bidder,val:function(e){return nt(e.bidderCode)}},{key:e.adid,val:function(e){return e.adId}},{key:e.pb,val:function(e){return"medium"===freestar.fsdata.priceGranularity?e.pbMg:"high"===freestar.fsdata.priceGranularity?e.pbHg:"auto"===freestar.fsdata.priceGranularity?e.pbAg:"dense"===freestar.fsdata.priceGranularity?e.pbDg:e.adUnitCode&&e.cpm&&e.cpm>2&&freestar.gamMap[e.adUnitCode]&&!0===freestar.gamMap[e.adUnitCode]?function(e){let{cpm:t}=e;const n=t<=10?20:2;return(Math.round(t*n)/n).toFixed(2)}({cpm:e.cpm}):e.pbCg}},{key:e.size,val:function(e){return e.size}},{key:e.format,val:function(e){return e.mediaType}},{key:"custom_bidder_size",val:function(e){return[nt(e.bidder),e.size].join("_")}},{key:"freestar_domain",val:function(){return freestar.fsdata.domain||location.domain}},{key:"freestar_path",val:function(){return location.pathname}},{key:e.auction_id,val:function(e){return`${e.auctionId}`}},{key:e.source,val:function(e){return e.source}}]},(freestar.fsDfpId||freestar.fsDevDfpId||freestar.fsdata.useFsAdserverTargetingKeys)&&Cc.standard.adserverTargeting.push({key:"fspbg",val:"fs_universal"}),Cc.concert&&(Cc.concert.storageAllowed=!0),Cc.criteo&&(Cc.criteo.storageAllowed=!0),Cc.taboola&&(Cc.taboola.storageAllowed=!0)},Ac.setBidderSettings=()=>{fsprebid.bidderSettings=Cc};function Pc(e){let{enableSendAllBids:t,useTargetingKeys:n}=e;const i={};return n&&(i.allowTargetingKeys=["key1"]),t||(i.alwaysIncludeDeals=!0),i}function Nc(e){let{placementName:t,callback:n}=e;freestar.log(1,"Stand Alone Player: Invoked",arguments);let i=!0;const s=freestar.fsdata.placements.filter((e=>e.name===t))[0];if(s){freestar.log(1,"Stand Alone Player: Placement",s);const e=document.getElementById(s.name),t=document.createElement("div");if(t.style=e.style,t.style.width="100%",t.style.height="100%",t.id="_"+e.id,t.className="_wrapper",e.appendChild(t),freestar.log(1,"Stand Alone Player: Div",e),e){const{width:t}=e.getBoundingClientRect();if(t>=300){freestar.log(1,"Stand Alone Player: eligible width!");const e=freestar.fsdata.placementVideos.filter((e=>e.id===s.standAloneVideoOptions.videoId))[0];e&&(freestar.log(1,"Stand Alone Player: videoAd",e),i=!1,function(e){let{videoAd:t,placement:n,width:i,callback:s}=e;performance.mark("springServe-initialization-start"),window._ssPlayer=window._ssPlayer||{spIdi:t.supplyId,widthi:`${i}`,aspecti:"16:9",divi:"_"+n.name};const r="https://cdn.springserve.com/assets/0/playerJS/frstrIN_2.js",a=Date.now();function o(){s&&(s(null,{completed:!0}),s=void 0)}Ga({bidder:"springserve",placementId:t.id?t.id:"",tagUrl:r}),load_script(r,(function(){window.AdPlayerPro().on("AdStarted",(function(){Ha({bidder:"springserve",videoAd:t,requestTimestamp:a}),s&&s(null,{videoAdStarted:!0}),["AdStopped","AdClosed"].forEach((e=>{window.AdPlayerPro().on(e,(()=>{o()}))})),window.AdPlayerPro().on("AdSkipped",(()=>{s&&(s(null,{videoAdSkipped:!0,completed:!0}),s=void 0)}))})),window.AdPlayerPro().on("AdError",(function(){freestar.log(1,"Stand Alone Player: Error loading video requesting bids via new ad slots method"),s&&(s(null,{videoAdStarted:!1}),freestar.standAlonePlayer.callback=s,freestar.standAlonePlayer.slotId=n.name),n.standAloneVideoOptions.backfillDisplayAd?(freestar.log(1,"Stand Alone Player: Backfill display ad requesting."),ts([{placementName:n.name,slotId:n.name}])):(freestar.log(1,"Stand Alone Player: Backfill display not selected. Process terminating"),s(null,{completed:!0}))})),performance.mark("springServe-initialization-end")}))}({videoAd:e,placement:s,width:t,callback:n}))}else freestar.log(1,"Stand Alone Player: width is not equal to or greater than 400px!")}}i&&n&&(freestar.log(1,"Stand Alone Player: Failure!"),n(!0))}function Dc(e){let{placementName:t,callback:n}=e;const i=freestar.fsdata.placements.filter((e=>e.name===t))[0];i&&(freestar.log(1,"Stand Alone Player: Placement",i),document.getElementById(i.name).innerHTML="",delete window.AdPlayerPro),n&&n(!0)}Ac.setEventListeners=()=>{freestar.adjustments.isLogged&&fsprebid.onEvent(qt,(function(e){const t=freestar.adjustments.bids.find((t=>t.requestId===e.requestId));t&&(freestar.log("Bid Adjustment Log: bid response after adjustment",e),freestar.log("Bid Adjustment Log: original bid",t))})),fsprebid.onEvent($t,(function(e){freestar.performanceLogger.logMark({markerName:Yn.pubfigPrebidAuctionInit}),e.adUnitCodes.forEach((e=>{freestar.bidsWon[e]&&delete freestar.bidsWon[e]}))})),fsprebid.onEvent(qt,(function(e){const t=freestar.adjustments.bids.find((t=>t.requestId===e.requestId));e.rawCpm=t?.cpm??e.cpm}));const e=[Ht.ANALYTICS,Ht.BID_WON_ANALYTICS_EVENT_FACTORY];freestar.allowBidResponseCollection&&e.push(Ht.BID_RESPONSE_ANALYTICS_EVENT_FACTORY),Promise.all(e.map((e=>a.instance.resolve(e)))).then((e=>{let[t,n,i]=e;fsprebid.onEvent(qt,(e=>{e.adUnitCode&&pa({bidder:nt(e.bidderCode),adUnitCode:e.adUnitCode}),Ec(e),i&&t.track(i.create(e))})),fsprebid.onEvent(jt,(e=>{e.adUnitCode&&pa({bidder:nt(e.bidderCode),adUnitCode:e.adUnitCode});const i=Ec(e);e.bidderRefresh=i,t.track(n.create(e))}))}))},Ac.enableAnalyticsAdapter=()=>{fsprebid.que.push((()=>{ul.start({}),zl.init()}))},Ac.setSChain=()=>{const{companyId:e="",schain:t}=window.freestar.fsdata,n=Kn(e,t?.type,t?.bidderOverrides);n&&window.fsprebid.setBidderConfig({bidders:Mi(xc),config:{schain:{validation:"strict",config:n}}})},Ac.settingConfig=(e,t)=>{const n=(()=>{if(window.freestar.fsdata.priceGranularity){if(!(window.freestar.fsdata.priceGranularity.length>6))return window.freestar.fsdata.priceGranularity;try{return JSON.parse(freestar.fsdata.priceGranularity)}catch(e){window.freestar.log(10,`Error parsing priceGranularity  ${e}`)}}return{buckets:window.freestar.fsDfpId||window.freestar.fsDevDfpId||window.freestar.fsdata.useFsAdserverTargetingKeys?E.v2:E.v1}})(),i=freestar.fsdata.useFsAdserverTargetingKeys||B("use-fs-adserver-targeting-keys"),s=window.freestar.deviceInfo&&window.freestar.deviceInfo.device.type||"",r=!!window.freestar?.fsdata?.enableSendAllBidsToAdServer,a={performanceMetrics:!1,targetingControls:Pc({enableSendAllBids:r,useTargetingKeys:i}),ortb2:new _c(s),rubicon:{singleRequest:!0},bidderTimeout:window.freestar.fsdata.timeout||1500,userSync:{auctionDelay:100,enableOverride:!1,filterSettings:{all:{bidders:"*",filter:"include"}},userIds:[],syncDelay:100,syncEnabled:!0,syncsPerBidder:8,topics:Sc},enableTIDs:!0,enableSendAllBids:r,priceGranularity:n,bidderSequence:"random",publisherDomain:`${window.location.protocol}//${window.location.host}`,useBidCache:!0,gptPreAuction:{enabled:!0,customPbAdSlot:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:`/${_}`,{appendDivIdToGpid:n=!0}=freestar.fsdata,i=t;return n&&(i+="/"+e),freestar.log({title:"GPID"},"Payload is:",i),i},mcmEnabled:!0},firstPartyData:{skipEnrichments:!0},cache:{url:"https://prebid.adnxs.com/pbc/v1/cache",ignoreBidderCacheKey:!0}};if(a.userSync.userIds=a.userSync.userIds.concat(oc.getPrebidNonRTDProviders()),!t.getBypassFirstAuction()){const e=t.getBidderSummary();kc=Object.keys(e).filter((t=>["server","both"].includes(e[t]))),!kc.length&&xc&&xc.hasValidStoredRequests()&&kc.push(xc.getSlug()),kc.length&&(window.freestar.log(49,"Setting s2sconfig..."),a.s2sConfig={accountId:"d0cd3243-716f-4f9c-b074-f72637de26f3",enabled:!0,bidders:kc,timeout:window.freestar.fsdata.timeout,adapter:"prebidServer",endpoint:"https://s2s.t13.io/openrtb2/auction",syncEndpoint:"https://s2s.t13.io/cookie_sync",cookieSet:!1,cookiesetUrl:"",allowUnknownBidderCodes:!0})}window.freestar.fsdata.permutiveEnabled&&(a.realTimeData=Qn(a),a.realTimeData.dataProviders.push({name:"permutive",waitForIt:!0,params:{acBidders:[window.freestar.fsdata.permutiveBidders.split(",")]}})),ic(window.freestar.fsdata.identityProviders,a),yo(window.freestar.locData)&&(a.consentManagement=a.consentManagement||{},a.consentManagement.gdpr={cmpApi:"iab",timeout:1200,allowAuctionWithoutConsent:!1}),J(window.freestar.locData)&&(a.consentManagement=a.consentManagement||{},a.consentManagement.usp={timeout:1200}),e.setConfig(a)},Ac.analytics=e=>{e.enableAnalytics([{provider:"freestar",options:{}}])},Ac.enableTIDs=()=>{window.fsprebid.setConfig({enableTIDs:!0})};let Lc=!1;function Mc(e){let{firstAdRequestedElement:t}=e;googletag.pubads().addEventListener(Ft,(function(e){t&&e.slot.getSlotElementId()===t&&freestar.performanceLogger.logMark({markerName:Yn.pubfigSlotRenderEnded,compareTo:[Yn.pubfigSlotRequested]}),function(e){let{event:t}=e;const n=t.slot.getSlotElementId(),i=freestar.fsdata.placements.filter((e=>e.name===n))[0];if(i){const{standAloneVideoOptions:e}=i;if(e&&e.videoId&&e.videoId.length&&freestar.fsdata.placementVideos.filter((e=>e.id===i.standAloneVideoOptions.videoId))[0]){freestar.standAlonePlayer&&freestar.standAlonePlayer.callback&&"function"==typeof freestar.standAlonePlayer.callback&&(freestar.standAlonePlayer.callback(null,{displayAdServed:!t.isEmpty,completed:!0}),freestar.standAlonePlayer.callback=void 0);const e=document.getElementById(i.name);if(e){const t=e.querySelector("div[id^=google_ads_iframe_]");t&&(t.className+="center-ad")}}}}({event:e}),Lc||(Lc=!0,freestar.fsdata.browsiEnabled&&wr().allowBrowsi()&&(!function(){if(window.BrowsiScriptLoaded)return;const e=kn({type:"script",id:"browsi-tag",src:"https://cdn.browsiprod.com/bootstrap/bootstrap.js",attributes:[{"data-pubKey":"freestar"},{"data-siteKey":"d_mapping"}]});e.type="text/javascript",e.async=!0,e.onload=function(){window.BrowsiScriptLoaded=!0},document.getElementsByTagName("head")[0].appendChild(e)}(),freestar.log({title:"Browsi"},"Script loaded")))}))}function Bc(e){if(ji({name:"pageGrabber"}))return void e(!0);freestar.log(1,"Page Grabber: Init");const t=freestar.fsdata.placements.filter((e=>e.interstitialOptions&&e.interstitialOptions.active&&"UNDERTONE_GRABBER"===e.interstitialOptions.type))[0];if(t){performance.mark("pageGrabber-initialization-start"),freestar.log(1,"Page Grabber: placement ",t),freestar.frequencyLibrary[t.name]=new vi({placement:t,product:"interstitial",callback:e});const n=Number(sessionStorage.getItem("pageviews")||1),{interstitialPageViewsBefore:i}=h({placement:t,type:"interstitialOptions"});if(freestar.frequencyLibrary[t.name].cap>-1&&!freestar.frequencyLibrary[t.name].allowProduct())return void e(!0);if(i&&n<i)return void e(!0);const s=Hn({placement:t}),r=In(t);if(r&&Di({adUnits:r}),s&&t.name&&document.body){const n=function(n){if(n&&n.data)try{const r=!(!n.data||"string"!=typeof n.data)&&JSON.parse(n.data);r.method&&"close"===r.method&&i({slot:s,callback:e,name:t.name})}catch(e){freestar.log(1,`Error: ${e}`)}},i=function(e){let{slot:t,callback:i}=e;freestar.log(1,"Page Grabber: destroying page grabber div!"),freestar.newAdSlotsAllowed=!0,document.removeEventListener("click",n,!1),googletag.destroySlots([t]),i(null,!0)};freestar.newAdSlotsAllowed=!1;const r=kn({type:"div",id:t.name});document.body.appendChild(r),googletag.cmd.push((function(){googletag.display(r.id)})),ri([t.name],[s]);let a=0;const o=setInterval((function(){if(a++,a>50)clearInterval(o);else{const t=document.querySelectorAll('[title="Close"]')[0];t&&(clearInterval(o),t.addEventListener("click",(function(){i({slot:s,callback:e})})))}}),50);window.addEventListener("message",n)}else freestar.log(1,"Page Grabber: define slot error or document.body not available skipping page grabber!"),freestar.frequencyLibrary[t.name].cap&&freestar.frequencyLibrary[t.name].subtractIteration(),e(!0);performance.mark("pageGrabber-initialization-end")}else freestar.log(1,"Page Grabber: no placement aligned skipping page grabber!"),e(!0)}function Fc(){const e=document.createElement("script");e.src="https://freestar-io.videoplayerhub.com/gallery.js",document.head.insertBefore(e,document.head.firstElementChild),freestar.log("inserted blockthrough script")}const Uc="fs.session";const $c=new class{constructor(){this.session=null,this.init()}init(){let e=ze({key:Uc});this.session=e?JSON.parse(e):{},this.session.id||(this.session.id=Yr());let t=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].map((e=>({key:e,value:B(e)}))).filter((e=>""!==e.value));if(0!==t.length){let e={};t.forEach((t=>{e[t.key]=t.value})),this.session.utm=e}qe({key:Uc,type:$e.object,value:this.session})}getSessionId(){return this.session.id}getUTMValue(e){return this.session.utm?this.session.utm[e]:null}},zc=()=>$c.getSessionId();function qc(){freestar.msg.pageId=ll(window.location.href+freestar.hitTime+freestar.msg.fpc).toString()}function jc(){if(freestar.fsdata&&freestar.fsdata.hashEnabled){const e=at({name:"fs.identifier.hash"});return window.location.hash=e&&e.length?e:function(){const e=function(){let e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxxxx".replace(/[x]/g,(function(){let t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),t.toString(16)}))}();return rt({name:"fs.identifier.hash",value:e,expires:1825,path:"/"}),e}(),window.location.hash}return""}function Vc(){freestar.msg=freestar.msg||{},qc(),freestar.msg.loadTime=freestar.msg.loadTime||0,freestar.msg.hash=jc(),freestar.msg.sessionId=zc()}function Hc(e){let{placements:t}=e;return t.find((e=>e.revolvingRailOptions.isOnCall&&!0===e.revolvingRailOptions.isOnCall))}function Gc(e){let{event:t}=e;document.querySelector(`#${t.slot.getSlotElementId()}`).parentNode.parentNode.classList.add("fs-rr-rendered")}const Wc=e=>{new IntersectionObserver((e=>{let[t]=e;if(t.isIntersecting){const e=[...t.target.classList].indexOf("fs-rr-rendered")>-1,n=function(e){let{element:t}=e;return[...t.querySelectorAll(".fs-rr-ad-x250, .fs-rr-ad-x600")].map((e=>({slotId:e.id,placementName:e.getAttribute("data-ad-unit")})))}({element:t.target});if(e){const e=n.map((e=>e.slotId));$n().forEach((t=>{e.indexOf(t.getSlotElementId())>-1&&googletag.pubads().refresh([t])}))}else window.freestar.newAdSlots(n),function(e){let{numAds:t}=e;a.instance.resolve(Ht.ANALYTICS).then((e=>{e.track(new nn({eventName:"revolvingRail",data:{numAds:t}}))}))}({numAds:n.length}),n.forEach((e=>{let{slotId:t}=e;window.freestar.gamImpressionCallbacks[t]=Gc}))}}),{root:null,rootMargin:`0px 0px ${window.innerHeight/3}px 0px`,threshold:0}).observe(document.querySelector(e))},Yc=e=>{let{adUnits:t}=e;const{container:n,padddingTop:i,paddingTop:s}=h({placement:t[0],type:"revolvingRailOptions"});!function(){ta(`\n        .fs-rr-ads-outer {\n            position: relative;\n            height: 200vh;\n            margin-bottom: 50px;\n        }\n\n        .fs-rr-ads-inner {\n            top: ${arguments.length>0&&void 0!==arguments[0]?arguments[0]:0}px;\n            position: sticky;\n        }\n\n        .fs-rr-ad-x250 {\n            text-align: center;\n            height: 250px;\n        }\n\n        .fs-rr-ad-x250:first-child {\n            margin-bottom: 100px;\n        }\n\n        .fs-rr-ad-x600 {\n            text-align: center;\n            height: 600px;\n        }\n    `)}(s||i);const r=ia(n);r||console.error(`Revolving Rail initialization failed: No ${n} DOM element found in page.`);const a=2*window.innerHeight+window.innerHeight/2+(s||i),o=r.parentNode.offsetHeight,d=t.reduce(((e,t)=>{if(t.sizes.length){const{sizes:n}=t;let i=function(e){let{sizes:t}=e;return 600===t[0][1]&&"x600"}({sizes:n})||function(e){let{sizes:t}=e;return 250===t[0][1]&&"x250"}({sizes:n});if(!i)return e;e[i]||(e[i]=[]),e[i].push(t)}return e}),{});if(0===Object.keys(d).length)return window.freestar.log({title:"RevolvingRail",style:"background: orange; color: #fff; border-radius: 3px; padding: 3px"},"No usable sizes from revolving rail placements"),!1;const l=kn({classList:["fs-rr-ads"]});let c=a,u=0,f=0;const p=Object.keys(d),m=p.length-1;for(;c<o;){const e=kn({classList:["fs-rr-ads-outer"],id:`fs-rr-ads-outer-${f}`}),t=kn({classList:["fs-rr-ads-inner"]});e.appendChild(t);const n=p[u],i=d[n];if("x250"===n){const e=i[0].name,s=i[1].name;t.appendChild(kn({classList:[`fs-rr-ad-${n}`],id:`${e}-a-${f}`,attributes:[{"data-ad-unit":e}]})),t.appendChild(kn({classList:[`fs-rr-ad-${n}`],id:`${s}-b-${f}`,attributes:[{"data-ad-unit":s}]}))}else{const e=i[0].name;t.appendChild(kn({classList:[`fs-rr-ad-${n}`],id:`${e}-${f}`,attributes:[{"data-ad-unit":e}]}))}c+=a,l.appendChild(e),f++,u=u===m?0:u+1}r.appendChild(l);for(let e=0;e<f;e++)Wc(`#fs-rr-ads-outer-${e}`)},Qc=()=>{if(ji({name:"revolvingRail"}))return window.freestar.log(1,"Revolving Rail is disabled."),!1;performance.mark("revolvingRail-initialization-start");const e=function(e){let{placements:t}=e,n={};return t.forEach((e=>{const{container:t}=e.revolvingRailOptions;Object.prototype.hasOwnProperty.call(n,t)||(n[t]=[]),n[t].push(e)})),n}({placements:window.freestar.fsdata.placements.filter((e=>f({placement:e,type:"revolvingRailOptions"})))});for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t],i=Hc({placements:n}),s=ia(t);!i&&s?Me()&&!freestar.fsdata.psoDisableInteraction?Ue({name:"revolvingRail",callback:Yc.bind(null,{adUnits:n,container:s})}):Yc({adUnits:n,container:s}):window.freestar.log(1,`Revolving Rail initialization failed for the ${t} container. The Revolving Rail is onCall or  No DOM element found on page.`)}performance.mark("revolvingRail-inititialization-end")},Kc=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(!e)return void window.freestar.log(1,'newRevolvingRail - must have either a string with a placement name or an object like {placementName: "myPlacementName", slotId: "my-id-one"}');e=function(e){let{requestedRevolvingRail:t}=e;return"object"!=typeof t&&(t={placementName:t,slotId:t}),t}({requestedRevolvingRail:e}),window.freestar.log(1,"newRevolvingRail - requested revolving rail ",e);const t=window.freestar.fsdata.placements.find((t=>t.name===e.placementName));let n=ia(e.slotId);n||(n=ia(t.revolvingRailOptions.container)),t&&n?Yc({adUnits:[t],container:n}):window.freestar.log(1,`newRevolvingRail - initialization failed for the ${e.placementName} requested placement. There is no record of this placement in fsdata or the slotId ${e.slotId} was not found on the DOM.`)},Jc=e=>{let{placements:t}=e;t.forEach((e=>{const{name:t,contextId:n}=e;a.instance.resolve(Ht.ANALYTICS).then((e=>{e.track(new sn({partnerName:"DIANOMI",placementName:t,contextId:n}))}))})),performance.mark("dianomi-initialization-end")},Xc=()=>{const e=window.freestar.fsdata.placements.filter((e=>"DIANOMI"===e.partnerName));if(ji({name:"dianomiContentRec"})||e.length<1)return!1;performance.mark("dianomi-initialization-start"),e.forEach((e=>{(e=>{let{placement:t}=e;const{name:n,contextId:i}=t,s=document.querySelector(`#${n}`);if(!s)return window.freestar.log(1,`Dianomi Target Node with ID "${n}" Does Not Exist`),!1;s.appendChild(kn({classList:["dianomi_context"],attributes:[{"data-dianomi-context-id":i}]}))})({placement:e})})),(e=>{let{id:t}=e;return null!==document.querySelector(`#${t}`)})({id:C})?performance.mark("dianomi-initialization-end"):Tn("https://www.dianomi.com/js/contextfeed.js",Jc.bind(null,{placements:e}),C)};function Zc(){window.addEventListener("focus",(()=>{const e=[...freestar.focusQueue];freestar.focusQueue=[],e.forEach((e=>e.apply()))}))}let eu=!1;function tu(){eu||(eu=!0,document.addEventListener("visibilitychange",(function(){return!document.hidden&&freestar.visibilityRefresh.timeLeft&&Date.now()-freestar.visibilityRefresh.timeLeft>1e3*freestar.visibilityRefresh.refreshTimeMinimum&&(freestar.visibilityRefresh.timeLeft=null,freestar.refreshActiveSlots()),freestar.visibilityRefresh.timeLeft=Date.now(),!0})))}function nu(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===n&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}nu(".fs-sticky-footer {\n    display: block;\n    bottom: 0;\n    right: 0;\n    position: fixed;\n    width: 100vw;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    z-index: 2147483647;\n}\n.fs-sticky-slot-element > div > iframe {\n    margin: 0 !important;\n}\n.fs-sticky-slot-element > div {\n    position: relative;\n}\n.fs-sticky-parent {\n    z-index: 2147483647;\n    bottom: 0;\n    padding-top: 0px;\n    position: fixed;\n    left: 0;\n    right: 0;\n    text-align: center;\n}\n.fs-sticky-wrapper {\n    background-color: #f6f3f3;\n    display: inline-block;\n    margin: auto;\n    width: -moz-fit-content;\n    width: -webkit-fit-content;\n    width: fit-content;\n    visibility: inherit;\n    z-index: inherit;\n}\n.fs-overlay {\n    width: 0%;\n    height: 100%;\n    position: fixed;\n    z-index: 5000000;\n    top: 0;\n    left: 0;\n    background: #888888;\n    width: 100%;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.canvas-boxes {\n    width: 100px;\n    height: 100px;\n}\n.captcha-styles {\n    text-align: center;\n    width: 100%;\n}\n.fs-dynamic {\n    text-align: center;\n    clear: both;\n}\n.fs-iai {\n    text-align: center;\n    clear: both;\n}\n.fs-x-btn {\n    position: absolute;\n    top: 20px;\n    right: 0px;\n    cursor: pointer;\n    border-radius: 50%;\n    width: 30px;\n    height: 30px;\n    background-color: rgba(0, 0, 0, 0.5);\n    -webkit-box-shadow: 0 0 0 rgba(0, 0, 0, 0);\n            box-shadow: 0 0 0 rgba(0, 0, 0, 0);\n}\n.fs-l-btn {\n    display: block;\n    position: absolute;\n    top: 14px;\n    left: 5px;\n    pointer-events: none;\n    border-radius: 2px;\n    width: 20px;\n    height: 2px;\n    background-color: rgba(0, 0, 0, 0);\n    -webkit-transform: rotate(-45deg);\n            transform: rotate(-45deg);\n}\n.fs-r-btn {\n    display: block;\n    pointer-events: none;\n    border-radius: 2px;\n    width: 20px;\n    height: 2px;\n    background-color: #ffffff;\n    -webkit-transform: rotate(45deg);\n            transform: rotate(45deg);\n}\n.fs-btn-wrapper {\n    display: inline-block;\n}\n.fs-pdu-x {\n    -moz-appearance: none;\n    -webkit-appearance: none;\n    -webkit-transition: all 0.3s ease-in-out;\n    background-color: #ffffff;\n    background-image: url('https://a.pub.network/core/imgs/freestar_close_button.svg');\n    background-position: 50%;\n    background-repeat: no-repeat;\n    border: none;\n    border-radius: 50%;\n    -webkit-box-shadow:\n        0 0 0 1px #888888,\n        0 0 0 6px rgba(247, 247, 247, 0.75);\n            box-shadow:\n        0 0 0 1px #888888,\n        0 0 0 6px rgba(247, 247, 247, 0.75);\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    cursor: pointer;\n    display: block;\n    height: 20px;\n    outline: none;\n    padding: 0px;\n    position: absolute;\n    right: 12px;\n    top: 12px;\n    transition: all 0.3s ease-in-out;\n    width: 20px;\n}\n.fs-close-button {\n    -moz-appearance: none !important;\n    -webkit-appearance: none !important;\n    -webkit-transition: all 0.3s ease-in-out !important;\n    appearance: none !important;\n    background-color: #ffffff !important;\n    background-image: url('https://a.pub.network/core/imgs/freestar_close_button.svg') !important;\n    background-position: 50% !important;\n    background-repeat: no-repeat !important;\n    border: none !important;\n    border-radius: 50% !important;\n    -webkit-box-shadow:\n        0 0 0 1px #888888,\n        0 0 0 1px rgba(247, 247, 247, 0.75) !important;\n            box-shadow:\n        0 0 0 1px #888888,\n        0 0 0 1px rgba(247, 247, 247, 0.75) !important;\n    -webkit-box-sizing: border-box !important;\n            box-sizing: border-box !important;\n    cursor: pointer !important;\n    display: block !important;\n    height: 20px !important;\n    outline: none !important;\n    padding: 0px !important;\n    position: absolute !important;\n    right: 25px !important;\n    top: 25px !important;\n    transition: all 0.3s ease-in-out !important;\n    width: 20px !important;\n}\n.fs-close-button {\n    all: unset;\n}\n.fs-close-button:hover,\n.fs-close-button:focus {\n    background-color: #000 !important;\n}\n.fs-sticky-popup-container {\n    z-index: 2147483647 !important;\n}\n.fs-sticky-popup-container {\n    font-size: 0.8em;\n    text-align: center;\n    font-family: 'arial';\n    white-space: nowrap;\n    width: auto;\n    height: auto;\n    padding: 7px;\n    -webkit-filter: drop-shadow(2px 2px 2px grey);\n            filter: drop-shadow(2px 2px 2px grey);\n}\n.fs-sticky-popup-container a:nth-child(2) {\n    border-top: 1px solid #999;\n}\n.fs-close-button:hover {\n    -webkit-box-shadow:\n        0 0 0 1px #888888,\n        0 0 0 8px rgba(247, 247, 247, 0.75);\n            box-shadow:\n        0 0 0 1px #888888,\n        0 0 0 8px rgba(247, 247, 247, 0.75);\n}\n.fs-close-button-pushdown {\n    right: 12px !important;\n    top: 12px !important;\n}\n.fs-close-button-zerg-interstitial {\n    right: -5px !important;\n    top: -5px !important;\n}\n.fs-close-button-zerg-interstitial {\n    -webkit-transform: scale(1.25);\n            transform: scale(1.25);\n}\n@media screen and (min-width: 820px) {\n    .fs-close-button-sticky {\n        top: 9.3% !important;\n        right: 10px !important;\n    }\n}\n@media screen and (max-width: 820px) {\n    .fs-close-button-sticky {\n        top: 3px !important;\n        right: 10px !important;\n    }\n    .fs-close-button-pushdown {\n        top: 0 !important;\n        right: 0 !important;\n    }\n    .sticky-reportThisAd button:after {\n        right: -25px !important;\n    }\n    .pushdown-reportThisAd button:after {\n        top: 30px !important;\n        right: -38px !important;\n    }\n}\n.fs-pushdown {\n    background-color: rgba(247, 247, 247, 0.9);\n    top: 0;\n    text-align: center;\n    z-index: 2147483647;\n    width: 100%;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.fs-pushdown-sticky {\n    position: sticky !important;\n    left: 0 !important;\n}\n.fs-pushdown-sticky {\n    background-color: rgba(247, 247, 247, 0.9);\n    top: 0;\n    text-align: center;\n    z-index: 2147483647;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.freestar_report_button {\n    border: none;\n    font-family: sans-serif;\n    font-size: 9px;\n    cursor: pointer;\n    color: #646464;\n}\n._fsBranding {\n    position: relative;\n}\n._fsBranding a {\n    max-height: none;\n    max-height: initial;\n    background-color: transparent;\n    background-color: initial;\n    margin-bottom: 0;\n    margin-bottom: initial;\n    border: medium none currentcolor;\n    border: initial;\n    -moz-appearance: none;\n    -webkit-appearance: none;\n    -webkit-transition: all 0.3s ease-in-out;\n    appearance: none;\n    background-image: url('https://a.pub.network/core/imgs/fslogo-green.svg');\n    background-position: 50%;\n    background-repeat: no-repeat;\n    border: none;\n    border-radius: 50%;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    cursor: pointer;\n    display: block;\n    height: 30px;\n    outline: none;\n    position: absolute;\n    left: 6px;\n    top: 6px;\n    transition: all 0.3s ease-in-out;\n    width: 30px;\n    min-width: 0;\n    min-width: initial;\n}\n@media screen and (max-width: 820px) {\n    ._fsBranding a {\n        top: -30px;\n        background-color: rgba(247, 247, 247, 0.75);\n        background-size: 58%;\n    }\n}\n.fs-report-ad-img {\n    width: 60%;\n    margin: 9px;\n}\n#freestar_overlay {\n    background: rgba(0, 0, 0, 0.6);\n    width: 100%;\n    height: 100%;\n    z-index: 2147483647;\n    top: 0;\n    left: 0;\n    position: fixed;\n}\n#freestar_overlay_flex {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    width: 100%;\n    height: 100%;\n}\n#freestar_report_ad {\n    background: rgba(255, 255, 255, 1) !important;\n}\n#freestar_report_ad {\n    width: 300px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n#freestar_report_ad::before {\n    background: rgba(255, 255, 255, 1) !important;\n}\n#freestar_report_ad::before {\n    width: 300px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n#freestar_report_ad_text_center {\n    text-align: center;\n}\n.freestar_close_btn {\n    position: absolute;\n    right: 0px;\n    top: 0px;\n    width: 32px;\n    height: 32px;\n    background-color: rgb(255, 255, 255);\n}\n.freestar_close_btn:before {\n    -webkit-transform: rotate(45deg);\n            transform: rotate(45deg);\n}\n.freestar_close_btn:after {\n    -webkit-transform: rotate(-45deg);\n            transform: rotate(-45deg);\n}\n.freestar_report_btn {\n    background: #00c389 !important;\n    cursor: pointer !important;\n    border: none !important;\n    border-radius: 30px !important;\n    color: #fff !important;\n    padding: 10px 20px !important;\n    font-size: 12px !important;\n    font-weight: 500 !important;\n    font-family: Arial, Helvetica, sans-serif !important;\n}\n.freestar_report_btn {\n    margin: 20px;\n    outline: 0;\n}\n.freestar_report_btn:focus {\n    outline: 0;\n}\n#freestar_report_div {\n    font-family: Arial, Helvetica, sans-serif !important;\n}\n#freestar_report_div {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n.freestar_report_sub_header {\n    color: #00c389 !important;\n    font-size: 16px !important;\n    font-weight: 600 !important;\n}\n.freestar_report_sub_header {\n    margin: 23px;\n}\n.fs_report_container span {\n    margin-left: 10px;\n}\n.fs_checkbox {\n    cursor: pointer;\n    position: relative;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: start;\n        -ms-flex-pack: start;\n            justify-content: flex-start;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.fs_checkbox > span {\n    color: #34495e;\n    margin-left: 5px;\n    /*padding: 0.5rem 0.25rem;\n\t*/\n}\n.fs_checkbox > input {\n    height: 15px;\n    width: 15px;\n    -webkit-appearance: none;\n    -o-appearance: none;\n    -moz-appearance: none;\n         appearance: none;\n    border: 1px solid #34495e;\n    border-radius: 4px;\n    outline: none;\n    -webkit-transition-duration: 0.3s;\n            transition-duration: 0.3s;\n    background-color: #41b883;\n    cursor: pointer;\n    margin-bottom: 3px;\n}\n.fs_checkbox > input:checked {\n    border: 1px solid #41b883;\n    background-color: #34495e;\n}\n.fs_checkbox > input:checked + span::before {\n    display: block;\n    text-align: center;\n    color: #41b883;\n    /*position: absolute;\n\t*/\n    /*left: 0.7rem;\n\t*/\n    /*top: 0.2rem;\n\t*/\n}\n.fs_checkbox > input:active {\n    border: 2px solid #34495e;\n}\n.fs-new-close-container {\n    top: calc(50% - 250px);\n    right: calc(50% - 250px);\n    position: absolute;\n}\n@media screen and (max-width: 820px) {\n    .fs-new-close-container {\n        top: 15%;\n        right: calc(50% - 131px);\n    }\n}\n.fs-new-close {\n    margin-left: 30%;\n    margin-bottom: 5%;\n    cursor: pointer;\n}\n.fs-new-close:hover {\n    opacity: 1;\n}\n.fs-new-close:before,\n.fs-new-close:after {\n    position: absolute;\n    content: ' ';\n    height: 33px;\n    width: 2px;\n    background-color: rgb(255, 255, 255);\n}\n.fs-new-close:before {\n    -webkit-transform: rotate(45deg);\n            transform: rotate(45deg);\n}\n.fs-new-close:after {\n    -webkit-transform: rotate(-45deg);\n            transform: rotate(-45deg);\n}\n.__fs-ancillary {\n    --childHeight: 16px;\n    width: 100%;\n    width: var(--childWidth, 100%);\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: end;\n        -ms-flex-pack: end;\n            justify-content: flex-end;\n    margin: 0 auto;\n    height: 16px;\n    height: var(--childHeight);\n    visibility: hidden;\n}\n.fs-sticky-wrapper .__fs-ancillary {\n    display: none !important;\n}\n.__fs-report-this-ad {\n    line-height: 0px;\n}\n.__fs-branding {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -webkit-box-flex: 1;\n        -ms-flex-positive: 1;\n            flex-grow: 1;\n}\n.__fs-branding > a {\n    width: 100%;\n    max-width: var(--childWidth);\n    height: var(--childHeight);\n    display: block;\n}\n.__fs-branding > a > img {\n    height: calc(var(--childHeight) - 2px) !important;\n    width: auto !important;\n    width: initial !important;\n}\n.__fs-branding > a > img {\n    max-height: none;\n    max-height: initial;\n    background-color: transparent;\n    background-color: initial;\n    background-image: none;\n    background-image: initial;\n    border: medium none currentcolor;\n    border: initial;\n    background-repeat: repeat;\n    background-repeat: initial;\n    background-position: 0 0;\n    background-position: initial;\n    margin: 5px 0;\n    display: block;\n    float: left;\n    -webkit-box-shadow: none;\n            box-shadow: none;\n}\n.fs-sticky-wrapper .__fs-branding {\n    position: absolute;\n    top: 0;\n    border: none;\n    border-radius: 50%;\n    width: 30px;\n    height: 30px;\n}\n.fs-sticky-wrapper .__fs-branding {\n    position: absolute;\n    top: 50%;\n    right: 6px;\n    border: none;\n    border-radius: 50%;\n}\n.fs-mobile-tall {\n    top: 30% !important;\n}\n.fs-sticky-wrapper .__fs-branding > a {\n    width: 100%;\n    height: 100%;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.fs-sticky-wrapper .__fs-branding > a > img {\n    width: 100% !important;\n    height: 100% !important;\n}\n.fs-sticky-wrapper .__fs-branding > a > img {\n    opacity: 1;\n}\n@media screen and (max-width: 820px) {\n    .fs-sticky-wrapper .__fs-branding > a > img {\n        width: 70% !important;\n        height: 70% !important;\n    }\n    .fs-sticky-wrapper .__fs-branding > a > img {\n        opacity: 1;\n    }\n}\n.fs-sticky-wrapper .__fs-branding {\n    background-color: rgba(247, 247, 247, 0.75);\n    background-size: 58%;\n}\n.fs-sticky-wrapper .__fs-branding > a > img {\n    width: 90%;\n    height: 90%;\n}\n.fs-sticky-wrapper {\n    background-color: #f6f3f3;\n    padding-right: 38px;\n    display: inline-block;\n    width: -moz-fit-content;\n    width: -webkit-fit-content;\n    width: fit-content;\n    visibility: inherit;\n    z-index: inherit;\n}\n.fs-interstitial-overlay {\n    background: rgba(0, 0, 0, 0.6);\n    width: 100%;\n    height: 100%;\n    z-index: 2147483647;\n    top: 0;\n    left: 0;\n    position: fixed;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    visibility: hidden;\n}\n.fs-interstitial-container {\n    width: 1000px;\n    height: 650px;\n    background: rgb(255, 255, 255);\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    -webkit-box-align: start;\n        -ms-flex-align: start;\n            align-items: flex-start;\n}\n.fs-interstitial-ad-space {\n    width: 970px;\n    height: 250px;\n    -ms-flex-item-align: center;\n        align-self: center;\n    margin-bottom: 10px;\n    margin-top: 10px;\n    min-height: 250px;\n    overflow: hidden;\n}\n.fs-interstitial-content {\n    width: 100%;\n    height: 250px;\n    -ms-flex-item-align: center;\n        align-self: center;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    -webkit-box-align: start;\n        -ms-flex-align: start;\n            align-items: flex-start;\n}\n.fs-interstitial-message-container {\n    width: 100%;\n    height: 100px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    -webkit-box-align: start;\n        -ms-flex-align: start;\n            align-items: flex-start;\n    -ms-flex-item-align: center;\n        align-self: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.fs-interstitial-message {\n    color: #17181f;\n    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n    font-size: 40px;\n    -ms-flex-item-align: center;\n        align-self: center;\n    padding: 10px;\n}\n.fs-interstitial-close-container {\n    width: 1000px;\n    height: 50px;\n    position: relative;\n}\n.fs-interstitial-branding {\n    background-image: url('https://a.pub.network/core/imgs/fslogo-green.svg');\n    background-position: 100%;\n    background-repeat: no-repeat;\n    height: 30px;\n    -webkit-transition: all 0.3s ease-in-out;\n    transition: all 0.3s ease-in-out;\n    width: 30px;\n    min-width: 0;\n    min-width: initial;\n    margin-left: 56%;\n}\n.fs-interstitial-container .zegrow {\n    display: -webkit-box !important;\n    display: -ms-flexbox !important;\n    display: flex !important;\n    -webkit-box-align: center !important;\n        -ms-flex-align: center !important;\n            align-items: center !important;\n    -webkit-box-pack: center !important;\n        -ms-flex-pack: center !important;\n            justify-content: center !important;\n}\n.fs-interstitial-container .zergentity {\n    width: 237px !important;\n    margin: 0px 8px 0px 5px !important;\n}\n.fs-interstitial-container .widget-loaded {\n    -ms-flex-item-align: center !important;\n        align-self: center !important;\n    width: 100% !important;\n    background: rgba(0, 0, 0, 0) !important;\n}\n.fs_interstitial_branding_link img {\n    width: 200px;\n    padding-bottom: 16px;\n}\n.fs_interstitial_branding_link {\n    -ms-flex-item-align: center !important;\n        align-self: center !important;\n}\n#freestar-video-parent,\n#freestar-video-child {\n    max-width: 100vw !important;\n}\n#freestar-video-parent,\n#freestar-video-child {\n    width: 100%;\n    overflow: hidden;\n}\n.freestar_report_comments {\n    font-family: Arial, Helvetica, sans-serif !important;\n}\n.freestar_report_comments {\n    padding-top: 10px;\n    margin-top: 10px;\n}\n#freestar_report_comment_box_wrapper {\n    width: 100%;\n    height: 90px;\n}\n.sticky-reportThisAd button {\n    visibility: hidden;\n    position: relative;\n}\n.sticky-reportThisAd button:after {\n    content: '';\n    background-image: url('https://a.pub.network/core/imgs/freestar_report_ad_icon.png');\n    background-size: 18px;\n    visibility: visible;\n    position: absolute;\n    moz-appearance: none;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n         appearance: none;\n    background-color: #ffffff;\n    background-position: 50%;\n    background-repeat: no-repeat;\n    border: none;\n    border-radius: 50%;\n    -webkit-box-shadow:\n        0 0 0 1px #888888,\n        0 0 0 6px rgba(247, 247, 247, 0.75);\n            box-shadow:\n        0 0 0 1px #888888,\n        0 0 0 6px rgba(247, 247, 247, 0.75);\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    cursor: pointer;\n    display: block;\n    height: 20px;\n    outline: none;\n    padding: 0px;\n    position: absolute;\n    right: -25px;\n    top: 0px;\n    width: 20px;\n    min-width: 0;\n    min-width: initial;\n}\n.sticky-reportThisAd {\n    content: '\\127987';\n    cursor: pointer;\n    background: none;\n    margin-left: auto;\n    margin-right: auto;\n    display: block;\n    border: none;\n    position: absolute;\n    right: -3px;\n    top: 50%;\n    z-index: 2147483647;\n}\n.pushdown-reportThisAd button {\n    visibility: hidden;\n    position: relative;\n}\n.pushdown-reportThisAd button:after {\n    content: '';\n    background-image: url('https://a.pub.network/core/imgs/freestar_report_ad_icon.png');\n    background-size: 18px;\n    visibility: visible;\n    position: absolute;\n    moz-appearance: none;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n         appearance: none;\n    background-color: #ffffff;\n    background-position: 50%;\n    background-repeat: no-repeat;\n    border: none;\n    border-radius: 50%;\n    -webkit-box-shadow:\n        0 0 0 1px #888888,\n        0 0 0 6px rgba(247, 247, 247, 0.75);\n            box-shadow:\n        0 0 0 1px #888888,\n        0 0 0 6px rgba(247, 247, 247, 0.75);\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    cursor: pointer;\n    display: block;\n    height: 20px;\n    outline: none;\n    padding: 0px;\n    position: absolute;\n    right: -37.5px;\n    top: 35px;\n    width: 20px;\n    min-width: 0;\n    min-width: initial;\n}\n.pushdown-reportThisAd {\n    content: '\\127987';\n    cursor: pointer;\n    background: none;\n    margin-left: auto;\n    margin-right: auto;\n    display: block;\n    border: none;\n    position: absolute;\n    right: 50px;\n    top: 5px;\n    z-index: 2147483647;\n}\n.center-ad {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n._wrapper .orp-player-wrapper {\n    width: 100% !important;\n    height: 100% !important;\n}\n");nu(".fs-flying-carpet {\n    background: -webkit-gradient(linear, left top, left bottom, color-stop(10%, #00c389), to(black));\n    background: linear-gradient(to bottom, #00c389 10%, black 100%);\n    position: relative;\n    -webkit-box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    height: 175vh;\n    margin: 0 -1.1rem 0.5rem;\n}\n\n.fs-flying-carpet-ad-container {\n    margin: 0 auto;\n    position: sticky;\n    top: 0;\n    -ms-flex-item-align: center;\n        align-self: center;\n    padding-top: 10vh;\n    padding-bottom: 10vh;\n    bottom: 10vh;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n\n.fs-powered-by {\n    font-size: 18px;\n    color: #00c389;\n    position: absolute;\n    bottom: 0;\n    background-color: black;\n    width: 100%;\n    height: 6vh;\n    text-align: center;\n    padding: 10px 0;\n    -webkit-box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);\n            box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n\n.fs-flying-carpet-header {\n    font-family: Arial, Helvetica, sans-serif !important;\n}\n\n.fs-flying-carpet-header {\n    font-size: 11px;\n    color: white;\n    position: absolute;\n    top: 0;\n    background-color: #34495e;\n    width: 100%;\n    text-align: center;\n    padding: 5px 0;\n    -webkit-box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);\n            box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);\n}\n\n/* fc v2 */\n.fs-flying-carpet-v2 {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n\n.fs-flying-carpet-v2-ad-container {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    width: 300px;\n    height: 65vh;\n    margin-left: auto;\n    margin-right: auto;\n    background-color: #fff;\n    overflow-y: scroll;\n    overflow-x: hidden;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n}\n\n.fs-flying-carpet-v2-text-border {\n    width: 100%;\n    background-color: #333;\n    color: #fff;\n    text-align: center;\n    font-family: Arial, sans-serif;\n    font-size: 0.8em;\n    text-transform: uppercase;\n    padding: 5px 0;\n    letter-spacing: 1px;\n}\n");class iu{constructor(){this.modifications={emxdigital:{modification:"emx_digital"},synacor:{modification:"synacormedia"}}}slugModification(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.modifications[e]?this.modifications[e].modification:e}reassignNetworkSlug(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>(e.slug=this.slugModification(e.slug),e)))}init(){window.freestar.fsdata.networks=this.reassignNetworkSlug(window.freestar.fsdata.networks),window.freestar.fsdata.placements=window.freestar.fsdata.placements.map((e=>(e.networks=this.reassignNetworkSlug(e.networks),e)))}}var su={};Object.defineProperty(su,"__esModule",{value:!0});var ru=su.AdblockDetector=void 0;ru=su.AdblockDetector=class{constructor(){this.bannerIds=["AdHeader","AdContainer","AD_Top","homead","ad-lead"],this.init()}init(){if(!this.isBrowser())return void console.error("Detection on server side is not supported. Please use library only on client side.");const e=document.createElement("div");e.innerHTML=this.generatesBannersString(),document.body.append(e)}detect(){return!!this.isBrowser()&&!this.bannerIds.every((e=>this.checkVisibility(e)))}generatesBannersString(){return this.bannerIds.map((e=>`<div id="${e}"></div>`)).join("")}checkVisibility(e){const t=document.querySelector(`#${e}`);return t?t.offsetParent:null}isBrowser(){return"undefined"!=typeof window}};const au={WAITING:"waiting",COMPLETE:"complete",NOT_ALLOWED:"not_allowed"},ou={SAFARI:"safari",CHROME:"chrome",FIREFOX:"firefox",EDGE:"edge"},du={ACTIVE:"ppid_active",INACTIVE:"ppid_inactive"};class lu{constructor(e){let{siteId:t=-1,allowedCountries:n=[],allowedBrowsers:i=[],restrictedBrowsers:s=[]}=e;this.siteId=t,this.allowedCountries=n,this.allowedBrowsers=i,this.restrictedBrowsers=s}}const cu={allowedCountries:["US","AU","CA"],allowedBrowsers:[ou.FIREFOX,ou.SAFARI]},uu=D.map((e=>new lu({...cu,siteId:e})));class fu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.BrowserEnum=ou,this.StateEnum=au,this.GPTValues=du,this.activeKey="gppidtv_group",this.sessionObjKey="gppidtv",this.domainConfigs=uu,this.domainConfig=new lu({});const s=this.getSessionObj();s?(this.publisherID=s.publisherID,this.state=s.state,this.iso=s.iso,this.userAgent=s.userAgent,this.siteId=s.siteId,this.userAgent=s.userAgent,this.state===this.StateEnum.COMPLETE&&this.state!==this.StateEnum.NOT_ALLOWED&&this.setGoogleTagPPID()):(this.publisherID="",this.state=this.StateEnum.WAITING,this.iso=e,this.userAgent=t.toLowerCase(),this.siteId=n,this.updateState(),this.state===this.StateEnum.COMPLETE&&this.state!==this.StateEnum.NOT_ALLOWED&&(this.setPublisherID(i),this.setGroupValue(),this.setGoogleTagPPID(),this.setSessionObj()))}setPublisherID(e){e&&this.verifyId(e)&&(this.publisherID=e),this.updateState()}updateState(){const e=this.findConfigBySiteId();e&&(this.domainConfig=e),this.state=e&&this.isBrowserAllowed()&&this.isCountryAllowed()?this.StateEnum.COMPLETE:this.StateEnum.NOT_ALLOWED}findConfigBySiteId(){return this.domainConfigs.find((e=>this.siteId===e.siteId))}isBrowserAllowed(){const e=fu.getBrowserType(this.userAgent),t=!!this.domainConfig.restrictedBrowsers.length,n=!!this.domainConfig.allowedBrowsers.length;return!t&&!n||(t?!this.domainConfig.restrictedBrowsers.includes(e):this.domainConfig.allowedBrowsers.includes(e))}static getBrowserType(e){return[ou.EDGE,ou.CHROME,ou.SAFARI,ou.FIREFOX].find((t=>e.toLowerCase().includes(t)))||""}verifyId(e){return/^([0-9a-zA-Z]{32,150})$|^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/.test(e)}isCountryAllowed(){return this.domainConfig.allowedCountries.includes(this.iso)}updateGoogleSlotTargeting(e){this.allowFSPPID()&&e&&this.getGroupValue()&&Un({slot:e,key:"tg",value:this.getGroupValue()})}setGroupValue(){const e=Math.random()>=.5?this.GPTValues.ACTIVE:this.GPTValues.INACTIVE;sessionStorage.setItem(this.activeKey,e)}getGroupValue(){return sessionStorage.getItem(this.activeKey)}allowFSPPID(){return this.state===this.StateEnum.COMPLETE}setGoogleTagPPID(){googletag.cmd.push((()=>{googletag.pubads().setPublisherProvidedId(this.publisherID)}))}setSessionObj(){sessionStorage.setItem(this.sessionObjKey,JSON.stringify(this))}getSessionObj(){const e=sessionStorage.getItem(this.sessionObjKey);return e?JSON.parse(e):null}}function hu(e){const t=function(e){try{if(e&&e.partners&&e.partners.iiq&&e.partners.iiq.intentIqData){const{eids:t=[]}=e.partners.iiq.intentIqData,n=t.find((e=>"intentiq.com"===e.source));if(n&&n.uids){const e=n.uids.find((e=>"ppuid"===e.ext.stype));if(e)return e.id}}}catch(e){console.error("Error occurred while finding PPID by source:",e)}return null}(e);if(t)try{googletag.pubads().setPublisherProvidedId(t)}catch(e){console.error("Error occurred while setting Publisher Provided ID:",e)}}function pu(){return!freestar.deviceInfo?.browser?.name?.toLowerCase()?.includes("chrome")}function mu(e,t){"US"===e&&googletag.cmd.push((()=>{googletag.pubads().setTargeting(wl,gu[t])}))}const gu={IIQ_FALSE_FSUID_TRUE:"51861e4a4207600fb42febc4db93c0a1",IIQ_FALSE_FSUID_FALSE:"03b03a50ffe1284174616c225a2cde1d",IIQ_TRUE_IIQID_TRUE_Mobile_Safari:"1a9bdd3c7b1deea91861cbe0c3d56c69",IIQ_TRUE_IIQID_TRUE_Mobile_Chrome:"d90e95759df4727883c5056e2cad59b8",IIQ_TRUE_IIQID_TRUE_Mobile_Other:"7e73b891c362bd867396b5c62d9464ca",IIQ_TRUE_IIQID_TRUE_Desktop_Safari:"0e6fd97233392eaa38b850a2e320440a",IIQ_TRUE_IIQID_TRUE_Desktop_Chrome:"97980190ab5bcba7d244ee25fa226624",IIQ_TRUE_IIQID_TRUE_Desktop_Other:"b7231758161d207f16c3bc7d715dac24",IIQ_TRUE_FSUID_TRUE_Mobile_Safari:"b5b9116f2349c6390ab53f77c3fe12e6",IIQ_TRUE_FSUID_TRUE_Mobile_Chrome:"ea8dd591c8e834c7b3e63c09771843f9",IIQ_TRUE_FSUID_TRUE_Mobile_Other:"53d3b131dadd001f2d1003c1679655ec",IIQ_TRUE_FSUID_TRUE_Desktop_Safari:"21f64593bab7ef0cd53a148dd2478e44",IIQ_TRUE_FSUID_TRUE_Desktop_Chrome:"fdb500daf1dc11ef085938ddb39ba30e",IIQ_TRUE_FSUID_TRUE_Desktop_Other:"3f119cca44b8ada1d1d8cb166997c93f",IIQ_TRUE_NOID_TRUE_Mobile_Safari:"d2e47d0f87720084bbec2ffe9ed6e7fa",IIQ_TRUE_NOID_TRUE_Mobile_Chrome:"48c513f182493212f2d6484bac04273b",IIQ_TRUE_NOID_TRUE_Mobile_Other:"f1621f8187c9d919c38c644bde05a35e",IIQ_TRUE_NOID_TRUE_Desktop_Safari:"ea2803aef0f8210911a630f5be658525",IIQ_TRUE_NOID_TRUE_Desktop_Chrome:"b7d8bc0ebc4d63208b70a93b93d2f36e",IIQ_TRUE_NOID_TRUE_Desktop_Other:"c08a71d27428861829030b2a2ed124b6"};class bu{constructor(e,t,n){this.identityProviders=e,this.locData=t,this.adblockDetector=new n,this.iiqAllowedBrowser=pu}isAdblockDetected(){return this.adblockDetector.detect()}isEligible(){let e=!0;const t=this.identityProviders.find((e=>"intentIqId"===e.slug));return this.isAdblockDetected()?e=!1:t&&cl(t)&&this.iiqAllowedBrowser()||(e=!1),e}}function yu(e){fsprebid.que.push((function(){if(new bu(window.freestar.fsdata.identityProviders,window.freestar.locData,ru).isEligible()){const t=navigator.userAgent||window.navigator.userAgent;let n=ze({key:vl,type:$e.string.type});if(oc.isProviderEnabled(oc.providersRules,yl)){n||(n=function(e,t){const n=e===He?"Mobile":"Desktop";let i=fu.getBrowserType(t);[ou.SAFARI,ou.CHROME].includes(i)||(i="Other"),i=i.charAt(0).toUpperCase()+i.slice(1);let s="";const r=Math.random();return s="IIQ_TRUE_NOID_TRUE",r<.33&&(s="IIQ_TRUE_IIQID_TRUE"),r>.66&&(s="IIQ_TRUE_FSUID_TRUE"),s=`${s}_${n}_${i}`,qe({key:vl,value:s,type:$e.string}),s}(freestar.deviceInfo.device.type,t)),n&&n.startsWith("IIQ_TRUE_FSUID_TRUE")&&(freestar.gptppid=new fu(freestar.locData.iso,t,window.freestar.fsdata.siteId,freestar.msg.fpc)),performance.mark("iiq-initialization-start");const i=1434517136;freestar.partners||(freestar.partners={}),window.load_script($l,(()=>{freestar.log({title:"IntentIQ"},`Version ${$l}: Script loaded...`),freestar.partners.iiq=new IntentIqObject({partner:i,pbjs:fsprebid,timeoutInMillis:500,manualWinReportEnabled:!0,ABTestingConfigurationSource:"percentage",abPercentage:95,domainName:location.host,ppuidSourceBlackList:"adserver.org",vrBrowserBlackList:["chrome"],callback:()=>{n.startsWith("IIQ_TRUE_IIQID_TRUE")&&hu(window.freestar),e()}}),fsprebid.onEvent(jt,(e=>{freestar.log({title:"IntentIQ"},"reporting external win...");const{adUnitCode:t,auctionId:n,bidderCode:i,cpm:s,currency:r,originalCpm:a=null,originalCurrency:o=null,status:d}=e,l={biddingPlatformId:1,partnerAuctionId:n,bidderCode:nt(i),prebidAuctionId:n,cpm:s,currency:r,originalCpm:a,originalCurrency:o,status:d,placementId:t};freestar.partners.iiq.reportExternalWin(l)})),mu(freestar.locData.iso,n),performance.mark("iiq-initialization-end")}))}else n||(n=function(){let e="IIQ_FALSE_FSUID_FALSE";return Math.random()<.5&&(e="IIQ_FALSE_FSUID_TRUE"),qe({key:vl,value:e,type:$e.string}),e}()),mu(freestar.locData.iso,n),n.includes("IIQ_FALSE_FSUID_TRUE")&&(freestar.gptppid=new fu(freestar.locData.iso,t,window.freestar.fsdata.siteId,freestar.msg.fpc)),e()}else e();!function(){const e=pl[yl].itfPosition||-1,t=oc.targeting.length>0&&oc.targeting[e];if(["Y","N"].includes(t)){ac("fs_iiq_enabled","Y"===t?"true":"false")}}(),fsprebid.setTargetingForGPTAsync(),Zr()}))}class vu{initiateWatcher(e){e.que.push((()=>{e.onEvent("adRenderFailed",this.handleAdRenderFailed.bind(this))}))}handleAdRenderFailed(e){let{message:t,adId:n,reason:i,bid:s}=e;freestar.log({title:"Pubfig",styles:"background: red; color: white; border-radius: 3px; padding: 3px"},`Prebid adRenderFailed. Reason: ${i} - ${t} - ${s.adUnitCode}`),a.instance.resolve(Ht.ANALYTICS).then((e=>{e.track(new nn({eventName:"AD_RENDER_FAILED",eventType:t,data:{adId:n,reason:i,bid:s}}))}))}}let wu=null;const Iu=Object.freeze({NO_BRANDING:"NO_BRANDING",GREEN:"GREEN",GRAYSCALE:"GRAYSCALE"}),_u={[Iu.GREEN]:`${b}/imgs/fslogo-green.svg`,[Iu.GRAYSCALE]:`${b}/imgs/fslogo-grayscale.svg`},Su=`Invalid branding value. Expected one of: ${Object.values(Iu).join(", ")}`;function Eu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=document.createElement(e);return t.forEach((e=>s.classList.add(e))),Object.assign(s.style,n),Object.entries(i).forEach((e=>{let[t,n]=e;return s.setAttribute(t,n)})),s}class Au{constructor(e){let{background:t="linear-gradient(to bottom, #00c389 10%, black 100%)",height:n="175vh",branding:i="GREEN",showPoweredBy:s=!0,slotId:r,styleVersion:a="new"}=e;if(!r)throw new Error("Missing mandatory parameter: slotId");this.background=t,this.height=n,this.branding=i,this.showPoweredBy=s,this.slotId=r,this.styleVersion=a}createLogo(){return Eu("img",[],{},{src:_u[this.branding]||_u[Iu.GREEN],alt:"fs-logo",width:30})}generateHTML(){return"new"===this.styleVersion?this.generateStyleV2HTML():this.generateOriginalStyleHTML()}generateOriginalStyleHTML(){if(!Object.values(Iu).includes(this.branding))throw new Error(Su);const e=Eu("div",["fs-flying-carpet"],{background:this.background,height:this.height}),t=Eu("div",["fs-flying-carpet-ad-container"]);if(e.appendChild(t),this.showPoweredBy&&this.branding!==Iu.NO_BRANDING){const t=Eu("div",["fs-powered-by"]);t.appendChild(this.createLogo()),e.appendChild(t)}const n=Eu("div",["fs-flying-carpet-header"]);n.textContent="Advertisement",e.appendChild(n);const i=Eu("div",[],{},{id:this.slotId});return t.appendChild(i),e}generateStyleV2HTML(){const e=Eu("div",["fs-flying-carpet-v2"]),t=Eu("div",["fs-flying-carpet-v2-text-border"]);t.textContent="ADVERTISEMENT",e.appendChild(t);const n=Eu("div",["fs-flying-carpet-v2-ad-container"]);e.appendChild(n);const i=Eu("div",[],{},{id:this.slotId});n.appendChild(i);const s=Eu("div",["fs-flying-carpet-v2-text-border"]);return s.textContent="SCROLL TO CONTINUE READING",e.appendChild(s),e}}const ku={level:20,title:"UserScrollTracker"};class xu{constructor(){if(xu.instance)return xu.instance;this.interactionsMsgCount=0,this.interactionsLastPercentile=0,this.interactionsMaxPercentile=0,this.scrollHeight=this._getScrollHeight(),this._initScrollListener(),this._initMutationObserver(),xu.instance=this,freestar.log(ku,"initialized")}_initScrollListener(){window.addEventListener("scroll",this._handleScrollData)}_handleScrollData=Z((()=>{this.scrollHeight=this._getScrollHeight();const e=window.scrollY/(this.scrollHeight-window.innerHeight)*100;this.interactionsLastPercentile=e,this.interactionsMaxPercentile=Math.max(this.interactionsMaxPercentile,e),this.interactionsMsgCount+=1,freestar.log(ku,`Updated - Last: ${this.interactionsLastPercentile.toFixed(2)}%, Max: ${this.interactionsMaxPercentile.toFixed(2)}%, Height: ${this.scrollHeight}px, MsgCount: ${this.interactionsMsgCount}`)}),250);_getScrollHeight(){return document.documentElement.scrollHeight}_initMutationObserver(){new MutationObserver((()=>{this.scrollHeight=this._getScrollHeight()})).observe(document.body,{childList:!0,subtree:!0})}getLastPercentile(){return this.interactionsLastPercentile}getMaxPercentile(){return this.interactionsMaxPercentile}getScrollHeight(){return this.scrollHeight}getMsgCount(){return this.interactionsMsgCount}}class Tu{constructor(e){if(Tu.instance)return Tu.instance;this._onTerminateCallback=e,this._handleTerminationCalled=!1,this._throttlePeriod=2e3,this._initTerminationListeners(),Tu.instance=this}_initTerminationListeners(){window.addEventListener("beforeunload",this._handleTermination),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&this._handleTermination()}))}_handleTermination=()=>{this._handleTerminationCalled||(this._handleTerminationCalled=!0,this._onTerminateCallback&&this._onTerminateCallback(),setTimeout((()=>{this._handleTerminationCalled=!1}),this._throttlePeriod))}}const Cu={flyingCarpet:"FLYING_CARPET"};class Ru{constructor(e){let{percentilePlacement:t,highImpactType:n,slotId:i}=e;this.percentilePlacement=t,this.highImpactType=n,this.slotId=i,this.id=Yr(),this.sendInit(),this.scrollTracker=new xu,"flyingCarpet"===this.highImpactType&&this.initializePageviewTerminationService()}sendInit(){a.instance.resolve(Ht.ANALYTICS).then((e=>{var t;e.track(new ds({sessionId:freestar.msg.sessionId,pageviewId:freestar.msg.pageId,highImpactUnitSessionId:this.id,percentilePlacement:this.percentilePlacement,sessionDepth:freestar.msg.pageviewCount,highImpactType:(t=this.highImpactType,Cu[t]||Object.values(Cu).find((e=>e===t))||"UNKNOWN")}))}))}sendRequest(e){let{auctionId:t,refreshCount:n}=e;a.instance.resolve(Ht.ANALYTICS).then((e=>{e.track(new ls({sessionId:freestar.msg.sessionId,pageviewId:freestar.msg.pageId,auctionId:t,highImpactUnitSessionId:this.id,refreshCount:n}))}))}createInteractionsMessage(){const e=new cs({sessionId:freestar.msg.sessionId,pageviewId:freestar.msg.pageId,highImpactUnitSessionId:this.id,interactionsMsgCount:this.scrollTracker.getMsgCount(),interactionsLastPercentile:this.scrollTracker.getLastPercentile(),interactionsMaxPercentile:this.scrollTracker.getMaxPercentile(),scrollHeight:this.scrollTracker.getScrollHeight()});e.setTopic(Xt),a.instance.resolve(Ht.ANALYTICS).then((t=>{t.track(e)}))}initializePageviewTerminationService(){this.pageviewTerminationService=new Tu(this.createInteractionsMessage.bind(this))}}const Ou=vt.getInstanceFn({ClassConstructor:class{constructor(){this.instances={},this.setupRequestMessageListener()}sendRequestMessageAuction=e=>{e.getAdUnits().forEach((t=>{this.sendRequestMessage({slotId:t.getSlotId(),auctionId:e.fsAuctionId})}))};setupRequestMessageListener(){a.instance.resolve(Ht.AUCTION_MANAGER).then((e=>{e.addEventListener("auctionInit",this.sendRequestMessageAuction)}))}newHighImpactTracking(e){let{percentilePlacement:t,highImpactType:n,slotId:i}=e;if(!this.instances[i])return this.instances[i]=new Ru({percentilePlacement:t,highImpactType:n,slotId:i});freestar.log({level:1,title:"HighImpactTrackingManager"},`Already tracking a high impact ad in slot "${i}"!`)}sendRequestMessage(e){let{slotId:t,auctionId:n}=e;const i=this.instances[t];if(i){const e=Pi(t)||0;i.sendRequest({auctionId:n,refreshCount:e})}}},instanceName:"HighImpactTrackingManager"}),Pu={level:20,title:"IAI"};class Nu{constructor(e){let{name:t,placement:n,intelligentAdInsertConfig:i,parentElement:s,debugIndex:r,lazy:a=!1}=e;this.name=t,this.placement=n,this.config=i,this.parentElement=s,this.debugIndex=r??0,this.lazy=a,this.childElements=[],this.resizeObserver=null,this.parentSize=null,this.mutationObserver=null,this.nextChildIndex=0,this.ads=[],this.adsInsertedCount=0,this.blocklistSelector=(this.config.blocklist||[]).join(", "),this.debugTimeout=null,this.insertTimeout=null,this.intersectionObserver=null,this.slotsAwaitingIntersection={},this.addedFlyingCarpet=!1,this.highImpactTracking=null,this.highImpactPlacementConfig=null,a||this.init()}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];freestar.log(Pu,this.debugIndex,...t)}init(){this.childElements=this.getValidChildElements(),this.monitorParentElement(),this.checkForInsertOpportunities(),this.debug()}isValidChildElement(e){return e instanceof Element&&!e.matches(".iai-label")&&!e.matches(".fs-iai")&&(!this.config.childElement||e.matches(this.config.childElement))}getValidChildElements(){const e=[];for(const t of this.parentElement.children)this.isValidChildElement(t)&&e.push(t);return e}monitorParentElement(){this.monitorParentMutation()}monitorParentResize(){if(!this.resizeObserver){const e=Z((e=>this.onResize(e)),1e3);this.resizeObserver=new ResizeObserver((t=>{for(const n of t)e(n)})),this.resizeObserver.observe(this.parentElement,{box:"border-box"})}}biToHw(e,t){const n=e.style.writingMode??getComputedStyle(e).writingMode;return!n||n.toLowerCase().startsWith("horizontal")?{height:t.blockSize,width:t.inlineSize}:{height:t.inlineSize,width:t.blockSize}}onResize(e){const{target:t,borderBoxSize:n,contentBoxSize:i,devicePixelContentBoxSize:s}=e,r={borderBoxSize:this.biToHw(t,n[0]),contentBoxSize:this.biToHw(t,i[0]),devicePixelContentBoxSize:this.biToHw(t,s[0])};this.parentSize=r}onMutation(e){e.addedNodes.length&&e.addedNodes.forEach((e=>{this.isValidChildElement(e)&&this.childElements.push(e)}))}monitorParentMutation(){this.mutationObserver||(this.mutationObserver=new MutationObserver((e=>{for(const t of e)this.onMutation(t);this.insertAds(),this.debug()})),this.mutationObserver.observe(this.parentElement,{childList:!0}))}getNumberOfAdsWithinViewport(e){const t=e.getBoundingClientRect().bottom,{maxHeight:n}=this.getSizeMaxes(),i=t+n,s=.95*(window.innerHeight||document.documentElement.clientHeight);let r=0;for(let e=this.ads.length-1;e>=0;e--){if(!(i-this.ads[e].getBoundingClientRect().bottom<s))break;r+=1}return r}isBlocked(e){return!!this.blocklistSelector&&(e.matches(this.blocklistSelector)||e.nextElementSibling?.matches(this.blocklistSelector))}canInsert(e){const t=this.childElements[e];let n=!1,i=null;const{maxAdsInView:s,everyNElements:r,maxInserts:a}=this.config;return a&&this.adsInsertedCount>=a?i="maxInserts":(e+1)%r!=0?i="index":null==t.nextElementSibling?i="lastChild":t.nextElementSibling.matches(".fs-iai")?i="adAlreadyInserted":this.isBlocked(t)?i="blocklist":s&&this.getNumberOfAdsWithinViewport(t)>s-1?i="maxAdsInView":n=!0,{result:n,reason:i}}insertAds(){clearTimeout(this.insertTimeout),this.insertTimeout=setTimeout((()=>this.checkForInsertOpportunities()),1e3)}checkForInsertOpportunities(){for(;this.nextChildIndex<this.childElements.length;){let{reason:e,result:t}=this.canInsert(this.nextChildIndex);if(t)this.info("INSERTING AD @",this.nextChildIndex),this.addSlot(this.nextChildIndex);else{if(this.info("NO INSERT @",this.nextChildIndex,"due to",e),"maxInserts"===e)return this.info("maxInserts reached, disconnecting MutationObserver..."),void this.mutationObserver.disconnect();if("lastChild"===e)return}this.nextChildIndex+=1}}getPercentageHeight(e,t){const n=e.getBoundingClientRect(),i=t.getBoundingClientRect();return(n.top-i.top+n.height)/i.height}createFlyingCarpetSlot(e,t){const n=this.childElements[e],i=`${this.name}_${this.debugIndex}_${this.adsInsertedCount}_fc`;t.branding="NONE";const s=new Au({background:t.background,height:t.height,branding:t.branding,showPoweredBy:t.showPoweredBy,slotId:i}),r=s.generateHTML();this.ads.push(r),this.parentElement.insertBefore(r,n.nextSibling);const a={placementName:this.getFlyingCarpetPlacementName(),slotId:s.slotId,skipSAU:!0};return this.makeFlyingCarpetPlacement(t),this.registerSlot({element:r,newAdSlotConfig:a}),this.adsInsertedCount+=1,{slotId:i}}static containsSize(e,t){return e.some((e=>e[0]===t[0]&&e[1]===t[1]))}static flyingCarpetAdditionalSizes=[[300,250],[300,600]];makeFlyingCarpetPlacement(e){const t=this.getFlyingCarpetPlacementName();if(freestar.fsdata.placements.some((e=>e.name===t)))return;const n=JSON.parse(JSON.stringify(this.placement));n.name=t,n.freestarBrandingDisabled="NONE"!==e.branding;for(const e of n.sizeMappings)for(const t of Nu.flyingCarpetAdditionalSizes)Nu.containsSize(e.size,t)||e.size.push(t);freestar.fsdata.placements.push(n),Br()}getFlyingCarpetPlacementName(){return`${this.name}_flying_carpet_sizes_placement`}buildAndInsertStandardSlot(e){const t=this.childElements[e],{element:n,newAdSlotConfig:i}=this.buildSlot();this.ads.push(n),this.parentElement.insertBefore(n,t.nextSibling),this.registerSlot({element:n,newAdSlotConfig:i})}getHighImpactPlacementConfig(){if(null==this.highImpactPlacementConfig){this.highImpactPlacementConfig={targetQuartile:[.25,.5,.75,1][Math.floor(4*Math.random())],type:"flyingCarpet"};const e=(()=>{const e=B("quartile");return e?Number(e):null})();null==e||Number.isNaN(e)?this.info(`Randomly generated target quartile ${this.highImpactPlacementConfig.targetQuartile}`):(this.highImpactPlacementConfig.targetQuartile=e,this.info(`Targeting quartile ${e} from query parameter`))}return this.highImpactPlacementConfig}getChildPercentageHeight(e){const t=this.childElements[e];return this.getPercentageHeight(t,this.parentElement)}handleHighImpactUnit(e,t){const{flyingCarpet:n}=this.config.highImpact,{slotId:i}=this.createFlyingCarpetSlot(e,n);this.highImpactTracking=Ou().newHighImpactTracking({...t,slotId:i}),this.addedFlyingCarpet=!0}shouldServeHighImpact(e){if("true"===B("disableFC"))return{shouldServe:!1};const t=this.getHighImpactPlacementConfig();if("flyingCarpet"===t.type&&freestar?.deviceInfo?.device?.type===He&&!this.addedFlyingCarpet){const n=this.config?.highImpact?.flyingCarpet;if(!n||n.active){const n=this.getChildPercentageHeight(e);return{shouldServe:n>=t.targetQuartile-.25,tracking:{percentilePlacement:n,highImpactType:"flyingCarpet"}}}}return{shouldServe:!1}}addSlot(e){const{shouldServe:t,tracking:n}=this.shouldServeHighImpact(e);t?this.handleHighImpactUnit(e,n):this.buildAndInsertStandardSlot(e)}getSizeMaxes(){const e=this.placement.sizes.filter((e=>Array.isArray(e)));let t=0,n=0;return e.forEach((e=>{t=Math.max(t,e[0]),n=Math.max(n,e[1])})),{maxWidth:t,maxHeight:n}}buildSlot(){const e=`${this.name}_${this.debugIndex}_${this.adsInsertedCount}`,{maxWidth:t,maxHeight:n}=this.getSizeMaxes(),i=kn({type:"div",id:e,classList:["fs-iai"],attributes:[{style:`min-height:${n}px; min-width:${t}px;`},{"data-freestar-ad":Wr({placement:this.placement})},{name:this.name}]}),s=e+"_slot",r=kn({type:"div",id:s});return i.appendChild(r),this.adsInsertedCount+=1,{element:i,newAdSlotConfig:{placementName:this.name,slotId:s,skipSAU:!0}}}intersectionObserverCallback(e,t){e.forEach((e=>{if(e.isIntersecting){const{target:n}=e;t.unobserve(n);const i=this.slotsAwaitingIntersection[n.id];i&&(this.info("Registering new ad slot for",n.id),delete this.slotsAwaitingIntersection[n.id],freestar.newAdSlots([i]))}}))}registerSlot(e){let{element:t,newAdSlotConfig:n}=e;this.intersectionObserver||(this.intersectionObserver=new IntersectionObserver(((e,t)=>this.intersectionObserverCallback(e,t)),{rootMargin:"100%"})),this.slotsAwaitingIntersection[t.id]=n,this.intersectionObserver.observe(t),this.info("Waiting for intersection for",t.id)}debug(){freestar.debug&&(clearTimeout(this.debugTimeout),this.debugTimeout=setTimeout((()=>this._debug()),1e3))}_debug(){this.debugAddStyleNode(),this.debugNames()}getDebugStyleContent(){let e="";if(this.blocklistSelector){e=`\n            ${this.config.blocklist.map((e=>`${this.config.parentElement} > ${e}`)).join(", ")} {\n                outline: dashed red;\n            }\n            `}return`\n        ${this.config.parentElement} {\n            outline: solid blue;\n        }\n        ${this.config.parentElement} > ${this.config.childElement||"*"} {\n            outline: solid fuchsia;\n        }\n        .parent-label {\n            color: blue;\n        }\n        .child-label {\n            color: fuchsia;\n        }\n        .ad-label {\n            color: #00c389;\n        }\n        .iai-label {\n            position: absolute;\n            font: large;\n            background: silver;\n            padding: 3px;\n        }\n        .fs-iai {\n            outline: solid #00c389; /* freestar green */\n        }\n        ${e}\n        `}debugAddStyleNode(){const e=`iai-style-${this.name}`;if(!document.getElementById(e)){const t=document.createElement("style");t.id=e,t.textContent=this.getDebugStyleContent(),document.head.appendChild(t)}}debugNames(){this.debugAddLabel(this.parentElement,"parent-label",`${this.name} parent ${this.debugIndex}`),this.childElements.forEach(((e,t)=>this.debugAddLabel(e,"child-label",`child ${t}`))),this.ads.forEach(((e,t)=>this.debugAddLabel(e,"ad-label",`ad ${t}`)))}debugAddLabel(e,t,n){let i=e.querySelector(".iai-label");i||(i=document.createElement("label"),i.classList.add("iai-label"),e.insertBefore(i,e.firstChild)),i.classList.add(t),i.textContent=n}}const Du=vt.getInstanceFn({ClassConstructor:class{constructor(){this.configs={},this.instances=[]}registerConfig(e){let{placement:t,intelligentAdInsertConfig:n}=e;const i=t.name;if(!this.configs[i]){const e={name:i,placement:t,intelligentAdInsertConfig:n};this.configs[i]=e,this.initConfig(e)}}initConfig(e){let{name:t,placement:n,intelligentAdInsertConfig:i}=e;if(ji({name:"iai"}))return;const s=i.parentElement,r=Array.from(document.querySelectorAll(s)).filter((e=>!this.instances.some((t=>t.parentElement===e))));r.forEach((e=>{const s=new Nu({name:t,placement:n,intelligentAdInsertConfig:i,parentElement:e,debugIndex:this.instances.length});this.instances.push(s)}))}initDocumentWatcher(){}},instanceName:"intelligentAdInsertManager"}),Lu={percentage:.2,blockedSiteIDs:[2184,6025,3129,726,725,2293]},Mu=()=>{let e;e=window.googletag||{},e.cmd=e.cmd||[],window.googletag=e,e.cmd.push((()=>{const t=ze({key:Bt});t&&e.pubads().setTargeting("tg",t),e.pubads().setTargeting("fs_session_id",freestar.msg.sessionId),e.pubads().setTargeting("fs_pageview_id",freestar.msg.pageId),e.pubads().setTargeting("fs_version",freestar.version)}))},Bu=()=>window.location.search.includes("fslog");const Fu=e=>{let{initEngine:t}=e;if(freestar.fsdata.footerBiddingEnabled&&!ji({name:"footerBidding"})){let{psoDisableInteraction:e=!1}=freestar.fsdata;(!Me()||Me()&&e)&&("complete"===document.readyState?Fo(t):window.addEventListener("load",(()=>Fo(t)))),Me()&&!e&&Ue({name:"engine",callback:()=>Fo(t)})}else Fo(t)},Uu=async()=>{await wt().fetch({fetchFn:Dt,requestId:"getIdealData",onError:()=>{Pt({siteId:freestar.fsdata.siteId})||wt().fetch({requestId:"getFloorsData",fetchFn:()=>Ar({deviceVendor:window.freestar.deviceInfo.device.vendor,deviceType:window.freestar.deviceInfo.device.type,refreshNumber:0,isFloorsActive:window.freestar?.fsdata?.isTriple13Enabled})})},onSuccess:e=>{let{data:t}=e;Pt({siteId:freestar.fsdata.siteId})||t&&t.floors||wt().fetch({requestId:"getFloorsData",fetchFn:()=>Ar({deviceVendor:window.freestar.deviceInfo.device.vendor,deviceType:window.freestar.deviceInfo.device.type,refreshNumber:0,isFloorsActive:window.freestar?.fsdata?.isTriple13Enabled})})}})};r.function((async function(e){let{freestar:t,stickyFooter:n={},sideWall:s={},stickyRail:r={},initDynamicAds:o,newDynamicContent:d,DynamicAds:l,dispensaryData:c,pushdown:f={},video:h={},analytics:p,performanceLogger:m,slidingUnit:g={},stickyAd:b={},interstitial:y,superflex:v,joke:I={},win:_,eventBus:S,confiant:E}=e;await Uu(),function(e){let{isActive:t=!1}=e;window.freestar.debug=!(!t&&!Bu())&&99}({}),An(),Vc(),Mu(),Er().initiateWatcher(fsprebid),(null==wu&&(wu=new vu),wu).initiateWatcher(fsprebid),m.setAnalytics(p),t.analyticsQueue?.length&&t.analyticsQueue.forEach((e=>p.track(e))),delete t.analyticsQueue,m.pushAllPendingMarksToMsgQue(),m.logMark({markerName:Yn.pubfigEngineLoad,compareTo:[Yn.pubfigEngineLoadInit]}),t.queue=t.queue||[],t.config=t.config||{},t.identity=oc,t.isHttps="https:"===window.location.protocol?1:0,t.dynamicIdNum=t.dynamicIdNum||1,t.refreshSlots=[],t.rebidSlots=[],t.tools={},t.requests={},t.requests.que=[],t.requests.process=[],t.requests.timestamp=void 0,t.url=window.location.href,t.bidRequestNum=0,t.sideWallUnitControl=[],t.dfpSlotInfo={},t.func={},t.refreshLibrary={},t.pushdownControl={},t.visibilityRefresh={},t.newAdSlotIds=[],t.server={},t.bidsWon={},t.networkFloor={},t.blockedRanges={},t.requestReference={},t.dynamicSlots=[],t.dynamicSlotLibrary={},t.googletagCorrelatorUpdate=!0,t.rebidControl={},t.gamMap={},t.reportLibrary={},t.fsDfpId=Gn(),t.fsDevDfpId=Wn(),t.gamImpressionCallbacks=[],t.googleInterstitialPlacement,t.allowBidResponseCollection=!1,t.viewableImpression={},t.newAdSlotsAllowed=!0,t.frequencyLibrary={},t.frequencyLibraryV2={},t.newAdSlotsQueue=[],t.focusQueue=[],t.initRequested=!1,t.adjustments={isLogged:B("adjustment-log"),bids:[]},t.logPerformanceMarks=t.performanceLogger.logPerformanceMarkers,t.newAdSlotsCalled=[],t.enabledSlotsCalled=[],t.standAlonePlayer={callback:void 0,slotId:void 0},t.currentStickyFooter=void 0,t.gumgumLoaded=!1,window.load_script=Tn,t.setVideoAdhesionEnabled=i(n.setVideoAdhesionEnabled,{name:"setVideoAdhesionEnabled",warn:!0}),t.slotTargeting=Qi,t.newDynamicContent=i(d,{name:"newDynamicContent",warn:!0}),t.requestQueInitiate=Ui,t.newAdSlots=ts,t.createAdSlot=Zi,t.newStickyFooter=i(n.newStickyFooter,{name:"newStickyFooter",warn:!0}),t.deleteAdSlots=Ki,t.format_pbjs=In,t.freestarReloadAllAdSlots=function(){let{slotIds:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{slotIds:null},n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n&&console.warn("freestar.freestarReloadAdSlot() has been deprecated and will be removed in the future use freestar.refreshAllSlots()");t.log(1,`${e?"freestar.refresh":"freestar.refreshAllSlots"}${e?" : "+e:null}`);const i=[],s=$n().map((function(n){let s=n.getSlotElementId();if(t.refreshLibrary[s]){if(-1===t.refreshLibrary[s].refreshTime)return;try{t.refreshLibrary[s].refreshCounter>-1?t.refreshLibrary[s].refreshCounter++:t.refreshLibrary[s].refreshCounter=1}catch(e){t.log(1,"freestar.refreshAllSlots slot not found",s)}}if(!e||e.indexOf(s)>-1)return i.push(s),t.refreshLibrary[s]&&(t.refreshLibrary[s].refreshCounter=1),n})).filter((e=>void 0!==e));if(e&&!i.length)return;i.forEach((e=>{ai.reset({elementId:e})})),ri(i,s)},t.func.browserInfo=Kr,t.newPushdown=i(f.add,{name:"newPushdown",warn:!0}),t.deletePushdown=i(f.delete,{name:"deletePushdown",warn:!0}),t.newSidewall=i(s.add,{name:"newSidewall",warn:!0}),t.deleteSidewall=i(s.delete,{name:"deleteSidewall",warn:!0}),t.newVideo=i(h.add,{name:"newVideo",warn:!0}),t.deleteVideo=e=>i(h.remove,{name:"deleteVideo",warn:!0})({name:e}),t.logRandomJoke=i(I.logRandomJoke,{name:"logRandomJoke",warn:!0}),t.newStandAlonePlayer=Nc,t.newRevolvingRail=Kc,t.newStickyRail=i(r.create,{name:"newStickyRail",warn:!0}),t.deleteStickyRail=i(r.destroy,{name:"deleteStickyRail",warn:!0}),t.deleteStandAlonePlayer=Dc;const A=window.innerWidth||document.documentElement.clientWidth,T=window.innerHeight||document.documentElement.clientHeight;var C,R,O;if(t.deviceOrientation=fi({width:A,height:T}),t.reportingAdInfo=()=>{console.warn("freestar.reportingAdInfo() has been deprecated")},t.getActiveModulesFromConfig=function(e,t){const n=new Set,i=u();return e.forEach((e=>{(e.superflex||e.superflexV2)&&n.add("Superflex"),e.lazyAd&&n.add("LazyAd"),e.fluidAd&&n.add("FluidAd"),e.stickyFooterOptions&&e.stickyFooterOptions.active&&n.add("StickyFooter"),e.sideWallOptions&&0!==e.sideWallOptions.type&&n.add("SideWall"),e.pushdownOptions&&e.pushdownOptions.isPushdownUnit&&n.add("Pushdown"),e.revolvingRailOptions&&e.revolvingRailOptions.active&&n.add("RevolvingRail"),e.stickyRailOptions&&e.stickyRailOptions.active&&n.add("StickyRail"),e.interstitialOptions&&e.interstitialOptions.active&&n.add("Interstitial");const t=e.sizeMappings.some((e=>e?.elementTargetedConfig?.active));(e.dynamicAdOptions&&e.dynamicAdOptions.active||t)&&n.add("DynamicAds"),e.dynamicAdOptionsV2&&e.dynamicAdOptionsV2.dynamicAd2&&n.add("DynamicAds"),e.slidingUnitOptions&&e.slidingUnitOptions.active&&n.add("SlidingUnit"),e.stickyAdOptions&&e.stickyAdOptions.stickyAdEnabled&&n.add("StickyAd"),e.sizeMappings&&e.sizeMappings.forEach((e=>{e.videoEnabled&&n.add("Video"),e.superflex&&n.add("Superflex")}))})),t.forEach((e=>{e.active&&n.add("Video")})),Array.from(n).filter((e=>i.includes(e)))}(t.fsdata.placements,t.fsdata.videoAds),t?.config?.setNonPersonalizedAds&&t.queue.push((()=>{googletag.pubads().setRequestNonPersonalizedAds(1)})),t?.config?.ppid&&("string"==typeof t.config.ppid?t.queue.push((()=>{googletag.pubads().setPublisherProvidedId(t.config.ppid)})):console.warn("freestar.config.ppid is not a string and will not be set")),async function(){const{isRefreshAllowed:e}=wr().determineAdRefreshBehavior();if(!e){return["freestarReloadAdSlot","reloadAllAdSlots","refreshLibraryCreator","refreshActiveSlots","refreshAllSlots"].forEach((e=>{t[e]=()=>t.log(1,"Ad refresh is disabled.")})),void(t.refresh=()=>console.warn("Ad Refresh is disabled for this geo."))}t.refresh=e=>{!function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n&&console.warn("freestar.freestarReloadAdSlot() has been deprecated and will be removed in the future use freestar.refresh()");t.queue.push((function(){Oi.refreshSlots({slotIds:"string"==typeof e?[e]:e},n)}))}(e,!1)},t.freestarReloadAdSlot=Oi.refreshSlots,t.reloadAllAdSlots=Oi.refreshSlots,t.refreshAllSlots=Oi.refreshAllSlots,t.refreshActiveSlots=()=>Oi.refreshAllActiveSlots()}().catch((e=>console.error("Error setting up ad refresh logic:",e))),wr().allowConfiant()&&await E.init(),t.deleteStickyFooter=()=>{console.warn("The deleteStickyFooter method is not available!")},t.modulesLoaded.engine=!0,t.disableAutoTrackPageviews||(C=window.history,R=C.pushState,O=C.replaceState,C.pushState=function(e){let t=new CustomEvent("pushState");return t.state=e,window.dispatchEvent(t),R.apply(C,arguments)},C.replaceState=function(e){let t=new CustomEvent("replaceState");return t.state=e,window.dispatchEvent(t),O.apply(C,arguments)}),t.trackPageview=function(){let{path:e=window.location.href}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e!==t.url&&(t.log(1,"TrackPageview invoked."),function(){let{win:e=window,level:t=$o.page}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=e?.freestar?.frequencyLibraryV2;n&&Object.values(n).forEach((e=>{e&&"function"==typeof e.resetIteration&&e.resetIteration({level:t})}))}({level:$o.page}),t.url=e,t.hitTime=Date.now(),jc(),qc(),Kr(),dt(),d?.())},t.Browsi={pushAd:(e,n,i)=>{t.newAdSlots({placementName:n,slotId:e,targeting:{browsiId:i}})}},t.func.domloaded=!1,t.visibilityRefresh.runRefresh=!0,t.visibilityRefresh.enacted=!1,t.visibilityRefresh.timeLeft=null,t.visibilityRefresh.refreshTimeMinimum=30,t.videoAdsRan=!1,0!=t.fsdata.adRefreshRate&&!0!==(t.fsdata.visibilityRefreshDisabled&&Boolean(t.fsdata.visibilityRefreshDisabled))||(t.visibilityRefresh.runRefresh=!1),t.fsdata.visibilityRefreshTime&&Number(t.fsdata.visibilityRefreshTime)>1&&(t.visibilityRefresh.refreshTimeMinimum=t.fsdata.visibilityRefreshTime),!wr().getBypassFirstAuction()&&t.fsdata.networks.some((e=>"consumable"===e.slug))&&Tn("https://sync.serverbid.com/ss/2000462.js"),Zc(),function(e){if(e){let t=document.getElementsByTagName("head")[0],n=kn({type:"style",attributes:[{type:"text/css"},{"data-owner":"freestar"}]});n.appendChild(document.createTextNode(e.replace(/(\r\n|\n|\r)/gm,""))),t.appendChild(n)}}(window.freestar.fsdata.customCss),te({name:"pubfigLoaded",detail:!0}),(B("blockthrough")||t.fsdata.blockthroughEnabled&&2===t.fsdata.blockthroughVersion)&&wr().allowBlockthrough()&&Fc(),t.queue.push((()=>{t.rebidManager=ai})),Ac.setNetworks(),Ac.getBidderSettings(),Ac.setBidderSettings(),Li(),Ac.enableAnalyticsAdapter(),window.freestar.fsdata.identityProviders&&-1!==window.freestar.fsdata.identityProviders.findIndex((e=>"merkleId"===e.slug))){const e=document.createElement("script");e.src="//js-sec.indexww.com/ht/p/184310-82987131453484.js",document.head.insertBefore(e,document.head.firstElementChild),t.log("inserted IX Identity Library script")}-1===x.indexOf(t.fsdata.siteId)&&(t.allowBidResponseCollection=Math.random()<(t.fsdata.prebidLogPercentage||1)/100,(50===Math.floor(99*Math.random())||window.location.search.indexOf("fssniffer")>-1)&&t.queue.push((function(){!function(){const e={video:[],script:[],iframe:[]};function t(e){const t=e.src;return""!==t&&null!=t&&"about:blank"!==t}Object.keys(e).forEach((n=>{const i=document.querySelectorAll(n);e[n]=Array.from(i).filter(t).map((e=>{let{src:t}=e;return t}))})),a.instance.resolve(Ht.ANALYTICS).then((t=>{t.track(new os({scripts:e.script,videos:e.video,iframes:e.iframe}))}))}()}))),Ln(),t.debug>=99&&(console.clear=function(){}),t.log(1,"Freestar Version: "+t.version),Me()&&(t.log(1,"Page Speed Optimized in effect, filtering out the following products:",w.join(",")),w.forEach((e=>{t.config.products[e]||(t.config.products[e]={}),t.config.products[e]=Object.assign(t.config.products[e],{disabled:!0})})),googletag.cmd.push((function(){googletag.pubads().setTargeting("fs_optimization","true")}))),window.setTimeout(window.freestar.func.browserInfo,3e4),null==t.fsdata.timeout&&(t.fsdata.timeout=1200),null==t.fsdata.mobileTimeout&&(t.fsdata.mobileTimeout=1500);const P=t.fsdata.retries,N=at({name:"fs.direct.traffic"});t.fsdirect=N,dt(),(new iu).init(),Br();const D=JSON.parse(ze({key:"fs.ibv"}))||{};if(!Lu.blockedSiteIDs.includes(t.fsdata.siteId)&&void 0===D.inTest){const e=Lu.percentage;Math.random()<e||B("fs-use-ibv")?D.inTest=!0:D.inTest=!1,qe({key:"fs.ibv",value:D,type:$e.object})}if(D.inTest){t.log({title:"FREESTAR VIDEO V1.0.0",styles:"background: black; color: white; border-radius: 3px; padding: 3px"},"Session is participating in Freestar In Banner Video test...");t.fsdata.placements.filter((e=>e.sizes.some((e=>"300x250"===e.join("x"))))).forEach((e=>{e.sizeMappings.forEach((e=>{e.mediaTypes.push("video")}))}))}const L=()=>{m.logMark({markerName:Yn.pubfigEngineSetupStart,compareTo:[Yn.pubfigEngineLoad]}),googletag.pubads().disableInitialLoad(),Zn();const e=B("dfpkey"),n=B("block");switch(e&&Fn({key:"test",value:e}),n&&"fsdirect"===n&&(rt({name:"fs.direct.traffic",value:!0}),t.fsdirect=!0,Fn({key:"block",value:"fsdirect"})),document.referrer.search(/facebook/i)>0?Fn({key:"referrer",value:"facebook"}):(document.referrer.search(/twiter/i)>0||document.referrer.search(/t.co/i)>0)&&Fn({key:"referrer",value:"twitter"}),navigator.userAgent){case navigator.userAgent.search(/facebook/i)>0:case navigator.userAgent.search(/facebot/i)>0:case navigator.userAgent.search(/FB_IAB/i)>0:case navigator.userAgent.search(/FBAN/i)>0:case navigator.userAgent.search(/FBAV/i):Fn({key:"user-agent",value:"facebook"});break;case navigator.userAgent.search(/Twitter/i)>0:Fn({key:"user-agent",value:"twitter"});break;default:Fn({key:"user-agent",value:function(){const e=t.deviceInfo.browser.name,n=t.deviceInfo.os.name;return"Mac OS"===n&&"Safari"===e?"Safari":"iOS"===n?"iOS":e}()})}["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach((function(e){let t=B(e);t&&Fn({key:e,value:t})}));let i=!1;oc.hadronInit(window.freestar.fsdata.identityProviders),yu((function(){i||(i=!0,fsprebid.que.push((function(){t.log(1,"fspbjs.que.push - init"),Object.keys(t.fsdata.aliases).forEach((function(e){fsprebid.aliasBidder(t.fsdata.aliases[e],e)})),Ac.setEventListeners(),window.freestar.fsdata.timeout=wr().getMaxAuctionTimeout(),Ac.settingConfig(fsprebid,wr()),Ac.setSChain(),Ac.enableTIDs(),fsprebid.refreshUserIds(),oc.setCriteoConfig(),Di({adUnits:Nr().filter((e=>Dr(e))).map((e=>In(e)))}),t.coppa=new Jn(window.freestar,window.googletag,window.fsprebid),M()})))})),t.fsdata.disableSingleRequest||googletag.pubads().enableSingleRequest();let s=null;googletag.pubads().addEventListener("impressionViewable",(function(e){const n=e.slot.getSlotElementId();t.log(1,`GAM impressionViewable ${n}`),n&&t.gamImpressionCallbacks[n]&&t.gamImpressionCallbacks[n]({event:e}),y?.postRender?.({event:e,elementId:n})})),googletag.pubads().addEventListener(Ut,(function(e){t.log(1,`GAM ${Ut} ${e.slot.getSlotElementId()}`),null===s&&(s=e.slot.getSlotElementId(),m.logMark({markerName:Yn.pubfigSlotRequested})),t.currentStickyFooter&&"function"==typeof t.currentStickyFooter.isSticky&&t.currentStickyFooter.isSticky(e)&&m.logMark({markerName:Yn.pubfigStickyFooterSlotRequested})})),Mc({firstAdRequestedElement:s}),t.fsdata.collapseEmptyDivs&&(t.log("GAM Option set to collapseEmptyDivs(true)"),googletag.pubads().collapseEmptyDivs(!0)),googletag.pubads().addEventListener(Ft,(function(e){wi(e);const n=e.slot.getSlotElementId();if(t.log(1,`GAM ${Ft} ${n}`),t.currentStickyFooter&&"function"==typeof t.currentStickyFooter.eval&&t.currentStickyFooter.placement.name===n&&t.currentStickyFooter.eval(e),e.slot.getSlotElementId()===s&&m.logMark({markerName:Yn.pubfigSlotRenderEnded,compareTo:[Yn.pubfigSlotRequested]}),t.reportLibrary[e.slot.getSlotElementId()]=e,Xr(e,!1),(e=>{let{event:t}=e;const n=t?.slot?.getSlotElementId?.();if(!n)return;er(Zs(n))})({event:e}),t.fsdata.customDirectAdRefresh&&function(e){const t=["advertiserId","campaignId","lineItemId","creativeId"];for(const n of t){const t=e[n];if(null!=t&&window.freestar.fsdata.directAdRefreshTargeting.includes(t.toString()))return window.freestar.log(1,`found ${n} ${t} in directAdRefreshTargeting, setting refresh ${window.freestar.fsdata.directAdRefreshRate}.`),!0}return!1}(e)){ca(e.slot.getSlotElementId())}})),googletag.pubads().addEventListener("slotOnload",Jr);const r=En({freestar:t}),a=[r.format,r.size,r.pb,r.adid,r.bidder];googletag.pubads().addEventListener(Ft,(e=>{const{slot:t}=e;a.forEach((e=>{0!==t.getTargeting(e).length&&t.clearTargeting(e)}))})),t.fsdata.customDirectAdRefresh&&setInterval(ua,5e3),googletag.enableServices(),m.logMark({markerName:Yn.pubfigEngineSetupEnd,compareTo:[Yn.pubfigEngineSetupStart]}),c.cdep&&Fn({key:"cdep",value:c.cdep})};if(Ur())throw new Error("Ad serving is blocked in "+t.locData.iso);if(performance.mark("pubfig-init"),googletag.cmd.unshift?googletag.cmd.unshift((function(){t.log(1," googletag.cmd.unshift - init"),xr().getInitialFloorsData().then(L)})):(t.log({title:"WARNING!",styles:"background: red; color: white; border-radius: 3px; padding: 3px"}," googletag.cmd.unshift not found skipping"),xr().getInitialFloorsData().then(L)),"complete"===document.readyState)i(h.init)({isAfterLoadingPage:!0}),U();else{let e=setInterval((function(){"complete"===document.readyState&&(clearInterval(e),i(h.init)({isAfterLoadingPage:!0}),U())}),100)}function M(){if(t.log(1," initAdserver"),!fsprebid.initAdserverSet){if(!googletag.pubadsReady&&fsprebid.retries<=P)return setTimeout(M,50),void fsprebid.retries++;fsprebid.initAdserverSet=!0,t.log(1," fsInitAdserver"),Bc((function(e,a){t.log(1,"Page Grabber: "+(a?"completed page grabber session":"either the grabber placement is failing or there is no grabber placement")),t.newAdSlotsAllowed=!0,t.newAdSlotsQueue.forEach((e=>e.process())),function(){const e={elementIds:[],bidObjects:[],slots:[]},a=(t,n)=>{n&&(e.elementIds.push(n.placement.name),e.bidObjects.push(n.bidObject),e.slots.push(n.slot))};(function(){if(void 0!==t.fsdata.quantcast&&!1===t.fsdata.quantcast||(window._qevents=window._qevents||[],Array.isArray(window._qevents)&&window._qevents.push({qacct:"p-UeXruRVtZz7w6"}),Tn("https://secure.quantserve.com/quant.js")),t.fsdata.scripts2&&Array.isArray(t.fsdata.scripts2)){const e=t.fsdata.scripts2;for(let n=0;n<e.length;n++)if(!0===e[n].active){const i=Math.floor(100*Math.random())+1,s=e[n].versions;let r=0;t.log(2,`Rolled ${i} for script ${e[n].name}`);for(let a=0;a<s.length;a++)if(!0===s[a].active&&(r+=s[a].trafficPercentage,i<=r)){t.log(2,`Selecting version ${s[a].name} for script ${e[n].name}. ${s[a].trafficPercentage}% chance.`);try{Tn(s[a].href)}catch(e){console.error(e)}break}}}else if(t.fsdata.scripts&&Array.isArray(t.fsdata.scripts))for(let e=0;e<t.fsdata.scripts.length;e++)try{Tn(t.fsdata.scripts[e])}catch(e){console.error(e)}})(),i(f.init)(a),i(s.init)(a),Qc(),v?.init(),i(r.init)(),Xc(),i(g.init)(),i(b.init)(),t.fsdata.singleLineEnabled&&(t.log({title:"SLO"},"Single line of code enabled"),t.fsdata.placements.forEach((e=>{(function(e){let{placement:t}=e;for(const e in qi){let n;if(n="dynamicAds"===e?Vi(t):t[qi[e].optionsPath||`${e}Options`],n&&n.active||n&&"pushdown"===e&&n.isPushdownUnit||n&&"sideWall"===e&&n.type>0)return!1}return!!document.getElementById(t.name)})({placement:e})&&t.config.enabled_slots.push({placementName:e.name,slotId:e.name})}))),i(o)(),t.fsdata.placements.forEach((e=>{const t=function(e){let{placement:t}=e;return t?.selectedSize?.intelligentAdInsertConfig}({placement:e});t?.active&&Du().registerConfig({placement:e,intelligentAdInsertConfig:t})})),i(h.init)();const d=setTimeout((()=>{i(h.init)({failSafeStart:!0}),window.clearTimeout(d)}),2e4);t.visibilityRefresh.enacted||!0!==t.visibilityRefresh.runRefresh||(t.visibilityRefresh.enacted=!0,tu()),Me()?(t.log({title:"PSO"},"Loading Page Speed Optimized Sticky Footer"),t.newStickyFooter()):i(n.init)(),_.document.body.addEventListener("gumgum-inscreen-load",(()=>{t.gumgumLoaded=!0,S.emit(Ts)})),t.loaded=!0;let l=ee({queue:[]},t);t.queue={push:function(e){googletag.cmd.push(e)}};for(let e=0;e<l.queue.length;e++)t.queue.push(l.queue[e]);async function c(){const{isRefreshAllowed:e}=wr().determineAdRefreshBehavior();e&&new Oi}l={},F(),(!t.initCallback||t.initCallback&&"function"==typeof t.initCallback&&-1===t.initCallback.toString().indexOf("enabled_slots"))&&t.config&&t.config.enabled_slots&&t.config.enabled_slots.length&&(performance.mark("check-ad-enabled-slots-start"),t.config.enabled_slots.forEach((function(t){"object"!=typeof t&&(t={placementName:t,slotId:t});const n=sa({name:pn({slotId:t.placementName})}),i=document.getElementById(t.slotId),{targeting:s={}}=t;if(i&&n&&n.validAdSizes)if(i.setAttribute("name",n.name),n.lazyAd&&n.selectedSize&&n.selectedSize.lazyLoadViewportHeight>0)zi({element:i,placement:n});else{const i=ra({placement:n,slotId:t.slotId,targeting:s});i&&(e.elementIds.push(t.slotId),i.bidObject&&e.bidObjects.push(i.bidObject),i.slot&&e.slots.push(i.slot))}})),performance.mark("check-ad-enabled-slots-end"),t.config.enabled_slots=[],e.bidObjects=e.bidObjects.filter((e=>-1===fsprebid.adUnits.map((e=>e.code)).indexOf(e.code)))),e.bidObjects.length&&Di({adUnits:e.bidObjects}),e.elementIds.length&&ri(e.elementIds,e.slots),setTimeout((()=>{c().catch((e=>console.error("Error setting up ad refresh logic:",e)))}),750)}()})),y?.init()}}function F(){if(t.callbackIntervalCount++,fsprebid.initAdserverSet&&void 0!==t.initCallback&&void 0===t.initCallbackCalled&&"function"==typeof t.initCallback){return t.initCallbackCalled=!0,clearInterval(t.callbackInterval),t.initCallback(),function(e,t){e.push=function(n){Array.prototype.push.call(e,n),t(e)}}(t.config.enabled_slots,(function(e){ts([e[e.length-1]])})),!0}return t.callbackIntervalCount>50&&clearInterval(t.callbackInterval),!1}function U(){if(t.func.domloaded)return;const e=document.getElementsByTagName("body")[0],n=Vs()||t.fsdata.reportThisAd?"var(--use)":"var(--doNotUse)";e.style.setProperty("--fsAncillary",n),Kr(),t.disableAutoTrackPageviews||(window.addEventListener("pushState",(e=>setTimeout((()=>Qr(e)),1))),window.addEventListener("replaceState",(e=>Qr(e))),window.addEventListener("popstate",(()=>t.trackPageview()))),t.fsdata.addIsFreestar&&!e.classList.contains("is-freestar")&&(e=>{const t=document.getElementsByTagName("body")[0];-1==t.className.indexOf(`${e}`)&&(t.className+=t.className.length?` ${e}`:e)})("is-freestar"),t.fsdata.reorientationRefresh&&!t.config.disableReorientation&&(t.config.alwaysRefresh||(t.config.alwaysRefresh=t.fsdata.placements.map((e=>e.name))),hi()),t.func.domloaded=!0,t.callbackIntervalCount=0,t.callbackInterval=window.setInterval(F,200),t.deviceInfo.device.type===He&&window.addEventListener("orientationchange",$),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date((new Date).getTime()+33696e6);function t(e,t,n){return n.substring(0,e)+t+n.substring(e+t.length)}if("FREESTAR"===window.freestar.fsdata.cmpType&&"US"===window.freestar.locData.iso){const n="usprivacy",i=at({name:n});if(k.includes(window.freestar.locData.state))if(i){const s="//a[text()='Do Not Sell My Personal Information']",r=document.evaluate(s,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;"N"===i[1]&&rt(r?{name:n,value:t(1,"Y",i),domain:`.${window.location.host}`,expires:e}:{name:n,value:t(1,"-",i),domain:`.${window.location.host}`,expires:e})}else rt({name:n,value:"1-N-",domain:`.${window.location.host}`,expires:e})}}()}function $(){void 0!==t.resizetimer&&window.clearTimeout(t.resizetimer),t.resizetimer=window.setTimeout((function(){Br(),t.currentStickyFooter&&t.currentStickyFooter.eval&&"function"==typeof t.currentStickyFooter.eval&&t.currentStickyFooter.eval({isEmpty:!0})}),300)}window.addEventListener("load",(function(e){i(h.init)({isAfterLoadingPage:!0}),U()})),t.disableRefresh=Sa,t.disableRefreshOn=wa,t.enableRefresh=Ea,t.enableRefreshOn=Ia,t.DynamicAds=l,t.fsRequestBids=ri}),{token:"initEngine",dependencies:["freestar","DispensaryData",{token:"StickyFooter",optional:!0},{token:"Joke",optional:!0},{token:"SideWall",optional:!0},{token:"initDynamicAds",optional:!0},{token:"newDynamicContent",optional:!0},{token:"DynamicAds",optional:!0},{token:"SlidingUnit",optional:!0},{token:"StickyAd",optional:!0},{token:"StickyRail",optional:!0},{token:"Interstitial",optional:!0},{token:"Pushdown",optional:!0},{token:"Video",optional:!0},{token:"Superflex",optional:!0},Ht.ANALYTICS,Ht.PERFORMANCE_LOGGER,{token:"window",alias:"win"},Ht.EVENT_BUS,Ht.CONFIANT]}),r.function((function(e){let{botTraffic:t,initEngine:n}=e;if(t.checkForBot(),t.isDetected)return;const i="FUNDING_CHOICES"===window.freestar.fsdata.cmpType?()=>{return e=()=>{Fu({initEngine:n}),window.addEventListener("pubfigLoaded",(()=>freestar.log(1,"checkPageSpeedOptimizationAndUserConsent called after googlefc validation")))},window.googlefc=window.googlefc||{},window.googlefc.callbackQueue=window.googlefc.callbackQueue||[],void window.googlefc.callbackQueue.push({CONSENT_DATA_READY:e});var e}:()=>Bo(window.freestar.fsdata.cmpType,window.freestar.locData,(()=>{Fu({initEngine:n}),window.addEventListener("pubfigLoaded",(()=>freestar.log(1,"checkPageSpeedOptimizationAndUserConsent called after CMP initialization")))}));freestar?.pubfigState?.configReady?i():window.addEventListener("pubfigRunEngine",i)}),{token:"main",dependencies:["BotTraffic","initEngine"]}),a.instance.call("main"),e.CarouselManager=Hd,e.FORBIDDEN_FOR_SLIDING_ADS_BIDDERS=fd,e.InImageManager=Zd,e.Interstitial=Pd,e.Pushdown=bd,e.SideWall=ja,e.SlidingUnitAdsManager=ud,e.StickyAdManager=hd,e.StickyFooter=Na,e.StickyRail=Ad,e.Video=cd,Object.defineProperty(e,"__esModule",{value:!0})}({});
